/*! For license information please see bundle.c6e5e77c51636547c365.js.LICENSE.txt */
(()=>{var e={120:function(e){e.exports=function(){"use strict";var e=function(t,A){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var A in t)Object.prototype.hasOwnProperty.call(t,A)&&(e[A]=t[A])})(t,A)};function t(t,A){if("function"!=typeof A&&null!==A)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function n(){this.constructor=t}e(t,A),t.prototype=null===A?Object.create(A):(n.prototype=A.prototype,new n)}var A=function(){return(A=Object.assign||function(e){for(var t,A=1,n=arguments.length;A<n;A++)for(var r in t=arguments[A])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function n(e,t,A,n){return new(A||(A=Promise))((function(r,i){function s(e){try{a(n.next(e))}catch(e){i(e)}}function o(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof A?t:new A((function(e){e(t)}))).then(s,o)}a((n=n.apply(e,t||[])).next())}))}function r(e,t){var A,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(A)throw new TypeError("Generator is already executing.");for(;s;)try{if(A=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{A=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}function i(e,t,A){if(A||2===arguments.length)for(var n,r=0,i=t.length;r<i;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||t)}for(var s=function(){function e(e,t,A,n){this.left=e,this.top=t,this.width=A,this.height=n}return e.prototype.add=function(t,A,n,r){return new e(this.left+t,this.top+A,this.width+n,this.height+r)},e.fromClientRect=function(t,A){return new e(A.left+t.windowBounds.left,A.top+t.windowBounds.top,A.width,A.height)},e.fromDOMRectList=function(t,A){var n=Array.from(A).find((function(e){return 0!==e.width}));return n?new e(n.x+t.windowBounds.left,n.y+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),o=function(e,t){return s.fromClientRect(e,t.getBoundingClientRect())},a=function(e){for(var t=[],A=0,n=e.length;A<n;){var r=e.charCodeAt(A++);if(r>=55296&&r<=56319&&A<n){var i=e.charCodeAt(A++);56320==(64512&i)?t.push(((1023&r)<<10)+(1023&i)+65536):(t.push(r),A--)}else t.push(r)}return t},c=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var A=e.length;if(!A)return"";for(var n=[],r=-1,i="";++r<A;){var s=e[r];s<=65535?n.push(s):(s-=65536,n.push(55296+(s>>10),s%1024+56320)),(r+1===A||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="undefined"==typeof Uint8Array?[]:new Uint8Array(256),u=0;u<l.length;u++)h[l.charCodeAt(u)]=u;var d=function(e,t,A){return e.slice?e.slice(t,A):new Uint16Array(Array.prototype.slice.call(e,t,A))},p=function(){function e(e,t,A,n,r,i){this.initialValue=e,this.errorValue=t,this.highStart=A,this.highValueIndex=n,this.index=r,this.data=i}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>5])<<2)+(31&e),this.data[t];if(e<=65535)return t=((t=this.index[2048+(e-55296>>5)])<<2)+(31&e),this.data[t];if(e<this.highStart)return t=2080+(e>>11),t=this.index[t],t+=e>>5&63,t=((t=this.index[t])<<2)+(31&e),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),g=10,f=13,m=15,B=17,w=18,v=19,y=20,x=21,C=22,b=24,_=25,E=26,U=27,F=28,Q=30,M=32,S=33,T=34,L=35,H=37,I=38,D=39,R=40,P=42,N=[9001,65288],O="ร",G="รท",V=function(e){var t,A,n,r=function(e){var t,A,n,r,i,s=.75*e.length,o=e.length,a=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(s):new Array(s),l=Array.isArray(c)?c:new Uint8Array(c);for(t=0;t<o;t+=4)A=h[e.charCodeAt(t)],n=h[e.charCodeAt(t+1)],r=h[e.charCodeAt(t+2)],i=h[e.charCodeAt(t+3)],l[a++]=A<<2|n>>4,l[a++]=(15&n)<<4|r>>2,l[a++]=(3&r)<<6|63&i;return c}(e),i=Array.isArray(r)?function(e){for(var t=e.length,A=[],n=0;n<t;n+=4)A.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return A}(r):new Uint32Array(r),s=Array.isArray(r)?function(e){for(var t=e.length,A=[],n=0;n<t;n+=2)A.push(e[n+1]<<8|e[n]);return A}(r):new Uint16Array(r),o=d(s,12,i[4]/2),a=2===i[5]?d(s,(24+i[4])/2):(t=i,A=Math.ceil((24+i[4])/4),t.slice?t.slice(A,n):new Uint32Array(Array.prototype.slice.call(t,A,n)));return new p(i[0],i[1],i[2],i[3],o,a)}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),k=[Q,36],K=[1,2,3,5],z=[g,8],W=[U,E],X=K.concat(z),Y=[I,D,R,T,L],J=[m,f],j=function(e,t,A,n){var r=n[A];if(Array.isArray(e)?-1!==e.indexOf(r):e===r)for(var i=A;i<=n.length;){if((a=n[++i])===t)return!0;if(a!==g)break}if(r===g)for(i=A;i>0;){var s=n[--i];if(Array.isArray(e)?-1!==e.indexOf(s):e===s)for(var o=A;o<=n.length;){var a;if((a=n[++o])===t)return!0;if(a!==g)break}if(s!==g)break}return!1},Z=function(e,t){for(var A=e;A>=0;){var n=t[A];if(n!==g)return n;A--}return 0},q=function(e,t,A,n,r){if(0===A[n])return O;var i=n-1;if(Array.isArray(r)&&!0===r[i])return O;var s=i-1,o=i+1,a=t[i],c=s>=0?t[s]:0,l=t[o];if(2===a&&3===l)return O;if(-1!==K.indexOf(a))return"!";if(-1!==K.indexOf(l))return O;if(-1!==z.indexOf(l))return O;if(8===Z(i,t))return G;if(11===V.get(e[i]))return O;if((a===M||a===S)&&11===V.get(e[o]))return O;if(7===a||7===l)return O;if(9===a)return O;if(-1===[g,f,m].indexOf(a)&&9===l)return O;if(-1!==[B,w,v,b,F].indexOf(l))return O;if(Z(i,t)===C)return O;if(j(23,C,i,t))return O;if(j([B,w],x,i,t))return O;if(j(12,12,i,t))return O;if(a===g)return G;if(23===a||23===l)return O;if(16===l||16===a)return G;if(-1!==[f,m,x].indexOf(l)||14===a)return O;if(36===c&&-1!==J.indexOf(a))return O;if(a===F&&36===l)return O;if(l===y)return O;if(-1!==k.indexOf(l)&&a===_||-1!==k.indexOf(a)&&l===_)return O;if(a===U&&-1!==[H,M,S].indexOf(l)||-1!==[H,M,S].indexOf(a)&&l===E)return O;if(-1!==k.indexOf(a)&&-1!==W.indexOf(l)||-1!==W.indexOf(a)&&-1!==k.indexOf(l))return O;if(-1!==[U,E].indexOf(a)&&(l===_||-1!==[C,m].indexOf(l)&&t[o+1]===_)||-1!==[C,m].indexOf(a)&&l===_||a===_&&-1!==[_,F,b].indexOf(l))return O;if(-1!==[_,F,b,B,w].indexOf(l))for(var h=i;h>=0;){if((u=t[h])===_)return O;if(-1===[F,b].indexOf(u))break;h--}if(-1!==[U,E].indexOf(l))for(h=-1!==[B,w].indexOf(a)?s:i;h>=0;){var u;if((u=t[h])===_)return O;if(-1===[F,b].indexOf(u))break;h--}if(I===a&&-1!==[I,D,T,L].indexOf(l)||-1!==[D,T].indexOf(a)&&-1!==[D,R].indexOf(l)||-1!==[R,L].indexOf(a)&&l===R)return O;if(-1!==Y.indexOf(a)&&-1!==[y,E].indexOf(l)||-1!==Y.indexOf(l)&&a===U)return O;if(-1!==k.indexOf(a)&&-1!==k.indexOf(l))return O;if(a===b&&-1!==k.indexOf(l))return O;if(-1!==k.concat(_).indexOf(a)&&l===C&&-1===N.indexOf(e[o])||-1!==k.concat(_).indexOf(l)&&a===w)return O;if(41===a&&41===l){for(var d=A[i],p=1;d>0&&41===t[--d];)p++;if(p%2!=0)return O}return a===M&&l===S?O:G},$=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var A=function(e,t){void 0===t&&(t="strict");var A=[],n=[],r=[];return e.forEach((function(e,i){var s=V.get(e);if(s>50?(r.push(!0),s-=50):r.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return n.push(i),A.push(16);if(4===s||11===s){if(0===i)return n.push(i),A.push(Q);var o=A[i-1];return-1===X.indexOf(o)?(n.push(n[i-1]),A.push(o)):(n.push(i),A.push(Q))}return n.push(i),31===s?A.push("strict"===t?x:H):s===P||29===s?A.push(Q):43===s?e>=131072&&e<=196605||e>=196608&&e<=262141?A.push(H):A.push(Q):void A.push(s)})),[n,A,r]}(e,t.lineBreak),n=A[0],r=A[1],i=A[2];return"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(r=r.map((function(e){return-1!==[_,Q,P].indexOf(e)?H:e}))),[n,r,"keep-all"===t.wordBreak?i.map((function(t,A){return t&&e[A]>=19968&&e[A]<=40959})):void 0]},ee=function(){function e(e,t,A,n){this.codePoints=e,this.required="!"===t,this.start=A,this.end=n}return e.prototype.slice=function(){return c.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),te=45,Ae=43,ne=-1,re=function(e){return e>=48&&e<=57},ie=function(e){return re(e)||e>=65&&e<=70||e>=97&&e<=102},se=function(e){return 10===e||9===e||32===e},oe=function(e){return function(e){return function(e){return e>=97&&e<=122}(e)||function(e){return e>=65&&e<=90}(e)}(e)||function(e){return e>=128}(e)||95===e},ae=function(e){return oe(e)||re(e)||e===te},ce=function(e){return e>=0&&e<=8||11===e||e>=14&&e<=31||127===e},le=function(e,t){return 92===e&&10!==t},he=function(e,t,A){return e===te?oe(t)||le(t,A):!!oe(e)||!(92!==e||!le(e,t))},ue=function(e,t,A){return e===Ae||e===te?!!re(t)||46===t&&re(A):re(46===e?t:e)},de=function(e){var t=0,A=1;e[t]!==Ae&&e[t]!==te||(e[t]===te&&(A=-1),t++);for(var n=[];re(e[t]);)n.push(e[t++]);var r=n.length?parseInt(c.apply(void 0,n),10):0;46===e[t]&&t++;for(var i=[];re(e[t]);)i.push(e[t++]);var s=i.length,o=s?parseInt(c.apply(void 0,i),10):0;69!==e[t]&&101!==e[t]||t++;var a=1;e[t]!==Ae&&e[t]!==te||(e[t]===te&&(a=-1),t++);for(var l=[];re(e[t]);)l.push(e[t++]);var h=l.length?parseInt(c.apply(void 0,l),10):0;return A*(r+o*Math.pow(10,-s))*Math.pow(10,a*h)},pe={type:2},ge={type:3},fe={type:4},me={type:13},Be={type:8},we={type:21},ve={type:9},ye={type:10},xe={type:11},Ce={type:12},be={type:14},_e={type:23},Ee={type:1},Ue={type:25},Fe={type:24},Qe={type:26},Me={type:27},Se={type:28},Te={type:29},Le={type:31},He={type:32},Ie=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(a(e))},e.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==He;)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case 34:return this.consumeStringToken(34);case 35:var t=this.peekCodePoint(0),A=this.peekCodePoint(1),n=this.peekCodePoint(2);if(ae(t)||le(A,n)){var r=he(t,A,n)?2:1;return{type:5,value:this.consumeName(),flags:r}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),me;break;case 39:return this.consumeStringToken(39);case 40:return pe;case 41:return ge;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),be;break;case Ae:if(ue(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 44:return fe;case te:var i=e,s=this.peekCodePoint(0),o=this.peekCodePoint(1);if(ue(i,s,o))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(he(i,s,o))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(s===te&&62===o)return this.consumeCodePoint(),this.consumeCodePoint(),Fe;break;case 46:if(ue(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var a=this.consumeCodePoint();if(42===a&&47===(a=this.consumeCodePoint()))return this.consumeToken();if(a===ne)return this.consumeToken()}break;case 58:return Qe;case 59:return Me;case 60:if(33===this.peekCodePoint(0)&&this.peekCodePoint(1)===te&&this.peekCodePoint(2)===te)return this.consumeCodePoint(),this.consumeCodePoint(),Ue;break;case 64:var l=this.peekCodePoint(0),h=this.peekCodePoint(1),u=this.peekCodePoint(2);if(he(l,h,u))return{type:7,value:this.consumeName()};break;case 91:return Se;case 92:if(le(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case 93:return Te;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Be;break;case 123:return xe;case 125:return Ce;case 117:case 85:var d=this.peekCodePoint(0),p=this.peekCodePoint(1);return d!==Ae||!ie(p)&&63!==p||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),ve;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),we;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),ye;break;case ne:return He}return se(e)?(this.consumeWhiteSpace(),Le):re(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):oe(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:c(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return void 0===e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();ie(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var A=!1;63===t&&e.length<6;)e.push(t),t=this.consumeCodePoint(),A=!0;if(A)return{type:30,start:parseInt(c.apply(void 0,e.map((function(e){return 63===e?48:e}))),16),end:parseInt(c.apply(void 0,e.map((function(e){return 63===e?70:e}))),16)};var n=parseInt(c.apply(void 0,e),16);if(this.peekCodePoint(0)===te&&ie(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var r=[];ie(t)&&r.length<6;)r.push(t),t=this.consumeCodePoint();return{type:30,start:n,end:parseInt(c.apply(void 0,r),16)}}return{type:30,start:n,end:n}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ne)return{type:22,value:""};var t=this.peekCodePoint(0);if(39===t||34===t){var A=this.consumeStringToken(this.consumeCodePoint());return 0===A.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ne||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:A.value}):(this.consumeBadUrlRemnants(),_e)}for(;;){var n=this.consumeCodePoint();if(n===ne||41===n)return{type:22,value:c.apply(void 0,e)};if(se(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ne||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:c.apply(void 0,e)}):(this.consumeBadUrlRemnants(),_e);if(34===n||39===n||40===n||ce(n))return this.consumeBadUrlRemnants(),_e;if(92===n){if(!le(n,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),_e;e.push(this.consumeEscapedCodePoint())}else e.push(n)}},e.prototype.consumeWhiteSpace=function(){for(;se(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(41===e||e===ne)return;le(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var t="";e>0;){var A=Math.min(5e4,e);t+=c.apply(void 0,this._value.splice(0,A)),e-=A}return this._value.shift(),t},e.prototype.consumeStringToken=function(e){for(var t="",A=0;;){var n=this._value[A];if(n===ne||void 0===n||n===e)return{type:0,value:t+=this.consumeStringSlice(A)};if(10===n)return this._value.splice(0,A),Ee;if(92===n){var r=this._value[A+1];r!==ne&&void 0!==r&&(10===r?(t+=this.consumeStringSlice(A),A=-1,this._value.shift()):le(n,r)&&(t+=this.consumeStringSlice(A),t+=c(this.consumeEscapedCodePoint()),A=-1))}A++}},e.prototype.consumeNumber=function(){var e=[],t=4,A=this.peekCodePoint(0);for(A!==Ae&&A!==te||e.push(this.consumeCodePoint());re(this.peekCodePoint(0));)e.push(this.consumeCodePoint());A=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(46===A&&re(n))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=8;re(this.peekCodePoint(0));)e.push(this.consumeCodePoint());A=this.peekCodePoint(0),n=this.peekCodePoint(1);var r=this.peekCodePoint(2);if((69===A||101===A)&&((n===Ae||n===te)&&re(r)||re(n)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=8;re(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[de(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],A=e[1],n=this.peekCodePoint(0),r=this.peekCodePoint(1),i=this.peekCodePoint(2);return he(n,r,i)?{type:15,number:t,flags:A,unit:this.consumeName()}:37===n?(this.consumeCodePoint(),{type:16,number:t,flags:A}):{type:17,number:t,flags:A}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(ie(e)){for(var t=c(e);ie(this.peekCodePoint(0))&&t.length<6;)t+=c(this.consumeCodePoint());se(this.peekCodePoint(0))&&this.consumeCodePoint();var A=parseInt(t,16);return 0===A||function(e){return e>=55296&&e<=57343}(A)||A>1114111?65533:A}return e===ne?65533:e},e.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(ae(t))e+=c(t);else{if(!le(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=c(this.consumeEscapedCodePoint())}}},e}(),De=function(){function e(e){this._tokens=e}return e.create=function(t){var A=new Ie;return A.write(t),new e(A.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();31===e.type;)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},A=this.consumeToken();;){if(32===A.type||ze(A,e))return t;this.reconsumeToken(A),t.values.push(this.consumeComponentValue()),A=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var A=this.consumeToken();if(32===A.type||3===A.type)return t;this.reconsumeToken(A),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return void 0===e?He:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),Re=function(e){return 15===e.type},Pe=function(e){return 17===e.type},Ne=function(e){return 20===e.type},Oe=function(e){return 0===e.type},Ge=function(e,t){return Ne(e)&&e.value===t},Ve=function(e){return 31!==e.type},ke=function(e){return 31!==e.type&&4!==e.type},Ke=function(e){var t=[],A=[];return e.forEach((function(e){if(4===e.type){if(0===A.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(A),void(A=[])}31!==e.type&&A.push(e)})),A.length&&t.push(A),t},ze=function(e,t){return 11===t&&12===e.type||28===t&&29===e.type||2===t&&3===e.type},We=function(e){return 17===e.type||15===e.type},Xe=function(e){return 16===e.type||We(e)},Ye=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Je={type:17,number:0,flags:4},je={type:16,number:50,flags:4},Ze={type:16,number:100,flags:4},qe=function(e,t,A){var n=e[0],r=e[1];return[$e(n,t),$e(void 0!==r?r:n,A)]},$e=function(e,t){if(16===e.type)return e.number/100*t;if(Re(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},et="grad",tt="turn",At=function(e,t){if(15===t.type)switch(t.unit){case"deg":return Math.PI*t.number/180;case et:return Math.PI/200*t.number;case"rad":return t.number;case tt:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")},nt=function(e){return 15===e.type&&("deg"===e.unit||e.unit===et||"rad"===e.unit||e.unit===tt)},rt=function(e){switch(e.filter(Ne).map((function(e){return e.value})).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Je,Je];case"to top":case"bottom":return it(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Je,Ze];case"to right":case"left":return it(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Ze,Ze];case"to bottom":case"top":return it(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Ze,Je];case"to left":case"right":return it(270)}return 0},it=function(e){return Math.PI*e/180},st=function(e,t){if(18===t.type){var A=pt[t.name];if(void 0===A)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return A(e,t.values)}if(5===t.type){if(3===t.value.length){var n=t.value.substring(0,1),r=t.value.substring(1,2),i=t.value.substring(2,3);return ct(parseInt(n+n,16),parseInt(r+r,16),parseInt(i+i,16),1)}if(4===t.value.length){n=t.value.substring(0,1),r=t.value.substring(1,2),i=t.value.substring(2,3);var s=t.value.substring(3,4);return ct(parseInt(n+n,16),parseInt(r+r,16),parseInt(i+i,16),parseInt(s+s,16)/255)}if(6===t.value.length)return n=t.value.substring(0,2),r=t.value.substring(2,4),i=t.value.substring(4,6),ct(parseInt(n,16),parseInt(r,16),parseInt(i,16),1);if(8===t.value.length)return n=t.value.substring(0,2),r=t.value.substring(2,4),i=t.value.substring(4,6),s=t.value.substring(6,8),ct(parseInt(n,16),parseInt(r,16),parseInt(i,16),parseInt(s,16)/255)}if(20===t.type){var o=ft[t.value.toUpperCase()];if(void 0!==o)return o}return ft.TRANSPARENT},ot=function(e){return 0==(255&e)},at=function(e){var t=255&e,A=255&e>>8,n=255&e>>16,r=255&e>>24;return t<255?"rgba("+r+","+n+","+A+","+t/255+")":"rgb("+r+","+n+","+A+")"},ct=function(e,t,A,n){return(e<<24|t<<16|A<<8|Math.round(255*n)<<0)>>>0},lt=function(e,t){if(17===e.type)return e.number;if(16===e.type){var A=3===t?1:255;return 3===t?e.number/100*A:Math.round(e.number/100*A)}return 0},ht=function(e,t){var A=t.filter(ke);if(3===A.length){var n=A.map(lt),r=n[0],i=n[1],s=n[2];return ct(r,i,s,1)}if(4===A.length){var o=A.map(lt),a=(r=o[0],i=o[1],s=o[2],o[3]);return ct(r,i,s,a)}return 0};function ut(e,t,A){return A<0&&(A+=1),A>=1&&(A-=1),A<1/6?(t-e)*A*6+e:A<.5?t:A<2/3?6*(t-e)*(2/3-A)+e:e}var dt=function(e,t){var A=t.filter(ke),n=A[0],r=A[1],i=A[2],s=A[3],o=(17===n.type?it(n.number):At(e,n))/(2*Math.PI),a=Xe(r)?r.number/100:0,c=Xe(i)?i.number/100:0,l=void 0!==s&&Xe(s)?$e(s,1):1;if(0===a)return ct(255*c,255*c,255*c,1);var h=c<=.5?c*(a+1):c+a-c*a,u=2*c-h,d=ut(u,h,o+1/3),p=ut(u,h,o),g=ut(u,h,o-1/3);return ct(255*d,255*p,255*g,l)},pt={hsl:dt,hsla:dt,rgb:ht,rgba:ht},gt=function(e,t){return st(e,De.create(t).parseComponentValue())},ft={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},mt={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(Ne(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},Bt={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},wt=function(e,t){var A=st(e,t[0]),n=t[1];return n&&Xe(n)?{color:A,stop:n}:{color:A,stop:null}},vt=function(e,t){var A=e[0],n=e[e.length-1];null===A.stop&&(A.stop=Je),null===n.stop&&(n.stop=Ze);for(var r=[],i=0,s=0;s<e.length;s++){var o=e[s].stop;if(null!==o){var a=$e(o,t);a>i?r.push(a):r.push(i),i=a}else r.push(null)}var c=null;for(s=0;s<r.length;s++){var l=r[s];if(null===l)null===c&&(c=s);else if(null!==c){for(var h=s-c,u=(l-r[c-1])/(h+1),d=1;d<=h;d++)r[c+d-1]=u*d;c=null}}return e.map((function(e,A){return{color:e.color,stop:Math.max(Math.min(1,r[A]/t),0)}}))},yt=function(e,t,A){var n="number"==typeof e?e:function(e,t,A){var n=t/2,r=A/2,i=$e(e[0],t)-n,s=r-$e(e[1],A);return(Math.atan2(s,i)+2*Math.PI)%(2*Math.PI)}(e,t,A),r=Math.abs(t*Math.sin(n))+Math.abs(A*Math.cos(n)),i=t/2,s=A/2,o=r/2,a=Math.sin(n-Math.PI/2)*o,c=Math.cos(n-Math.PI/2)*o;return[r,i-c,i+c,s-a,s+a]},xt=function(e,t){return Math.sqrt(e*e+t*t)},Ct=function(e,t,A,n,r){return[[0,0],[0,t],[e,0],[e,t]].reduce((function(e,t){var i=t[0],s=t[1],o=xt(A-i,n-s);return(r?o<e.optimumDistance:o>e.optimumDistance)?{optimumCorner:t,optimumDistance:o}:e}),{optimumDistance:r?1/0:-1/0,optimumCorner:null}).optimumCorner},bt=function(e,t){var A=it(180),n=[];return Ke(t).forEach((function(t,r){if(0===r){var i=t[0];if(20===i.type&&-1!==["top","left","right","bottom"].indexOf(i.value))return void(A=rt(t));if(nt(i))return void(A=(At(e,i)+it(270))%it(360))}var s=wt(e,t);n.push(s)})),{angle:A,stops:n,type:1}},_t="closest-side",Et="farthest-side",Ut="closest-corner",Ft="farthest-corner",Qt="circle",Mt="ellipse",St="cover",Tt="contain",Lt=function(e,t){var A=0,n=3,r=[],i=[];return Ke(t).forEach((function(t,s){var o=!0;if(0===s?o=t.reduce((function(e,t){if(Ne(t))switch(t.value){case"center":return i.push(je),!1;case"top":case"left":return i.push(Je),!1;case"right":case"bottom":return i.push(Ze),!1}else if(Xe(t)||We(t))return i.push(t),!1;return e}),o):1===s&&(o=t.reduce((function(e,t){if(Ne(t))switch(t.value){case Qt:return A=0,!1;case Mt:return A=1,!1;case Tt:case _t:return n=0,!1;case Et:return n=1,!1;case Ut:return n=2,!1;case St:case Ft:return n=3,!1}else if(We(t)||Xe(t))return Array.isArray(n)||(n=[]),n.push(t),!1;return e}),o)),o){var a=wt(e,t);r.push(a)}})),{size:n,shape:A,stops:r,position:i,type:2}},Ht=function(e,t){if(22===t.type){var A={url:t.value,type:0};return e.cache.addImage(t.value),A}if(18===t.type){var n=Dt[t.name];if(void 0===n)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)};var It,Dt={"linear-gradient":function(e,t){var A=it(180),n=[];return Ke(t).forEach((function(t,r){if(0===r){var i=t[0];if(20===i.type&&"to"===i.value)return void(A=rt(t));if(nt(i))return void(A=At(e,i))}var s=wt(e,t);n.push(s)})),{angle:A,stops:n,type:1}},"-moz-linear-gradient":bt,"-ms-linear-gradient":bt,"-o-linear-gradient":bt,"-webkit-linear-gradient":bt,"radial-gradient":function(e,t){var A=0,n=3,r=[],i=[];return Ke(t).forEach((function(t,s){var o=!0;if(0===s){var a=!1;o=t.reduce((function(e,t){if(a)if(Ne(t))switch(t.value){case"center":return i.push(je),e;case"top":case"left":return i.push(Je),e;case"right":case"bottom":return i.push(Ze),e}else(Xe(t)||We(t))&&i.push(t);else if(Ne(t))switch(t.value){case Qt:return A=0,!1;case Mt:return A=1,!1;case"at":return a=!0,!1;case _t:return n=0,!1;case St:case Et:return n=1,!1;case Tt:case Ut:return n=2,!1;case Ft:return n=3,!1}else if(We(t)||Xe(t))return Array.isArray(n)||(n=[]),n.push(t),!1;return e}),o)}if(o){var c=wt(e,t);r.push(c)}})),{size:n,shape:A,stops:r,position:i,type:2}},"-moz-radial-gradient":Lt,"-ms-radial-gradient":Lt,"-o-radial-gradient":Lt,"-webkit-radial-gradient":Lt,"-webkit-gradient":function(e,t){var A=it(180),n=[],r=1;return Ke(t).forEach((function(t,A){var i=t[0];if(0===A){if(Ne(i)&&"linear"===i.value)return void(r=1);if(Ne(i)&&"radial"===i.value)return void(r=2)}if(18===i.type)if("from"===i.name){var s=st(e,i.values[0]);n.push({stop:Je,color:s})}else if("to"===i.name)s=st(e,i.values[0]),n.push({stop:Ze,color:s});else if("color-stop"===i.name){var o=i.values.filter(ke);if(2===o.length){s=st(e,o[1]);var a=o[0];Pe(a)&&n.push({stop:{type:16,number:100*a.number,flags:a.flags},color:s})}}})),1===r?{angle:(A+it(180))%it(360),stops:n,type:r}:{size:3,shape:0,stops:n,position:[],type:r}}},Rt={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var A=t[0];return 20===A.type&&"none"===A.value?[]:t.filter((function(e){return ke(e)&&function(e){return!(20===e.type&&"none"===e.value||18===e.type&&!Dt[e.name])}(e)})).map((function(t){return Ht(e,t)}))}},Pt={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(Ne(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},Nt={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Ke(t).map((function(e){return e.filter(Xe)})).map(Ye)}},Ot={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Ke(t).map((function(e){return e.filter(Ne).map((function(e){return e.value})).join(" ")})).map(Gt)}},Gt=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}};!function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"}(It||(It={}));var Vt,kt={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Ke(t).map((function(e){return e.filter(Kt)}))}},Kt=function(e){return Ne(e)||Xe(e)},zt=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Wt=zt("top"),Xt=zt("right"),Yt=zt("bottom"),Jt=zt("left"),jt=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return Ye(t.filter(Xe))}}},Zt=jt("top-left"),qt=jt("top-right"),$t=jt("bottom-right"),eA=jt("bottom-left"),tA=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},AA=tA("top"),nA=tA("right"),rA=tA("bottom"),iA=tA("left"),sA=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Re(t)?t.number:0}}},oA=sA("top"),aA=sA("right"),cA=sA("bottom"),lA=sA("left"),hA={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},uA={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},dA={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Ne).reduce((function(e,t){return e|pA(t.value)}),0)}},pA=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},gA={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},fA={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}};!function(e){e.NORMAL="normal",e.STRICT="strict"}(Vt||(Vt={}));var mA,BA={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return Vt.STRICT;case"normal":default:return Vt.NORMAL}}},wA={name:"line-height",initialValue:"normal",prefix:!1,type:4},vA=function(e,t){return Ne(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:Xe(e)?$e(e,t):t},yA={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:Ht(e,t)}},xA={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},CA={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},bA=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},_A=bA("top"),EA=bA("right"),UA=bA("bottom"),FA=bA("left"),QA={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Ne).map((function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}}))}},MA={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},SA=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},TA=SA("top"),LA=SA("right"),HA=SA("bottom"),IA=SA("left"),DA={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},RA={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},PA={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&Ge(t[0],"none")?[]:Ke(t).map((function(t){for(var A={color:ft.TRANSPARENT,offsetX:Je,offsetY:Je,blur:Je},n=0,r=0;r<t.length;r++){var i=t[r];We(i)?(0===n?A.offsetX=i:1===n?A.offsetY=i:A.blur=i,n++):A.color=st(e,i)}return A}))}},NA={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},OA={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var A=GA[t.name];if(void 0===A)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return A(t.values)}return null}},GA={matrix:function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number}));return 6===t.length?t:null},matrix3d:function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number})),A=t[0],n=t[1];t[2],t[3];var r=t[4],i=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var s=t[12],o=t[13];return t[14],t[15],16===t.length?[A,n,r,i,s,o]:null}},VA={type:16,number:50,flags:4},kA=[VA,VA],KA={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var A=t.filter(Xe);return 2!==A.length?kA:[A[0],A[1]]}},zA={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}};!function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"}(mA||(mA={}));for(var WA={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return mA.BREAK_ALL;case"keep-all":return mA.KEEP_ALL;case"normal":default:return mA.NORMAL}}},XA={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(Pe(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},YA={name:"time",parse:function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},JA={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return Pe(t)?t.number:1}},jA={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ZA={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Ne).map((function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(e){return 0!==e}))}},qA={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var A=[],n=[];return t.forEach((function(e){switch(e.type){case 20:case 0:A.push(e.value);break;case 17:A.push(e.number.toString());break;case 4:n.push(A.join(" ")),A.length=0}})),A.length&&n.push(A.join(" ")),n.map((function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"}))}},$A={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},en={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(Pe(t))return t.number;if(Ne(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},tn={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Ne).map((function(e){return e.value}))}},An={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},nn=function(e,t){return 0!=(e&t)},rn={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var A=t[0];return 20===A.type&&"none"===A.value?[]:t}},sn={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var A=t[0];if(20===A.type&&"none"===A.value)return null;for(var n=[],r=t.filter(Ve),i=0;i<r.length;i++){var s=r[i],o=r[i+1];if(20===s.type){var a=o&&Pe(o)?o.number:1;n.push({counter:s.value,increment:a})}}return n}},on={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var A=[],n=t.filter(Ve),r=0;r<n.length;r++){var i=n[r],s=n[r+1];if(Ne(i)&&"none"!==i.value){var o=s&&Pe(s)?s.number:0;A.push({counter:i.value,reset:o})}}return A}},an={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(Re).map((function(t){return YA.parse(e,t)}))}},cn={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var A=t[0];if(20===A.type&&"none"===A.value)return null;var n=[],r=t.filter(Oe);if(r.length%2!=0)return null;for(var i=0;i<r.length;i+=2){var s=r[i].value,o=r[i+1].value;n.push({open:s,close:o})}return n}},ln=function(e,t,A){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?A?n.open:n.close:""},hn={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&Ge(t[0],"none")?[]:Ke(t).map((function(t){for(var A={color:255,offsetX:Je,offsetY:Je,blur:Je,spread:Je,inset:!1},n=0,r=0;r<t.length;r++){var i=t[r];Ge(i,"inset")?A.inset=!0:We(i)?(0===n?A.offsetX=i:1===n?A.offsetY=i:2===n?A.blur=i:A.spread=i,n++):A.color=st(e,i)}return A}))}},un={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var A=[];return t.filter(Ne).forEach((function(e){switch(e.value){case"stroke":A.push(1);break;case"fill":A.push(0);break;case"markers":A.push(2)}})),[0,1,2].forEach((function(e){-1===A.indexOf(e)&&A.push(e)})),A}},dn={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},pn={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Re(t)?t.number:0}},gn=function(){function e(e,t){var A,n;this.animationDuration=Bn(e,an,t.animationDuration),this.backgroundClip=Bn(e,mt,t.backgroundClip),this.backgroundColor=Bn(e,Bt,t.backgroundColor),this.backgroundImage=Bn(e,Rt,t.backgroundImage),this.backgroundOrigin=Bn(e,Pt,t.backgroundOrigin),this.backgroundPosition=Bn(e,Nt,t.backgroundPosition),this.backgroundRepeat=Bn(e,Ot,t.backgroundRepeat),this.backgroundSize=Bn(e,kt,t.backgroundSize),this.borderTopColor=Bn(e,Wt,t.borderTopColor),this.borderRightColor=Bn(e,Xt,t.borderRightColor),this.borderBottomColor=Bn(e,Yt,t.borderBottomColor),this.borderLeftColor=Bn(e,Jt,t.borderLeftColor),this.borderTopLeftRadius=Bn(e,Zt,t.borderTopLeftRadius),this.borderTopRightRadius=Bn(e,qt,t.borderTopRightRadius),this.borderBottomRightRadius=Bn(e,$t,t.borderBottomRightRadius),this.borderBottomLeftRadius=Bn(e,eA,t.borderBottomLeftRadius),this.borderTopStyle=Bn(e,AA,t.borderTopStyle),this.borderRightStyle=Bn(e,nA,t.borderRightStyle),this.borderBottomStyle=Bn(e,rA,t.borderBottomStyle),this.borderLeftStyle=Bn(e,iA,t.borderLeftStyle),this.borderTopWidth=Bn(e,oA,t.borderTopWidth),this.borderRightWidth=Bn(e,aA,t.borderRightWidth),this.borderBottomWidth=Bn(e,cA,t.borderBottomWidth),this.borderLeftWidth=Bn(e,lA,t.borderLeftWidth),this.boxShadow=Bn(e,hn,t.boxShadow),this.color=Bn(e,hA,t.color),this.direction=Bn(e,uA,t.direction),this.display=Bn(e,dA,t.display),this.float=Bn(e,gA,t.cssFloat),this.fontFamily=Bn(e,qA,t.fontFamily),this.fontSize=Bn(e,$A,t.fontSize),this.fontStyle=Bn(e,An,t.fontStyle),this.fontVariant=Bn(e,tn,t.fontVariant),this.fontWeight=Bn(e,en,t.fontWeight),this.letterSpacing=Bn(e,fA,t.letterSpacing),this.lineBreak=Bn(e,BA,t.lineBreak),this.lineHeight=Bn(e,wA,t.lineHeight),this.listStyleImage=Bn(e,yA,t.listStyleImage),this.listStylePosition=Bn(e,xA,t.listStylePosition),this.listStyleType=Bn(e,CA,t.listStyleType),this.marginTop=Bn(e,_A,t.marginTop),this.marginRight=Bn(e,EA,t.marginRight),this.marginBottom=Bn(e,UA,t.marginBottom),this.marginLeft=Bn(e,FA,t.marginLeft),this.opacity=Bn(e,JA,t.opacity);var r=Bn(e,QA,t.overflow);this.overflowX=r[0],this.overflowY=r[r.length>1?1:0],this.overflowWrap=Bn(e,MA,t.overflowWrap),this.paddingTop=Bn(e,TA,t.paddingTop),this.paddingRight=Bn(e,LA,t.paddingRight),this.paddingBottom=Bn(e,HA,t.paddingBottom),this.paddingLeft=Bn(e,IA,t.paddingLeft),this.paintOrder=Bn(e,un,t.paintOrder),this.position=Bn(e,RA,t.position),this.textAlign=Bn(e,DA,t.textAlign),this.textDecorationColor=Bn(e,jA,null!==(A=t.textDecorationColor)&&void 0!==A?A:t.color),this.textDecorationLine=Bn(e,ZA,null!==(n=t.textDecorationLine)&&void 0!==n?n:t.textDecoration),this.textShadow=Bn(e,PA,t.textShadow),this.textTransform=Bn(e,NA,t.textTransform),this.transform=Bn(e,OA,t.transform),this.transformOrigin=Bn(e,KA,t.transformOrigin),this.visibility=Bn(e,zA,t.visibility),this.webkitTextStrokeColor=Bn(e,dn,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=Bn(e,pn,t.webkitTextStrokeWidth),this.wordBreak=Bn(e,WA,t.wordBreak),this.zIndex=Bn(e,XA,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return ot(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return nn(this.display,4)||nn(this.display,33554432)||nn(this.display,268435456)||nn(this.display,536870912)||nn(this.display,67108864)||nn(this.display,134217728)},e}(),fn=function(e,t){this.content=Bn(e,rn,t.content),this.quotes=Bn(e,cn,t.quotes)},mn=function(e,t){this.counterIncrement=Bn(e,sn,t.counterIncrement),this.counterReset=Bn(e,on,t.counterReset)},Bn=function(e,t,A){var n=new Ie,r=null!=A?A.toString():t.initialValue;n.write(r);var i=new De(n.read());switch(t.type){case 2:var s=i.parseComponentValue();return t.parse(e,Ne(s)?s.value:t.initialValue);case 0:return t.parse(e,i.parseComponentValue());case 1:return t.parse(e,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(t.format){case"angle":return At(e,i.parseComponentValue());case"color":return st(e,i.parseComponentValue());case"image":return Ht(e,i.parseComponentValue());case"length":var o=i.parseComponentValue();return We(o)?o:Je;case"length-percentage":var a=i.parseComponentValue();return Xe(a)?a:Je;case"time":return YA.parse(e,i.parseComponentValue())}}},wn=function(e,t){var A=function(e){switch(e.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(e);return 1===A||t===A},vn=function(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,wn(t,3),this.styles=new gn(e,window.getComputedStyle(t,null)),br(t)&&(this.styles.animationDuration.some((function(e){return e>0}))&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=o(this.context,t),wn(t,4)&&(this.flags|=16)},yn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xn="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Cn=0;Cn<yn.length;Cn++)xn[yn.charCodeAt(Cn)]=Cn;for(var bn=function(e,t,A){return e.slice?e.slice(t,A):new Uint16Array(Array.prototype.slice.call(e,t,A))},_n=function(){function e(e,t,A,n,r,i){this.initialValue=e,this.errorValue=t,this.highStart=A,this.highValueIndex=n,this.index=r,this.data=i}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>5])<<2)+(31&e),this.data[t];if(e<=65535)return t=((t=this.index[2048+(e-55296>>5)])<<2)+(31&e),this.data[t];if(e<this.highStart)return t=2080+(e>>11),t=this.index[t],t+=e>>5&63,t=((t=this.index[t])<<2)+(31&e),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),En="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Un="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Fn=0;Fn<En.length;Fn++)Un[En.charCodeAt(Fn)]=Fn;var Qn,Mn=8,Sn=9,Tn=11,Ln=12,Hn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var A=e.length;if(!A)return"";for(var n=[],r=-1,i="";++r<A;){var s=e[r];s<=65535?n.push(s):(s-=65536,n.push(55296+(s>>10),s%1024+56320)),(r+1===A||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},In=function(e,t){var A,n,r,i=function(e){var t,A,n,r,i,s=.75*e.length,o=e.length,a=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(s):new Array(s),l=Array.isArray(c)?c:new Uint8Array(c);for(t=0;t<o;t+=4)A=xn[e.charCodeAt(t)],n=xn[e.charCodeAt(t+1)],r=xn[e.charCodeAt(t+2)],i=xn[e.charCodeAt(t+3)],l[a++]=A<<2|n>>4,l[a++]=(15&n)<<4|r>>2,l[a++]=(3&r)<<6|63&i;return c}(e),s=Array.isArray(i)?function(e){for(var t=e.length,A=[],n=0;n<t;n+=4)A.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return A}(i):new Uint32Array(i),o=Array.isArray(i)?function(e){for(var t=e.length,A=[],n=0;n<t;n+=2)A.push(e[n+1]<<8|e[n]);return A}(i):new Uint16Array(i),a=bn(o,12,s[4]/2),c=2===s[5]?bn(o,(24+s[4])/2):(A=s,n=Math.ceil((24+s[4])/4),A.slice?A.slice(n,r):new Uint32Array(Array.prototype.slice.call(A,n,r)));return new _n(s[0],s[1],s[2],s[3],a,c)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),Dn="ร",Rn=function(e){return In.get(e)},Pn=function(e,t,A){var n=A-2,r=t[n],i=t[A-1],s=t[A];if(2===i&&3===s)return Dn;if(2===i||3===i||4===i)return"รท";if(2===s||3===s||4===s)return"รท";if(i===Mn&&-1!==[Mn,Sn,Tn,Ln].indexOf(s))return Dn;if(!(i!==Tn&&i!==Sn||s!==Sn&&10!==s))return Dn;if((i===Ln||10===i)&&10===s)return Dn;if(13===s||5===s)return Dn;if(7===s)return Dn;if(1===i)return Dn;if(13===i&&14===s){for(;5===r;)r=t[--n];if(14===r)return Dn}if(15===i&&15===s){for(var o=0;15===r;)o++,r=t[--n];if(o%2==0)return Dn}return"รท"},Nn=function(e){var t=function(e){for(var t=[],A=0,n=e.length;A<n;){var r=e.charCodeAt(A++);if(r>=55296&&r<=56319&&A<n){var i=e.charCodeAt(A++);56320==(64512&i)?t.push(((1023&r)<<10)+(1023&i)+65536):(t.push(r),A--)}else t.push(r)}return t}(e),A=t.length,n=0,r=0,i=t.map(Rn);return{next:function(){if(n>=A)return{done:!0,value:null};for(var e=Dn;n<A&&(e=Pn(0,i,++n))===Dn;);if(e!==Dn||n===A){var s=Hn.apply(null,t.slice(r,n));return r=n,{value:s,done:!1}}return{done:!0,value:null}}}},On=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},Gn=function(e,t,A,n,r){var i="http://www.w3.org/2000/svg",s=document.createElementNS(i,"svg"),o=document.createElementNS(i,"foreignObject");return s.setAttributeNS(null,"width",e.toString()),s.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",A.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(o),o.appendChild(r),s},Vn=function(e){return new Promise((function(t,A){var n=new Image;n.onload=function(){return t(n)},n.onerror=A,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},kn={get SUPPORT_RANGE_BOUNDS(){var e=function(e){if(e.createRange){var t=e.createRange();if(t.getBoundingClientRect){var A=e.createElement("boundtest");A.style.height="123px",A.style.display="block",e.body.appendChild(A),t.selectNode(A);var n=t.getBoundingClientRect(),r=Math.round(n.height);if(e.body.removeChild(A),123===r)return!0}}return!1}(document);return Object.defineProperty(kn,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=kn.SUPPORT_RANGE_BOUNDS&&function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var A=e.createRange();t.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var n=t.firstChild,r=a(n.data).map((function(e){return c(e)})),i=0,s={},o=r.every((function(e,t){A.setStart(n,i),A.setEnd(n,i+e.length);var r=A.getBoundingClientRect();i+=e.length;var o=r.x>s.x||r.y>s.y;return s=r,0===t||o}));return e.body.removeChild(t),o}(document);return Object.defineProperty(kn,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=function(e){var t=new Image,A=e.createElement("canvas"),n=A.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),A.toDataURL()}catch(e){return!1}return!0}(document);return Object.defineProperty(kn,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"==typeof Array.from&&"function"==typeof window.fetch?function(e){var t=e.createElement("canvas"),A=100;t.width=A,t.height=A;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,A,A);var r=new Image,i=t.toDataURL();r.src=i;var s=Gn(A,A,0,0,r);return n.fillStyle="red",n.fillRect(0,0,A,A),Vn(s).then((function(t){n.drawImage(t,0,0);var r=n.getImageData(0,0,A,A).data;n.fillStyle="red",n.fillRect(0,0,A,A);var s=e.createElement("div");return s.style.backgroundImage="url("+i+")",s.style.height="100px",On(r)?Vn(Gn(A,A,0,0,s)):Promise.reject(!1)})).then((function(e){return n.drawImage(e,0,0),On(n.getImageData(0,0,A,A).data)})).catch((function(){return!1}))}(document):Promise.resolve(!1);return Object.defineProperty(kn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=void 0!==(new Image).crossOrigin;return Object.defineProperty(kn,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(kn,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(kn,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(kn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Kn=function(e,t){this.text=e,this.bounds=t},zn=function(e,t){var A=t.ownerDocument;if(A){var n=A.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var r=t.parentNode;if(r){r.replaceChild(n,t);var i=o(e,n);return n.firstChild&&r.replaceChild(n.firstChild,n),i}}return s.EMPTY},Wn=function(e,t,A){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var r=n.createRange();return r.setStart(e,t),r.setEnd(e,t+A),r},Xn=function(e){if(kn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map((function(e){return e.segment}))}return function(e){for(var t,A=Nn(e),n=[];!(t=A.next()).done;)t.value&&n.push(t.value.slice());return n}(e)},Yn=function(e,t){return 0!==t.letterSpacing?Xn(e):function(e,t){if(kn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var A=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(A.segment(e)).map((function(e){return e.segment}))}return jn(e,t)}(e,t)},Jn=[32,160,4961,65792,65793,4153,4241],jn=function(e,t){for(var A,n=function(e,t){var A=a(e),n=$(A,t),r=n[0],i=n[1],s=n[2],o=A.length,c=0,l=0;return{next:function(){if(l>=o)return{done:!0,value:null};for(var e=O;l<o&&(e=q(A,i,r,++l,s))===O;);if(e!==O||l===o){var t=new ee(A,e,c,l);return c=l,{value:t,done:!1}}return{done:!0,value:null}}}}(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),r=[],i=function(){if(A.value){var e=A.value.slice(),t=a(e),n="";t.forEach((function(e){-1===Jn.indexOf(e)?n+=c(e):(n.length&&r.push(n),r.push(c(e)),n="")})),n.length&&r.push(n)}};!(A=n.next()).done;)i();return r},Zn=function(e,t,A){this.text=qn(t.data,A.textTransform),this.textBounds=function(e,t,A,n){var r=Yn(t,A),i=[],o=0;return r.forEach((function(t){if(A.textDecorationLine.length||t.trim().length>0)if(kn.SUPPORT_RANGE_BOUNDS){var r=Wn(n,o,t.length).getClientRects();if(r.length>1){var a=Xn(t),c=0;a.forEach((function(t){i.push(new Kn(t,s.fromDOMRectList(e,Wn(n,c+o,t.length).getClientRects()))),c+=t.length}))}else i.push(new Kn(t,s.fromDOMRectList(e,r)))}else{var l=n.splitText(t.length);i.push(new Kn(t,zn(e,n))),n=l}else kn.SUPPORT_RANGE_BOUNDS||(n=n.splitText(t.length));o+=t.length})),i}(e,this.text,A,t)},qn=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace($n,er);case 2:return e.toUpperCase();default:return e}},$n=/(^|\s|:|-|\(|\))([a-z])/g,er=function(e,t,A){return e.length>0?t+A.toUpperCase():e},tr=function(e){function A(t,A){var n=e.call(this,t,A)||this;return n.src=A.currentSrc||A.src,n.intrinsicWidth=A.naturalWidth,n.intrinsicHeight=A.naturalHeight,n.context.cache.addImage(n.src),n}return t(A,e),A}(vn),Ar=function(e){function A(t,A){var n=e.call(this,t,A)||this;return n.canvas=A,n.intrinsicWidth=A.width,n.intrinsicHeight=A.height,n}return t(A,e),A}(vn),nr=function(e){function A(t,A){var n=e.call(this,t,A)||this,r=new XMLSerializer,i=o(t,A);return A.setAttribute("width",i.width+"px"),A.setAttribute("height",i.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(r.serializeToString(A)),n.intrinsicWidth=A.width.baseVal.value,n.intrinsicHeight=A.height.baseVal.value,n.context.cache.addImage(n.svg),n}return t(A,e),A}(vn),rr=function(e){function A(t,A){var n=e.call(this,t,A)||this;return n.value=A.value,n}return t(A,e),A}(vn),ir=function(e){function A(t,A){var n=e.call(this,t,A)||this;return n.start=A.start,n.reversed="boolean"==typeof A.reversed&&!0===A.reversed,n}return t(A,e),A}(vn),sr=[{type:15,flags:0,unit:"px",number:3}],or=[{type:16,flags:0,number:50}],ar="checkbox",cr="radio",lr="password",hr=707406591,ur=function(e){function A(t,A){var n,r,i,o=e.call(this,t,A)||this;switch(o.type=A.type.toLowerCase(),o.checked=A.checked,o.value=0===(i=(r=A).type===lr?new Array(r.value.length+1).join("โข"):r.value).length?r.placeholder||"":i,o.type!==ar&&o.type!==cr||(o.styles.backgroundColor=3739148031,o.styles.borderTopColor=o.styles.borderRightColor=o.styles.borderBottomColor=o.styles.borderLeftColor=2779096575,o.styles.borderTopWidth=o.styles.borderRightWidth=o.styles.borderBottomWidth=o.styles.borderLeftWidth=1,o.styles.borderTopStyle=o.styles.borderRightStyle=o.styles.borderBottomStyle=o.styles.borderLeftStyle=1,o.styles.backgroundClip=[0],o.styles.backgroundOrigin=[0],o.bounds=(n=o.bounds).width>n.height?new s(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new s(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n),o.type){case ar:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=sr;break;case cr:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=or}return o}return t(A,e),A}(vn),dr=function(e){function A(t,A){var n=e.call(this,t,A)||this,r=A.options[A.selectedIndex||0];return n.value=r&&r.text||"",n}return t(A,e),A}(vn),pr=function(e){function A(t,A){var n=e.call(this,t,A)||this;return n.value=A.value,n}return t(A,e),A}(vn),gr=function(e){function A(t,A){var n=e.call(this,t,A)||this;n.src=A.src,n.width=parseInt(A.width,10)||0,n.height=parseInt(A.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(A.contentWindow&&A.contentWindow.document&&A.contentWindow.document.documentElement){n.tree=wr(t,A.contentWindow.document.documentElement);var r=A.contentWindow.document.documentElement?gt(t,getComputedStyle(A.contentWindow.document.documentElement).backgroundColor):ft.TRANSPARENT,i=A.contentWindow.document.body?gt(t,getComputedStyle(A.contentWindow.document.body).backgroundColor):ft.TRANSPARENT;n.backgroundColor=ot(r)?ot(i)?n.styles.backgroundColor:i:r}}catch(e){}return n}return t(A,e),A}(vn),fr=["OL","UL","MENU"],mr=function(e,t,A,n){for(var r=t.firstChild,i=void 0;r;r=i)if(i=r.nextSibling,xr(r)&&r.data.trim().length>0)A.textNodes.push(new Zn(e,r,A.styles));else if(Cr(r))if(Rr(r)&&r.assignedNodes)r.assignedNodes().forEach((function(t){return mr(e,t,A,n)}));else{var s=Br(e,r);s.styles.isVisible()&&(vr(r,s,n)?s.flags|=4:yr(s.styles)&&(s.flags|=2),-1!==fr.indexOf(r.tagName)&&(s.flags|=8),A.elements.push(s),r.slot,r.shadowRoot?mr(e,r.shadowRoot,s,n):Ir(r)||Qr(r)||Dr(r)||mr(e,r,s,n))}},Br=function(e,t){return Tr(t)?new tr(e,t):Sr(t)?new Ar(e,t):Qr(t)?new nr(e,t):Er(t)?new rr(e,t):Ur(t)?new ir(e,t):Fr(t)?new ur(e,t):Dr(t)?new dr(e,t):Ir(t)?new pr(e,t):Lr(t)?new gr(e,t):new vn(e,t)},wr=function(e,t){var A=Br(e,t);return A.flags|=4,mr(e,t,A,A),A},vr=function(e,t,A){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||Mr(e)&&A.styles.isTransparent()},yr=function(e){return e.isPositioned()||e.isFloating()},xr=function(e){return e.nodeType===Node.TEXT_NODE},Cr=function(e){return e.nodeType===Node.ELEMENT_NODE},br=function(e){return Cr(e)&&void 0!==e.style&&!_r(e)},_r=function(e){return"object"==typeof e.className},Er=function(e){return"LI"===e.tagName},Ur=function(e){return"OL"===e.tagName},Fr=function(e){return"INPUT"===e.tagName},Qr=function(e){return"svg"===e.tagName},Mr=function(e){return"BODY"===e.tagName},Sr=function(e){return"CANVAS"===e.tagName},Tr=function(e){return"IMG"===e.tagName},Lr=function(e){return"IFRAME"===e.tagName},Hr=function(e){return"STYLE"===e.tagName},Ir=function(e){return"TEXTAREA"===e.tagName},Dr=function(e){return"SELECT"===e.tagName},Rr=function(e){return"SLOT"===e.tagName},Pr=function(e){return e.tagName.indexOf("-")>0},Nr=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){return this.counters[e]||[]},e.prototype.pop=function(e){var t=this;e.forEach((function(e){return t.counters[e].pop()}))},e.prototype.parse=function(e){var t=this,A=e.counterIncrement,n=e.counterReset,r=!0;null!==A&&A.forEach((function(e){var A=t.counters[e.counter];A&&0!==e.increment&&(r=!1,A.length||A.push(1),A[Math.max(0,A.length-1)]+=e.increment)}));var i=[];return r&&n.forEach((function(e){var A=t.counters[e.counter];i.push(e.counter),A||(A=t.counters[e.counter]=[]),A.push(e.reset)})),i},e}(),Or={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Gr={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ี","ี","ี","ี","ี","ี","ี","ี","ี","ี","ี","ี","ี","ี","ี","ี","ี","ี","ี","ี","ี","ิฟ","ิพ","ิฝ","ิผ","ิป","ิบ","ิน","ิธ","ิท","ิถ","ิต","ิด","ิณ","ิฒ","ิฑ"]},Vr={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["ืืณ","ืืณ","ืืณ","ืืณ","ืืณ","ืืณ","ืืณ","ืืณ","ืืณ","ืืณ","ืช","ืฉ","ืจ","ืง","ืฆ","ืค","ืข","ืก","ื","ื","ื","ื","ืื","ืื","ืื","ืื","ืื","ื","ื","ื","ื","ื","ื","ื","ื","ื","ื"]},kr={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["แต","แฐ","แฏ","แด","แฎ","แญ","แฌ","แซ","แช","แฉ","แจ","แง","แฆ","แฅ","แค","แณ","แข","แก","แ","แ","แ","แ","แฒ","แ","แ","แ","แ","แ","แ","แฑ","แ","แ","แ","แ","แ","แ","แ"]},Kr=function(e,t,A,n,r,i){return e<t||e>A?$r(e,r,i.length>0):n.integers.reduce((function(t,A,r){for(;e>=A;)e-=A,t+=n.values[r];return t}),"")+i},zr=function(e,t,A,n){var r="";do{A||e--,r=n(e)+r,e/=t}while(e*t>=t);return r},Wr=function(e,t,A,n,r){var i=A-t+1;return(e<0?"-":"")+(zr(Math.abs(e),i,n,(function(e){return c(Math.floor(e%i)+t)}))+r)},Xr=function(e,t,A){void 0===A&&(A=". ");var n=t.length;return zr(Math.abs(e),n,!1,(function(e){return t[Math.floor(e%n)]}))+A},Yr=function(e,t,A,n,r,i){if(e<-9999||e>9999)return $r(e,4,r.length>0);var s=Math.abs(e),o=r;if(0===s)return t[0]+o;for(var a=0;s>0&&a<=4;a++){var c=s%10;0===c&&nn(i,1)&&""!==o?o=t[c]+o:c>1||1===c&&0===a||1===c&&1===a&&nn(i,2)||1===c&&1===a&&nn(i,4)&&e>100||1===c&&a>1&&nn(i,8)?o=t[c]+(a>0?A[a-1]:"")+o:1===c&&a>0&&(o=A[a-1]+o),s=Math.floor(s/10)}return(e<0?n:"")+o},Jr="ๅ็พๅ่ฌ",jr="ๆพไฝฐไป่ฌ",Zr="ใใคใใน",qr="๋ง์ด๋์ค",$r=function(e,t,A){var n=A?". ":"",r=A?"ใ":"",i=A?", ":"",s=A?" ":"";switch(t){case 0:return"โข"+s;case 1:return"โฆ"+s;case 2:return"โพ"+s;case 5:var o=Wr(e,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Xr(e,"ใไธไบไธๅไบๅญไธๅซไน",r);case 6:return Kr(e,1,3999,Or,3,n).toLowerCase();case 7:return Kr(e,1,3999,Or,3,n);case 8:return Wr(e,945,969,!1,n);case 9:return Wr(e,97,122,!1,n);case 10:return Wr(e,65,90,!1,n);case 11:return Wr(e,1632,1641,!0,n);case 12:case 49:return Kr(e,1,9999,Gr,3,n);case 35:return Kr(e,1,9999,Gr,3,n).toLowerCase();case 13:return Wr(e,2534,2543,!0,n);case 14:case 30:return Wr(e,6112,6121,!0,n);case 15:return Xr(e,"ๅญไธๅฏๅฏ่พฐๅทณๅๆช็ณ้ๆไบฅ",r);case 16:return Xr(e,"็ฒไนไธไธๆๅทฑๅบ่พๅฃฌ็ธ",r);case 17:case 48:return Yr(e,"้ถไธไบไธๅไบๅญไธๅซไน",Jr,"่ฒ",r,14);case 47:return Yr(e,"้ถๅฃน่ฒณๅ่ไผ้ธๆๆ็",jr,"่ฒ",r,15);case 42:return Yr(e,"้ถไธไบไธๅไบๅญไธๅซไน",Jr,"่ด",r,14);case 41:return Yr(e,"้ถๅฃน่ดฐๅ่ไผ้ๆๆ็",jr,"่ด",r,15);case 26:return Yr(e,"ใไธไบไธๅไบๅญไธๅซไน","ๅ็พๅไธ",Zr,r,0);case 25:return Yr(e,"้ถๅฃฑๅผๅๅไผๅญไธๅซไน","ๆพ็พๅไธ",Zr,r,7);case 31:return Yr(e,"์์ผ์ด์ผ์ฌ์ค์ก์นํ๊ตฌ","์ญ๋ฐฑ์ฒ๋ง",qr,i,7);case 33:return Yr(e,"้ถไธไบไธๅไบๅญไธๅซไน","ๅ็พๅ่ฌ",qr,i,0);case 32:return Yr(e,"้ถๅฃน่ฒณๅๅไบๅญไธๅซไน","ๆพ็พๅ",qr,i,7);case 18:return Wr(e,2406,2415,!0,n);case 20:return Kr(e,1,19999,kr,3,n);case 21:return Wr(e,2790,2799,!0,n);case 22:return Wr(e,2662,2671,!0,n);case 22:return Kr(e,1,10999,Vr,3,n);case 23:return Xr(e,"ใใใใใใใใใใใใใใใใใกใคใฆใจใชใซใฌใญใฎใฏใฒใตใธใปใพใฟใใใใใใใใใใใใใใใใ");case 24:return Xr(e,"ใใใฏใซใปใธใจใกใใฌใใใใใใใใใคใญใชใใใใใฎใใใใพใใตใใใฆใใใใใใฟใใใฒใใใ");case 27:return Wr(e,3302,3311,!0,n);case 28:return Xr(e,"ใขใคใฆใจใชใซใญใฏใฑใณใตใทในใปใฝใฟใใใใใใใใใใใใใใใใใใกใขใคใฆใจใฉใชใซใฌใญใฏใฐใฑใฒใณ",r);case 29:return Xr(e,"ใคใญใใใใใใใชใใซใฒใฏใซใจใฟใฌใฝใใใใฉใใฆใฐใใชใฏใคใใฑใใณใจใใขใตใญใฆใกใใทใฑใใขใปใน",r);case 34:return Wr(e,3792,3801,!0,n);case 37:return Wr(e,6160,6169,!0,n);case 38:return Wr(e,4160,4169,!0,n);case 39:return Wr(e,2918,2927,!0,n);case 40:return Wr(e,1776,1785,!0,n);case 43:return Wr(e,3046,3055,!0,n);case 44:return Wr(e,3174,3183,!0,n);case 45:return Wr(e,3664,3673,!0,n);case 46:return Wr(e,3872,3881,!0,n);case 3:default:return Wr(e,48,57,!0,n)}},ei="data-html2canvas-ignore",ti=function(){function e(e,t,A){if(this.context=e,this.options=A,this.scrolledElements=[],this.referenceElement=t,this.counters=new Nr,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var A=this,i=ni(e,t);if(!i.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,a=i.contentWindow,c=a.document,l=si(i).then((function(){return n(A,void 0,void 0,(function(){var e,A;return r(this,(function(n){switch(n.label){case 0:return this.scrolledElements.forEach(hi),a&&(a.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||a.scrollY===t.top&&a.scrollX===t.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-t.left,a.scrollY-t.top,0,0))),e=this.options.onclone,void 0===(A=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:n.sent(),n.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,ii(c)]:[3,4];case 3:n.sent(),n.label=4;case 4:return"function"==typeof e?[2,Promise.resolve().then((function(){return e(c,A)})).then((function(){return i}))]:[2,i]}}))}))}));return c.open(),c.write(ci(document.doctype)+"<html></html>"),li(this.referenceElement.ownerDocument,s,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),l},e.prototype.createElementClone=function(e){if(wn(e,2),Sr(e))return this.createCanvasClone(e);if(Hr(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return Tr(t)&&(Tr(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),Pr(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return ai(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var A=[].slice.call(t.cssRules,0).reduce((function(e,t){return t&&"string"==typeof t.cssText?e+t.cssText:e}),""),n=e.cloneNode(!1);return n.textContent=A,n}}catch(e){if(this.context.logger.error("Unable to access cssRules property",e),"SecurityError"!==e.name)throw e}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var A=e.ownerDocument.createElement("img");try{return A.src=e.toDataURL(),A}catch(t){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var n=e.cloneNode(!1);try{n.width=e.width,n.height=e.height;var r=e.getContext("2d"),i=n.getContext("2d");if(i)if(!this.options.allowTaint&&r)i.putImageData(r.getImageData(0,0,e.width,e.height),0,0);else{var s=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(s){var o=s.getContextAttributes();!1===(null==o?void 0:o.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return n}catch(t){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return n},e.prototype.appendChildNode=function(e,t,A){Cr(t)&&("SCRIPT"===t.tagName||t.hasAttribute(ei)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(t))||this.options.copyStyles&&Cr(t)&&Hr(t)||e.appendChild(this.cloneNode(t,A))},e.prototype.cloneNode=function(e,t){var A=this;if(xr(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Cr(e)&&(br(e)||_r(e))){var r=this.createElementClone(e);r.style.transitionProperty="none";var i=n.getComputedStyle(e),s=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&br(r)&&(this.clonedReferenceElement=r),Mr(r)&&gi(r);var a=this.counters.parse(new mn(this.context,i)),c=this.resolvePseudoContent(e,r,s,Qn.BEFORE);Pr(e)&&(t=!0);for(var l=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;l;l=l.nextSibling)if(Cr(l)&&Rr(l)&&"function"==typeof l.assignedNodes){var h=l.assignedNodes();h.length&&h.forEach((function(e){return A.appendChildNode(r,e,t)}))}else this.appendChildNode(r,l,t);c&&r.insertBefore(c,r.firstChild);var u=this.resolvePseudoContent(e,r,o,Qn.AFTER);return u&&r.appendChild(u),this.counters.pop(a),(i&&(this.options.copyStyles||_r(e))&&!Lr(e)||t)&&ai(i,r),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([r,e.scrollLeft,e.scrollTop]),(Ir(e)||Dr(e))&&(Ir(r)||Dr(r))&&(r.value=e.value),r}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,A,n){var r=this;if(A){var i=A.content,s=t.ownerDocument;if(s&&i&&"none"!==i&&"-moz-alt-content"!==i&&"none"!==A.display){this.counters.parse(new mn(this.context,A));var o=new fn(this.context,A),a=s.createElement("html2canvaspseudoelement");ai(A,a),o.content.forEach((function(t){if(0===t.type)a.appendChild(s.createTextNode(t.value));else if(22===t.type){var A=s.createElement("img");A.src=t.value,A.style.opacity="1",a.appendChild(A)}else if(18===t.type){if("attr"===t.name){var n=t.values.filter(Ne);n.length&&a.appendChild(s.createTextNode(e.getAttribute(n[0].value)||""))}else if("counter"===t.name){var i=t.values.filter(ke),c=i[0],l=i[1];if(c&&Ne(c)){var h=r.counters.getCounterValue(c.value),u=l&&Ne(l)?CA.parse(r.context,l.value):3;a.appendChild(s.createTextNode($r(h,u,!1)))}}else if("counters"===t.name){var d=t.values.filter(ke),p=(c=d[0],d[1]);if(l=d[2],c&&Ne(c)){var g=r.counters.getCounterValues(c.value),f=l&&Ne(l)?CA.parse(r.context,l.value):3,m=p&&0===p.type?p.value:"",B=g.map((function(e){return $r(e,f,!1)})).join(m);a.appendChild(s.createTextNode(B))}}}else if(20===t.type)switch(t.value){case"open-quote":a.appendChild(s.createTextNode(ln(o.quotes,r.quoteDepth++,!0)));break;case"close-quote":a.appendChild(s.createTextNode(ln(o.quotes,--r.quoteDepth,!1)));break;default:a.appendChild(s.createTextNode(t.value))}})),a.className=ui+" "+di;var c=n===Qn.BEFORE?" "+ui:" "+di;return _r(t)?t.className.baseValue+=c:t.className+=c,a}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(Qn||(Qn={}));var Ai,ni=function(e,t){var A=e.createElement("iframe");return A.className="html2canvas-container",A.style.visibility="hidden",A.style.position="fixed",A.style.left="-10000px",A.style.top="0px",A.style.border="0",A.width=t.width.toString(),A.height=t.height.toString(),A.scrolling="no",A.setAttribute(ei,"true"),e.body.appendChild(A),A},ri=function(e){return new Promise((function(t){e.complete?t():e.src?(e.onload=t,e.onerror=t):t()}))},ii=function(e){return Promise.all([].slice.call(e.images,0).map(ri))},si=function(e){return new Promise((function(t,A){var n=e.contentWindow;if(!n)return A("No window assigned for iframe");var r=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var A=setInterval((function(){r.body.childNodes.length>0&&"complete"===r.readyState&&(clearInterval(A),t(e))}),50)}}))},oi=["all","d","content"],ai=function(e,t){for(var A=e.length-1;A>=0;A--){var n=e.item(A);-1===oi.indexOf(n)&&t.style.setProperty(n,e.getPropertyValue(n))}return t},ci=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},li=function(e,t,A){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||A!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,A)},hi=function(e){var t=e[0],A=e[1],n=e[2];t.scrollLeft=A,t.scrollTop=n},ui="___html2canvas___pseudoelement_before",di="___html2canvas___pseudoelement_after",pi='{\n    content: "" !important;\n    display: none !important;\n}',gi=function(e){fi(e,"."+ui+":before"+pi+"\n         ."+di+":after"+pi)},fi=function(e,t){var A=e.ownerDocument;if(A){var n=A.createElement("style");n.textContent=t,e.appendChild(n)}},mi=function(){function e(){}return e.getOrigin=function(t){var A=e._link;return A?(A.href=t,A.href=A.href,A.protocol+A.hostname+A.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),Bi=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:_i(e)||xi(e)?((this._cache[e]=this.loadImage(e)).catch((function(){})),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return n(this,void 0,void 0,(function(){var t,A,n,i,s=this;return r(this,(function(r){switch(r.label){case 0:return t=mi.isSameOrigin(e),A=!Ci(e)&&!0===this._options.useCORS&&kn.SUPPORT_CORS_IMAGES&&!t,n=!Ci(e)&&!t&&!_i(e)&&"string"==typeof this._options.proxy&&kn.SUPPORT_CORS_XHR&&!A,t||!1!==this._options.allowTaint||Ci(e)||_i(e)||n||A?(i=e,n?[4,this.proxy(i)]:[3,2]):[2];case 1:i=r.sent(),r.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise((function(e,t){var n=new Image;n.onload=function(){return e(n)},n.onerror=t,(bi(i)||A)&&(n.crossOrigin="anonymous"),n.src=i,!0===n.complete&&setTimeout((function(){return e(n)}),500),s._options.imageTimeout>0&&setTimeout((function(){return t("Timed out ("+s._options.imageTimeout+"ms) loading image")}),s._options.imageTimeout)}))];case 3:return[2,r.sent()]}}))}))},e.prototype.has=function(e){return void 0!==this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,A=this._options.proxy;if(!A)throw new Error("No proxy defined");var n=e.substring(0,256);return new Promise((function(r,i){var s=kn.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(200===o.status)if("text"===s)r(o.response);else{var e=new FileReader;e.addEventListener("load",(function(){return r(e.result)}),!1),e.addEventListener("error",(function(e){return i(e)}),!1),e.readAsDataURL(o.response)}else i("Failed to proxy resource "+n+" with status code "+o.status)},o.onerror=i;var a=A.indexOf("?")>-1?"&":"?";if(o.open("GET",""+A+a+"url="+encodeURIComponent(e)+"&responseType="+s),"text"!==s&&o instanceof XMLHttpRequest&&(o.responseType=s),t._options.imageTimeout){var c=t._options.imageTimeout;o.timeout=c,o.ontimeout=function(){return i("Timed out ("+c+"ms) proxying "+n)}}o.send()}))},e}(),wi=/^data:image\/svg\+xml/i,vi=/^data:image\/.*;base64,/i,yi=/^data:image\/.*/i,xi=function(e){return kn.SUPPORT_SVG_DRAWING||!Ei(e)},Ci=function(e){return yi.test(e)},bi=function(e){return vi.test(e)},_i=function(e){return"blob"===e.substr(0,4)},Ei=function(e){return"svg"===e.substr(-3).toLowerCase()||wi.test(e)},Ui=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,A){return new e(this.x+t,this.y+A)},e}(),Fi=function(e,t,A){return new Ui(e.x+(t.x-e.x)*A,e.y+(t.y-e.y)*A)},Qi=function(){function e(e,t,A,n){this.type=1,this.start=e,this.startControl=t,this.endControl=A,this.end=n}return e.prototype.subdivide=function(t,A){var n=Fi(this.start,this.startControl,t),r=Fi(this.startControl,this.endControl,t),i=Fi(this.endControl,this.end,t),s=Fi(n,r,t),o=Fi(r,i,t),a=Fi(s,o,t);return A?new e(this.start,n,s,a):new e(a,o,i,this.end)},e.prototype.add=function(t,A){return new e(this.start.add(t,A),this.startControl.add(t,A),this.endControl.add(t,A),this.end.add(t,A))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Mi=function(e){return 1===e.type},Si=function(e){var t=e.styles,A=e.bounds,n=qe(t.borderTopLeftRadius,A.width,A.height),r=n[0],i=n[1],s=qe(t.borderTopRightRadius,A.width,A.height),o=s[0],a=s[1],c=qe(t.borderBottomRightRadius,A.width,A.height),l=c[0],h=c[1],u=qe(t.borderBottomLeftRadius,A.width,A.height),d=u[0],p=u[1],g=[];g.push((r+o)/A.width),g.push((d+l)/A.width),g.push((i+p)/A.height),g.push((a+h)/A.height);var f=Math.max.apply(Math,g);f>1&&(r/=f,i/=f,o/=f,a/=f,l/=f,h/=f,d/=f,p/=f);var m=A.width-o,B=A.height-h,w=A.width-l,v=A.height-p,y=t.borderTopWidth,x=t.borderRightWidth,C=t.borderBottomWidth,b=t.borderLeftWidth,_=$e(t.paddingTop,e.bounds.width),E=$e(t.paddingRight,e.bounds.width),U=$e(t.paddingBottom,e.bounds.width),F=$e(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=r>0||i>0?Ti(A.left+b/3,A.top+y/3,r-b/3,i-y/3,Ai.TOP_LEFT):new Ui(A.left+b/3,A.top+y/3),this.topRightBorderDoubleOuterBox=r>0||i>0?Ti(A.left+m,A.top+y/3,o-x/3,a-y/3,Ai.TOP_RIGHT):new Ui(A.left+A.width-x/3,A.top+y/3),this.bottomRightBorderDoubleOuterBox=l>0||h>0?Ti(A.left+w,A.top+B,l-x/3,h-C/3,Ai.BOTTOM_RIGHT):new Ui(A.left+A.width-x/3,A.top+A.height-C/3),this.bottomLeftBorderDoubleOuterBox=d>0||p>0?Ti(A.left+b/3,A.top+v,d-b/3,p-C/3,Ai.BOTTOM_LEFT):new Ui(A.left+b/3,A.top+A.height-C/3),this.topLeftBorderDoubleInnerBox=r>0||i>0?Ti(A.left+2*b/3,A.top+2*y/3,r-2*b/3,i-2*y/3,Ai.TOP_LEFT):new Ui(A.left+2*b/3,A.top+2*y/3),this.topRightBorderDoubleInnerBox=r>0||i>0?Ti(A.left+m,A.top+2*y/3,o-2*x/3,a-2*y/3,Ai.TOP_RIGHT):new Ui(A.left+A.width-2*x/3,A.top+2*y/3),this.bottomRightBorderDoubleInnerBox=l>0||h>0?Ti(A.left+w,A.top+B,l-2*x/3,h-2*C/3,Ai.BOTTOM_RIGHT):new Ui(A.left+A.width-2*x/3,A.top+A.height-2*C/3),this.bottomLeftBorderDoubleInnerBox=d>0||p>0?Ti(A.left+2*b/3,A.top+v,d-2*b/3,p-2*C/3,Ai.BOTTOM_LEFT):new Ui(A.left+2*b/3,A.top+A.height-2*C/3),this.topLeftBorderStroke=r>0||i>0?Ti(A.left+b/2,A.top+y/2,r-b/2,i-y/2,Ai.TOP_LEFT):new Ui(A.left+b/2,A.top+y/2),this.topRightBorderStroke=r>0||i>0?Ti(A.left+m,A.top+y/2,o-x/2,a-y/2,Ai.TOP_RIGHT):new Ui(A.left+A.width-x/2,A.top+y/2),this.bottomRightBorderStroke=l>0||h>0?Ti(A.left+w,A.top+B,l-x/2,h-C/2,Ai.BOTTOM_RIGHT):new Ui(A.left+A.width-x/2,A.top+A.height-C/2),this.bottomLeftBorderStroke=d>0||p>0?Ti(A.left+b/2,A.top+v,d-b/2,p-C/2,Ai.BOTTOM_LEFT):new Ui(A.left+b/2,A.top+A.height-C/2),this.topLeftBorderBox=r>0||i>0?Ti(A.left,A.top,r,i,Ai.TOP_LEFT):new Ui(A.left,A.top),this.topRightBorderBox=o>0||a>0?Ti(A.left+m,A.top,o,a,Ai.TOP_RIGHT):new Ui(A.left+A.width,A.top),this.bottomRightBorderBox=l>0||h>0?Ti(A.left+w,A.top+B,l,h,Ai.BOTTOM_RIGHT):new Ui(A.left+A.width,A.top+A.height),this.bottomLeftBorderBox=d>0||p>0?Ti(A.left,A.top+v,d,p,Ai.BOTTOM_LEFT):new Ui(A.left,A.top+A.height),this.topLeftPaddingBox=r>0||i>0?Ti(A.left+b,A.top+y,Math.max(0,r-b),Math.max(0,i-y),Ai.TOP_LEFT):new Ui(A.left+b,A.top+y),this.topRightPaddingBox=o>0||a>0?Ti(A.left+Math.min(m,A.width-x),A.top+y,m>A.width+x?0:Math.max(0,o-x),Math.max(0,a-y),Ai.TOP_RIGHT):new Ui(A.left+A.width-x,A.top+y),this.bottomRightPaddingBox=l>0||h>0?Ti(A.left+Math.min(w,A.width-b),A.top+Math.min(B,A.height-C),Math.max(0,l-x),Math.max(0,h-C),Ai.BOTTOM_RIGHT):new Ui(A.left+A.width-x,A.top+A.height-C),this.bottomLeftPaddingBox=d>0||p>0?Ti(A.left+b,A.top+Math.min(v,A.height-C),Math.max(0,d-b),Math.max(0,p-C),Ai.BOTTOM_LEFT):new Ui(A.left+b,A.top+A.height-C),this.topLeftContentBox=r>0||i>0?Ti(A.left+b+F,A.top+y+_,Math.max(0,r-(b+F)),Math.max(0,i-(y+_)),Ai.TOP_LEFT):new Ui(A.left+b+F,A.top+y+_),this.topRightContentBox=o>0||a>0?Ti(A.left+Math.min(m,A.width+b+F),A.top+y+_,m>A.width+b+F?0:o-b+F,a-(y+_),Ai.TOP_RIGHT):new Ui(A.left+A.width-(x+E),A.top+y+_),this.bottomRightContentBox=l>0||h>0?Ti(A.left+Math.min(w,A.width-(b+F)),A.top+Math.min(B,A.height+y+_),Math.max(0,l-(x+E)),h-(C+U),Ai.BOTTOM_RIGHT):new Ui(A.left+A.width-(x+E),A.top+A.height-(C+U)),this.bottomLeftContentBox=d>0||p>0?Ti(A.left+b+F,A.top+v,Math.max(0,d-(b+F)),p-(C+U),Ai.BOTTOM_LEFT):new Ui(A.left+b+F,A.top+A.height-(C+U))};!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(Ai||(Ai={}));var Ti=function(e,t,A,n,r){var i=(Math.sqrt(2)-1)/3*4,s=A*i,o=n*i,a=e+A,c=t+n;switch(r){case Ai.TOP_LEFT:return new Qi(new Ui(e,c),new Ui(e,c-o),new Ui(a-s,t),new Ui(a,t));case Ai.TOP_RIGHT:return new Qi(new Ui(e,t),new Ui(e+s,t),new Ui(a,c-o),new Ui(a,c));case Ai.BOTTOM_RIGHT:return new Qi(new Ui(a,t),new Ui(a,t+o),new Ui(e+s,c),new Ui(e,c));case Ai.BOTTOM_LEFT:default:return new Qi(new Ui(a,c),new Ui(a-s,c),new Ui(e,t+o),new Ui(e,t))}},Li=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Hi=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Ii=function(e,t,A){this.offsetX=e,this.offsetY=t,this.matrix=A,this.type=0,this.target=6},Di=function(e,t){this.path=e,this.target=t,this.type=1},Ri=function(e){this.opacity=e,this.type=2,this.target=6},Pi=function(e){return 1===e.type},Ni=function(e,t){return e.length===t.length&&e.some((function(e,A){return e===t[A]}))},Oi=function(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},Gi=function(){function e(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new Si(this.container),this.container.styles.opacity<1&&this.effects.push(new Ri(this.container.styles.opacity)),null!==this.container.styles.transform){var A=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,r=this.container.styles.transform;this.effects.push(new Ii(A,n,r))}if(0!==this.container.styles.overflowX){var i=Li(this.curves),s=Hi(this.curves);Ni(i,s)?this.effects.push(new Di(i,6)):(this.effects.push(new Di(i,2)),this.effects.push(new Di(s,4)))}}return e.prototype.getEffects=function(e){for(var t=-1===[2,3].indexOf(this.container.styles.position),A=this.parent,n=this.effects.slice(0);A;){var r=A.effects.filter((function(e){return!Pi(e)}));if(t||0!==A.container.styles.position||!A.parent){if(n.unshift.apply(n,r),t=-1===[2,3].indexOf(A.container.styles.position),0!==A.container.styles.overflowX){var i=Li(A.curves),s=Hi(A.curves);Ni(i,s)||n.unshift(new Di(s,6))}}else n.unshift.apply(n,r);A=A.parent}return n.filter((function(t){return nn(t.target,e)}))},e}(),Vi=function(e,t,A,n){e.container.elements.forEach((function(r){var i=nn(r.flags,4),s=nn(r.flags,2),o=new Gi(r,e);nn(r.styles.display,2048)&&n.push(o);var a=nn(r.flags,8)?[]:n;if(i||s){var c=i||r.styles.isPositioned()?A:t,l=new Oi(o);if(r.styles.isPositioned()||r.styles.opacity<1||r.styles.isTransformed()){var h=r.styles.zIndex.order;if(h<0){var u=0;c.negativeZIndex.some((function(e,t){return h>e.element.container.styles.zIndex.order?(u=t,!1):u>0})),c.negativeZIndex.splice(u,0,l)}else if(h>0){var d=0;c.positiveZIndex.some((function(e,t){return h>=e.element.container.styles.zIndex.order?(d=t+1,!1):d>0})),c.positiveZIndex.splice(d,0,l)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(l)}else r.styles.isFloating()?c.nonPositionedFloats.push(l):c.nonPositionedInlineLevel.push(l);Vi(o,l,i?l:A,a)}else r.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),Vi(o,t,A,a);nn(r.flags,8)&&ki(r,a)}))},ki=function(e,t){for(var A=e instanceof ir?e.start:1,n=e instanceof ir&&e.reversed,r=0;r<t.length;r++){var i=t[r];i.container instanceof rr&&"number"==typeof i.container.value&&0!==i.container.value&&(A=i.container.value),i.listValue=$r(A,i.container.styles.listStyleType,!0),A+=n?-1:1}},Ki=function(e,t){switch(t){case 0:return Wi(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Wi(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Wi(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Wi(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},zi=function(e,t){var A=[];return Mi(e)?A.push(e.subdivide(.5,!1)):A.push(e),Mi(t)?A.push(t.subdivide(.5,!0)):A.push(t),A},Wi=function(e,t,A,n){var r=[];return Mi(e)?r.push(e.subdivide(.5,!1)):r.push(e),Mi(A)?r.push(A.subdivide(.5,!0)):r.push(A),Mi(n)?r.push(n.subdivide(.5,!0).reverse()):r.push(n),Mi(t)?r.push(t.subdivide(.5,!1).reverse()):r.push(t),r},Xi=function(e){var t=e.bounds,A=e.styles;return t.add(A.borderLeftWidth,A.borderTopWidth,-(A.borderRightWidth+A.borderLeftWidth),-(A.borderTopWidth+A.borderBottomWidth))},Yi=function(e){var t=e.styles,A=e.bounds,n=$e(t.paddingLeft,A.width),r=$e(t.paddingRight,A.width),i=$e(t.paddingTop,A.width),s=$e(t.paddingBottom,A.width);return A.add(n+t.borderLeftWidth,i+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+r),-(t.borderTopWidth+t.borderBottomWidth+i+s))},Ji=function(e,t,A){var n=function(e,t){return 0===e?t.bounds:2===e?Yi(t):Xi(t)}($i(e.styles.backgroundOrigin,t),e),r=function(e,t){return 0===e?t.bounds:2===e?Yi(t):Xi(t)}($i(e.styles.backgroundClip,t),e),i=qi($i(e.styles.backgroundSize,t),A,n),s=i[0],o=i[1],a=qe($i(e.styles.backgroundPosition,t),n.width-s,n.height-o);return[es($i(e.styles.backgroundRepeat,t),a,i,n,r),Math.round(n.left+a[0]),Math.round(n.top+a[1]),s,o]},ji=function(e){return Ne(e)&&e.value===It.AUTO},Zi=function(e){return"number"==typeof e},qi=function(e,t,A){var n=t[0],r=t[1],i=t[2],s=e[0],o=e[1];if(!s)return[0,0];if(Xe(s)&&o&&Xe(o))return[$e(s,A.width),$e(o,A.height)];var a=Zi(i);if(Ne(s)&&(s.value===It.CONTAIN||s.value===It.COVER))return Zi(i)?A.width/A.height<i!=(s.value===It.COVER)?[A.width,A.width/i]:[A.height*i,A.height]:[A.width,A.height];var c=Zi(n),l=Zi(r),h=c||l;if(ji(s)&&(!o||ji(o)))return c&&l?[n,r]:a||h?h&&a?[c?n:r*i,l?r:n/i]:[c?n:A.width,l?r:A.height]:[A.width,A.height];if(a){var u=0,d=0;return Xe(s)?u=$e(s,A.width):Xe(o)&&(d=$e(o,A.height)),ji(s)?u=d*i:o&&!ji(o)||(d=u/i),[u,d]}var p=null,g=null;if(Xe(s)?p=$e(s,A.width):o&&Xe(o)&&(g=$e(o,A.height)),null===p||o&&!ji(o)||(g=c&&l?p/n*r:A.height),null!==g&&ji(s)&&(p=c&&l?g/r*n:A.width),null!==p&&null!==g)return[p,g];throw new Error("Unable to calculate background-size for element")},$i=function(e,t){var A=e[t];return void 0===A?e[0]:A},es=function(e,t,A,n,r){var i=t[0],s=t[1],o=A[0],a=A[1];switch(e){case 2:return[new Ui(Math.round(n.left),Math.round(n.top+s)),new Ui(Math.round(n.left+n.width),Math.round(n.top+s)),new Ui(Math.round(n.left+n.width),Math.round(a+n.top+s)),new Ui(Math.round(n.left),Math.round(a+n.top+s))];case 3:return[new Ui(Math.round(n.left+i),Math.round(n.top)),new Ui(Math.round(n.left+i+o),Math.round(n.top)),new Ui(Math.round(n.left+i+o),Math.round(n.height+n.top)),new Ui(Math.round(n.left+i),Math.round(n.height+n.top))];case 1:return[new Ui(Math.round(n.left+i),Math.round(n.top+s)),new Ui(Math.round(n.left+i+o),Math.round(n.top+s)),new Ui(Math.round(n.left+i+o),Math.round(n.top+s+a)),new Ui(Math.round(n.left+i),Math.round(n.top+s+a))];default:return[new Ui(Math.round(r.left),Math.round(r.top)),new Ui(Math.round(r.left+r.width),Math.round(r.top)),new Ui(Math.round(r.left+r.width),Math.round(r.height+r.top)),new Ui(Math.round(r.left),Math.round(r.height+r.top))]}},ts="Hidden Text",As=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var A=this._document.createElement("div"),n=this._document.createElement("img"),r=this._document.createElement("span"),i=this._document.body;A.style.visibility="hidden",A.style.fontFamily=e,A.style.fontSize=t,A.style.margin="0",A.style.padding="0",A.style.whiteSpace="nowrap",i.appendChild(A),n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",r.style.fontFamily=e,r.style.fontSize=t,r.style.margin="0",r.style.padding="0",r.appendChild(this._document.createTextNode(ts)),A.appendChild(r),A.appendChild(n);var s=n.offsetTop-r.offsetTop+2;A.removeChild(r),A.appendChild(this._document.createTextNode(ts)),A.style.lineHeight="normal",n.style.verticalAlign="super";var o=n.offsetTop-A.offsetTop+2;return i.removeChild(A),{baseline:s,middle:o}},e.prototype.getMetrics=function(e,t){var A=e+" "+t;return void 0===this._data[A]&&(this._data[A]=this.parseMetrics(e,t)),this._data[A]},e}(),ns=function(e,t){this.context=e,this.options=t},rs=function(e){function A(t,A){var n=e.call(this,t,A)||this;return n._activeEffects=[],n.canvas=A.canvas?A.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),A.canvas||(n.canvas.width=Math.floor(A.width*A.scale),n.canvas.height=Math.floor(A.height*A.scale),n.canvas.style.width=A.width+"px",n.canvas.style.height=A.height+"px"),n.fontMetrics=new As(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-A.x,-A.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+A.width+"x"+A.height+") with scale "+A.scale),n}return t(A,e),A.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach((function(e){return t.applyEffect(e)}))},A.prototype.applyEffect=function(e){this.ctx.save(),function(e){return 2===e.type}(e)&&(this.ctx.globalAlpha=e.opacity),function(e){return 0===e.type}(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),Pi(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},A.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},A.prototype.renderStack=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},A.prototype.renderNode=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return nn(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},A.prototype.renderTextWithLetterSpacing=function(e,t,A){var n=this;0===t?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+A):Xn(e.text).reduce((function(t,r){return n.ctx.fillText(r,t,e.bounds.top+A),t+n.ctx.measureText(r).width}),e.bounds.left)},A.prototype.createFontStyle=function(e){var t=e.fontVariant.filter((function(e){return"normal"===e||"small-caps"===e})).join(""),A=cs(e.fontFamily).join(", "),n=Re(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,n,A].join(" "),A,n]},A.prototype.renderTextNode=function(e,t){return n(this,void 0,void 0,(function(){var A,n,i,s,o,a,c,l,h=this;return r(this,(function(r){return A=this.createFontStyle(t),n=A[0],i=A[1],s=A[2],this.ctx.font=n,this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(i,s),a=o.baseline,c=o.middle,l=t.paintOrder,e.textBounds.forEach((function(e){l.forEach((function(A){switch(A){case 0:h.ctx.fillStyle=at(t.color),h.renderTextWithLetterSpacing(e,t.letterSpacing,a);var n=t.textShadow;n.length&&e.text.trim().length&&(n.slice(0).reverse().forEach((function(A){h.ctx.shadowColor=at(A.color),h.ctx.shadowOffsetX=A.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=A.offsetY.number*h.options.scale,h.ctx.shadowBlur=A.blur.number,h.renderTextWithLetterSpacing(e,t.letterSpacing,a)})),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),t.textDecorationLine.length&&(h.ctx.fillStyle=at(t.textDecorationColor||t.color),t.textDecorationLine.forEach((function(t){switch(t){case 1:h.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+a),e.bounds.width,1);break;case 2:h.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:h.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+c),e.bounds.width,1)}})));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(h.ctx.strokeStyle=at(t.webkitTextStrokeColor),h.ctx.lineWidth=t.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+a)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter"}}))})),[2]}))}))},A.prototype.renderReplacedElement=function(e,t,A){if(A&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var n=Yi(e),r=Hi(t);this.path(r),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(A,0,0,e.intrinsicWidth,e.intrinsicHeight,n.left,n.top,n.width,n.height),this.ctx.restore()}},A.prototype.renderNodeContent=function(e){return n(this,void 0,void 0,(function(){var t,n,i,o,a,c,l,h,u,d,p,g,f,m,B,w,v,y;return r(this,(function(r){switch(r.label){case 0:this.applyEffects(e.getEffects(4)),t=e.container,n=e.curves,i=t.styles,o=0,a=t.textNodes,r.label=1;case 1:return o<a.length?(c=a[o],[4,this.renderTextNode(c,i)]):[3,4];case 2:r.sent(),r.label=3;case 3:return o++,[3,1];case 4:if(!(t instanceof tr))return[3,8];r.label=5;case 5:return r.trys.push([5,7,,8]),[4,this.context.cache.match(t.src)];case 6:return B=r.sent(),this.renderReplacedElement(t,n,B),[3,8];case 7:return r.sent(),this.context.logger.error("Error loading image "+t.src),[3,8];case 8:if(t instanceof Ar&&this.renderReplacedElement(t,n,t.canvas),!(t instanceof nr))return[3,12];r.label=9;case 9:return r.trys.push([9,11,,12]),[4,this.context.cache.match(t.svg)];case 10:return B=r.sent(),this.renderReplacedElement(t,n,B),[3,12];case 11:return r.sent(),this.context.logger.error("Error loading svg "+t.svg.substring(0,255)),[3,12];case 12:return t instanceof gr&&t.tree?[4,new A(this.context,{scale:this.options.scale,backgroundColor:t.backgroundColor,x:0,y:0,width:t.width,height:t.height}).render(t.tree)]:[3,14];case 13:l=r.sent(),t.width&&t.height&&this.ctx.drawImage(l,0,0,t.width,t.height,t.bounds.left,t.bounds.top,t.bounds.width,t.bounds.height),r.label=14;case 14:if(t instanceof ur&&(h=Math.min(t.bounds.width,t.bounds.height),t.type===ar?t.checked&&(this.ctx.save(),this.path([new Ui(t.bounds.left+.39363*h,t.bounds.top+.79*h),new Ui(t.bounds.left+.16*h,t.bounds.top+.5549*h),new Ui(t.bounds.left+.27347*h,t.bounds.top+.44071*h),new Ui(t.bounds.left+.39694*h,t.bounds.top+.5649*h),new Ui(t.bounds.left+.72983*h,t.bounds.top+.23*h),new Ui(t.bounds.left+.84*h,t.bounds.top+.34085*h),new Ui(t.bounds.left+.39363*h,t.bounds.top+.79*h)]),this.ctx.fillStyle=at(hr),this.ctx.fill(),this.ctx.restore()):t.type===cr&&t.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t.bounds.left+h/2,t.bounds.top+h/2,h/4,0,2*Math.PI,!0),this.ctx.fillStyle=at(hr),this.ctx.fill(),this.ctx.restore())),is(t)&&t.value.length){switch(u=this.createFontStyle(i),v=u[0],d=u[1],p=this.fontMetrics.getMetrics(v,d).baseline,this.ctx.font=v,this.ctx.fillStyle=at(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=os(t.styles.textAlign),y=Yi(t),g=0,t.styles.textAlign){case 1:g+=y.width/2;break;case 2:g+=y.width}f=y.add(g,0,0,-y.height/2+1),this.ctx.save(),this.path([new Ui(y.left,y.top),new Ui(y.left+y.width,y.top),new Ui(y.left+y.width,y.top+y.height),new Ui(y.left,y.top+y.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Kn(t.value,f),i.letterSpacing,p),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!nn(t.styles.display,2048))return[3,20];if(null===t.styles.listStyleImage)return[3,19];if(0!==(m=t.styles.listStyleImage).type)return[3,18];B=void 0,w=m.url,r.label=15;case 15:return r.trys.push([15,17,,18]),[4,this.context.cache.match(w)];case 16:return B=r.sent(),this.ctx.drawImage(B,t.bounds.left-(B.width+10),t.bounds.top),[3,18];case 17:return r.sent(),this.context.logger.error("Error loading list-style-image "+w),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==t.styles.listStyleType&&(v=this.createFontStyle(i)[0],this.ctx.font=v,this.ctx.fillStyle=at(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",y=new s(t.bounds.left,t.bounds.top+$e(t.styles.paddingTop,t.bounds.width),t.bounds.width,vA(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Kn(e.listValue,y),i.letterSpacing,vA(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),r.label=20;case 20:return[2]}}))}))},A.prototype.renderStackContent=function(e){return n(this,void 0,void 0,(function(){var t,A,n,i,s,o,a,c,l,h,u,d,p,g,f;return r(this,(function(r){switch(r.label){case 0:return nn(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:r.sent(),t=0,A=e.negativeZIndex,r.label=2;case 2:return t<A.length?(f=A[t],[4,this.renderStack(f)]):[3,5];case 3:r.sent(),r.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:r.sent(),n=0,i=e.nonInlineLevel,r.label=7;case 7:return n<i.length?(f=i[n],[4,this.renderNode(f)]):[3,10];case 8:r.sent(),r.label=9;case 9:return n++,[3,7];case 10:s=0,o=e.nonPositionedFloats,r.label=11;case 11:return s<o.length?(f=o[s],[4,this.renderStack(f)]):[3,14];case 12:r.sent(),r.label=13;case 13:return s++,[3,11];case 14:a=0,c=e.nonPositionedInlineLevel,r.label=15;case 15:return a<c.length?(f=c[a],[4,this.renderStack(f)]):[3,18];case 16:r.sent(),r.label=17;case 17:return a++,[3,15];case 18:l=0,h=e.inlineLevel,r.label=19;case 19:return l<h.length?(f=h[l],[4,this.renderNode(f)]):[3,22];case 20:r.sent(),r.label=21;case 21:return l++,[3,19];case 22:u=0,d=e.zeroOrAutoZIndexOrTransformedOrOpacity,r.label=23;case 23:return u<d.length?(f=d[u],[4,this.renderStack(f)]):[3,26];case 24:r.sent(),r.label=25;case 25:return u++,[3,23];case 26:p=0,g=e.positiveZIndex,r.label=27;case 27:return p<g.length?(f=g[p],[4,this.renderStack(f)]):[3,30];case 28:r.sent(),r.label=29;case 29:return p++,[3,27];case 30:return[2]}}))}))},A.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},A.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},A.prototype.formatPath=function(e){var t=this;e.forEach((function(e,A){var n=Mi(e)?e.start:e;0===A?t.ctx.moveTo(n.x,n.y):t.ctx.lineTo(n.x,n.y),Mi(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)}))},A.prototype.renderRepeat=function(e,t,A,n){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(A,n),this.ctx.fill(),this.ctx.translate(-A,-n)},A.prototype.resizeImage=function(e,t,A){var n;if(e.width===t&&e.height===A)return e;var r=(null!==(n=this.canvas.ownerDocument)&&void 0!==n?n:document).createElement("canvas");return r.width=Math.max(1,t),r.height=Math.max(1,A),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,A),r},A.prototype.renderBackgroundImage=function(e){return n(this,void 0,void 0,(function(){var t,A,n,i,s,o;return r(this,(function(a){switch(a.label){case 0:t=e.styles.backgroundImage.length-1,A=function(A){var i,s,o,a,c,l,h,u,d,p,g,f,m,B,w,v,y,x,C,b,_,E,U,F,Q,M,S,T,L,H,I;return r(this,(function(r){switch(r.label){case 0:if(0!==A.type)return[3,5];i=void 0,s=A.url,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.context.cache.match(s)];case 2:return i=r.sent(),[3,4];case 3:return r.sent(),n.context.logger.error("Error loading background-image "+s),[3,4];case 4:return i&&(o=Ji(e,t,[i.width,i.height,i.width/i.height]),v=o[0],E=o[1],U=o[2],C=o[3],b=o[4],B=n.ctx.createPattern(n.resizeImage(i,C,b),"repeat"),n.renderRepeat(v,B,E,U)),[3,6];case 5:1===A.type?(a=Ji(e,t,[null,null,null]),v=a[0],E=a[1],U=a[2],C=a[3],b=a[4],c=yt(A.angle,C,b),l=c[0],h=c[1],u=c[2],d=c[3],p=c[4],(g=document.createElement("canvas")).width=C,g.height=b,f=g.getContext("2d"),m=f.createLinearGradient(h,d,u,p),vt(A.stops,l).forEach((function(e){return m.addColorStop(e.stop,at(e.color))})),f.fillStyle=m,f.fillRect(0,0,C,b),C>0&&b>0&&(B=n.ctx.createPattern(g,"repeat"),n.renderRepeat(v,B,E,U))):function(e){return 2===e.type}(A)&&(w=Ji(e,t,[null,null,null]),v=w[0],y=w[1],x=w[2],C=w[3],b=w[4],_=0===A.position.length?[je]:A.position,E=$e(_[0],C),U=$e(_[_.length-1],b),F=function(e,t,A,n,r){var i=0,s=0;switch(e.size){case 0:0===e.shape?i=s=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(A),Math.abs(A-r)):1===e.shape&&(i=Math.min(Math.abs(t),Math.abs(t-n)),s=Math.min(Math.abs(A),Math.abs(A-r)));break;case 2:if(0===e.shape)i=s=Math.min(xt(t,A),xt(t,A-r),xt(t-n,A),xt(t-n,A-r));else if(1===e.shape){var o=Math.min(Math.abs(A),Math.abs(A-r))/Math.min(Math.abs(t),Math.abs(t-n)),a=Ct(n,r,t,A,!0),c=a[0],l=a[1];s=o*(i=xt(c-t,(l-A)/o))}break;case 1:0===e.shape?i=s=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(A),Math.abs(A-r)):1===e.shape&&(i=Math.max(Math.abs(t),Math.abs(t-n)),s=Math.max(Math.abs(A),Math.abs(A-r)));break;case 3:if(0===e.shape)i=s=Math.max(xt(t,A),xt(t,A-r),xt(t-n,A),xt(t-n,A-r));else if(1===e.shape){o=Math.max(Math.abs(A),Math.abs(A-r))/Math.max(Math.abs(t),Math.abs(t-n));var h=Ct(n,r,t,A,!1);c=h[0],l=h[1],s=o*(i=xt(c-t,(l-A)/o))}}return Array.isArray(e.size)&&(i=$e(e.size[0],n),s=2===e.size.length?$e(e.size[1],r):i),[i,s]}(A,E,U,C,b),Q=F[0],M=F[1],Q>0&&M>0&&(S=n.ctx.createRadialGradient(y+E,x+U,0,y+E,x+U,Q),vt(A.stops,2*Q).forEach((function(e){return S.addColorStop(e.stop,at(e.color))})),n.path(v),n.ctx.fillStyle=S,Q!==M?(T=e.bounds.left+.5*e.bounds.width,L=e.bounds.top+.5*e.bounds.height,I=1/(H=M/Q),n.ctx.save(),n.ctx.translate(T,L),n.ctx.transform(1,0,0,H,0,0),n.ctx.translate(-T,-L),n.ctx.fillRect(y,I*(x-L)+L,C,b*I),n.ctx.restore()):n.ctx.fill())),r.label=6;case 6:return t--,[2]}}))},n=this,i=0,s=e.styles.backgroundImage.slice(0).reverse(),a.label=1;case 1:return i<s.length?(o=s[i],[5,A(o)]):[3,4];case 2:a.sent(),a.label=3;case 3:return i++,[3,1];case 4:return[2]}}))}))},A.prototype.renderSolidBorder=function(e,t,A){return n(this,void 0,void 0,(function(){return r(this,(function(n){return this.path(Ki(A,t)),this.ctx.fillStyle=at(e),this.ctx.fill(),[2]}))}))},A.prototype.renderDoubleBorder=function(e,t,A,i){return n(this,void 0,void 0,(function(){var n,s;return r(this,(function(r){switch(r.label){case 0:return t<3?[4,this.renderSolidBorder(e,A,i)]:[3,2];case 1:return r.sent(),[2];case 2:return n=function(e,t){switch(t){case 0:return Wi(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Wi(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Wi(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Wi(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}}(i,A),this.path(n),this.ctx.fillStyle=at(e),this.ctx.fill(),s=function(e,t){switch(t){case 0:return Wi(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Wi(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Wi(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Wi(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}}(i,A),this.path(s),this.ctx.fill(),[2]}}))}))},A.prototype.renderNodeBackgroundAndBorders=function(e){return n(this,void 0,void 0,(function(){var t,A,n,i,s,o,a,c,l=this;return r(this,(function(r){switch(r.label){case 0:return this.applyEffects(e.getEffects(2)),t=e.container.styles,A=!ot(t.backgroundColor)||t.backgroundImage.length,n=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],i=ss($i(t.backgroundClip,0),e.curves),A||t.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),ot(t.backgroundColor)||(this.ctx.fillStyle=at(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:r.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach((function(t){l.ctx.save();var A,n,r,i,s,o=Li(e.curves),a=t.inset?0:1e4,c=(A=o,n=-a+(t.inset?1:-1)*t.spread.number,r=(t.inset?1:-1)*t.spread.number,i=t.spread.number*(t.inset?-2:2),s=t.spread.number*(t.inset?-2:2),A.map((function(e,t){switch(t){case 0:return e.add(n,r);case 1:return e.add(n+i,r);case 2:return e.add(n+i,r+s);case 3:return e.add(n,r+s)}return e})));t.inset?(l.path(o),l.ctx.clip(),l.mask(c)):(l.mask(o),l.ctx.clip(),l.path(c)),l.ctx.shadowOffsetX=t.offsetX.number+a,l.ctx.shadowOffsetY=t.offsetY.number,l.ctx.shadowColor=at(t.color),l.ctx.shadowBlur=t.blur.number,l.ctx.fillStyle=t.inset?at(t.color):"rgba(0,0,0,1)",l.ctx.fill(),l.ctx.restore()})),r.label=2;case 2:s=0,o=0,a=n,r.label=3;case 3:return o<a.length?0!==(c=a[o]).style&&!ot(c.color)&&c.width>0?2!==c.style?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,s,e.curves,2)]:[3,11]:[3,13];case 4:return r.sent(),[3,11];case 5:return 3!==c.style?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,s,e.curves,3)];case 6:return r.sent(),[3,11];case 7:return 4!==c.style?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,s,e.curves)];case 8:return r.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,s,e.curves)];case 10:r.sent(),r.label=11;case 11:s++,r.label=12;case 12:return o++,[3,3];case 13:return[2]}}))}))},A.prototype.renderDashedDottedBorder=function(e,t,A,i,s){return n(this,void 0,void 0,(function(){var n,o,a,c,l,h,u,d,p,g,f,m,B,w,v,y;return r(this,(function(r){return this.ctx.save(),n=function(e,t){switch(t){case 0:return zi(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return zi(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return zi(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return zi(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}}(i,A),o=Ki(i,A),2===s&&(this.path(o),this.ctx.clip()),Mi(o[0])?(a=o[0].start.x,c=o[0].start.y):(a=o[0].x,c=o[0].y),Mi(o[1])?(l=o[1].end.x,h=o[1].end.y):(l=o[1].x,h=o[1].y),u=0===A||2===A?Math.abs(a-l):Math.abs(c-h),this.ctx.beginPath(),3===s?this.formatPath(n):this.formatPath(o.slice(0,2)),d=t<3?3*t:2*t,p=t<3?2*t:t,3===s&&(d=t,p=t),g=!0,u<=2*d?g=!1:u<=2*d+p?(d*=f=u/(2*d+p),p*=f):(m=Math.floor((u+p)/(d+p)),B=(u-m*d)/(m-1),p=(w=(u-(m+1)*d)/m)<=0||Math.abs(p-B)<Math.abs(p-w)?B:w),g&&(3===s?this.ctx.setLineDash([0,d+p]):this.ctx.setLineDash([d,p])),3===s?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=at(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===s&&(Mi(o[0])&&(v=o[3],y=o[0],this.ctx.beginPath(),this.formatPath([new Ui(v.end.x,v.end.y),new Ui(y.start.x,y.start.y)]),this.ctx.stroke()),Mi(o[1])&&(v=o[1],y=o[2],this.ctx.beginPath(),this.formatPath([new Ui(v.end.x,v.end.y),new Ui(y.start.x,y.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},A.prototype.render=function(e){return n(this,void 0,void 0,(function(){var t;return r(this,(function(A){switch(A.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=at(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=new Gi(e,null),r=new Oi(n),Vi(n,r,r,i=[]),ki(n.container,i),t=r,[4,this.renderStack(t)];case 1:return A.sent(),this.applyEffects([]),[2,this.canvas]}var n,r,i}))}))},A}(ns),is=function(e){return e instanceof pr||e instanceof dr||e instanceof ur&&e.type!==cr&&e.type!==ar},ss=function(e,t){switch(e){case 0:return Li(t);case 2:return function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]}(t);case 1:default:return Hi(t)}},os=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},as=["-apple-system","system-ui"],cs=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter((function(e){return-1===as.indexOf(e)})):e},ls=function(e){function A(t,A){var n=e.call(this,t,A)||this;return n.canvas=A.canvas?A.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=A,n.canvas.width=Math.floor(A.width*A.scale),n.canvas.height=Math.floor(A.height*A.scale),n.canvas.style.width=A.width+"px",n.canvas.style.height=A.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-A.x,-A.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+A.width+"x"+A.height+" at "+A.x+","+A.y+") with scale "+A.scale),n}return t(A,e),A.prototype.render=function(e){return n(this,void 0,void 0,(function(){var t,A;return r(this,(function(n){switch(n.label){case 0:return t=Gn(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,hs(t)];case 1:return A=n.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=at(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(A,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},A}(ns),hs=function(e){return new Promise((function(t,A){var n=new Image;n.onload=function(){t(n)},n.onerror=A,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},us=function(){function e(e){var t=e.id,A=e.enabled;this.id=t,this.enabled=A,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,i([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,i([this.id,this.getTime()+"ms"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,i([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,i([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.instances={},e}(),ds=function(){function e(t,A){var n;this.windowBounds=A,this.instanceName="#"+e.instanceCount++,this.logger=new us({id:this.instanceName,enabled:t.logging}),this.cache=null!==(n=t.cache)&&void 0!==n?n:new Bi(this,t)}return e.instanceCount=1,e}();"undefined"!=typeof window&&mi.setContext(window);var ps=function(e,t){return n(void 0,void 0,void 0,(function(){var n,i,a,c,l,h,u,d,p,g,f,m,B,w,v,y,x,C,b,_,E,U,F,Q,M,S,T,L,H,I,D,R,P,N,O,G,V,k;return r(this,(function(r){switch(r.label){case 0:if(!e||"object"!=typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(!(n=e.ownerDocument))throw new Error("Element is not attached to a Document");if(!(i=n.defaultView))throw new Error("Document is not attached to a Window");return a={allowTaint:null!==(U=t.allowTaint)&&void 0!==U&&U,imageTimeout:null!==(F=t.imageTimeout)&&void 0!==F?F:15e3,proxy:t.proxy,useCORS:null!==(Q=t.useCORS)&&void 0!==Q&&Q},c=A({logging:null===(M=t.logging)||void 0===M||M,cache:t.cache},a),l={windowWidth:null!==(S=t.windowWidth)&&void 0!==S?S:i.innerWidth,windowHeight:null!==(T=t.windowHeight)&&void 0!==T?T:i.innerHeight,scrollX:null!==(L=t.scrollX)&&void 0!==L?L:i.pageXOffset,scrollY:null!==(H=t.scrollY)&&void 0!==H?H:i.pageYOffset},h=new s(l.scrollX,l.scrollY,l.windowWidth,l.windowHeight),u=new ds(c,h),d=null!==(I=t.foreignObjectRendering)&&void 0!==I&&I,p={allowTaint:null!==(D=t.allowTaint)&&void 0!==D&&D,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:d,copyStyles:d},u.logger.debug("Starting document clone with size "+h.width+"x"+h.height+" scrolled to "+-h.left+","+-h.top),g=new ti(u,e,p),(f=g.clonedReferenceElement)?[4,g.toIFrame(n,h)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=r.sent(),B=Mr(f)||"HTML"===f.tagName?function(e){var t=e.body,A=e.documentElement;if(!t||!A)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,A.scrollWidth),Math.max(t.offsetWidth,A.offsetWidth),Math.max(t.clientWidth,A.clientWidth)),r=Math.max(Math.max(t.scrollHeight,A.scrollHeight),Math.max(t.offsetHeight,A.offsetHeight),Math.max(t.clientHeight,A.clientHeight));return new s(0,0,n,r)}(f.ownerDocument):o(u,f),w=B.width,v=B.height,y=B.left,x=B.top,C=gs(u,f,t.backgroundColor),b={canvas:t.canvas,backgroundColor:C,scale:null!==(P=null!==(R=t.scale)&&void 0!==R?R:i.devicePixelRatio)&&void 0!==P?P:1,x:(null!==(N=t.x)&&void 0!==N?N:0)+y,y:(null!==(O=t.y)&&void 0!==O?O:0)+x,width:null!==(G=t.width)&&void 0!==G?G:Math.ceil(w),height:null!==(V=t.height)&&void 0!==V?V:Math.ceil(v)},d?(u.logger.debug("Document cloned, using foreign object rendering"),[4,new ls(u,b).render(f)]):[3,3];case 2:return _=r.sent(),[3,5];case 3:return u.logger.debug("Document cloned, element located at "+y+","+x+" with size "+w+"x"+v+" using computed rendering"),u.logger.debug("Starting DOM parsing"),E=wr(u,f),C===E.styles.backgroundColor&&(E.styles.backgroundColor=ft.TRANSPARENT),u.logger.debug("Starting renderer for element at "+b.x+","+b.y+" with size "+b.width+"x"+b.height),[4,new rs(u,b).render(E)];case 4:_=r.sent(),r.label=5;case 5:return(null===(k=t.removeContainer)||void 0===k||k)&&(ti.destroy(m)||u.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),u.logger.debug("Finished rendering"),[2,_]}}))}))},gs=function(e,t,A){var n=t.ownerDocument,r=n.documentElement?gt(e,getComputedStyle(n.documentElement).backgroundColor):ft.TRANSPARENT,i=n.body?gt(e,getComputedStyle(n.body).backgroundColor):ft.TRANSPARENT,s="string"==typeof A?gt(e,A):null===A?ft.TRANSPARENT:4294967295;return t===n.documentElement?ot(r)?ot(i)?s:i:r:s};return function(e,t){return void 0===t&&(t={}),ps(e,t)}}()}},t={};function A(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,A),i.exports}A.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return A.d(t,{a:t}),t},A.d=(e,t)=>{for(var n in t)A.o(t,n)&&!A.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},A.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=100,t=1e3,n=1001,r=1002,i=1003,s=1006,o=1008,a=1009,c=1012,l=1014,h=1015,u=1016,d=1020,p=1022,g=1023,f=1026,m=1027,B=2300,w=2301,v=2302,y=2400,x=2401,C=2402,b=3e3,_=7680,E=35044,U=35048,F="300 es";class Q{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const A=this._listeners;void 0===A[e]&&(A[e]=[]),-1===A[e].indexOf(t)&&A[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const A=this._listeners;return void 0!==A[e]&&-1!==A[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const A=this._listeners[e];if(void 0!==A){const e=A.indexOf(t);-1!==e&&A.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const A=t.slice(0);for(let t=0,n=A.length;t<n;t++)A[t].call(this,e);e.target=null}}}const M=[];for(let e=0;e<256;e++)M[e]=(e<16?"0":"")+e.toString(16);const S=Math.PI/180,T=180/Math.PI;function L(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,A=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(M[255&e]+M[e>>8&255]+M[e>>16&255]+M[e>>24&255]+"-"+M[255&t]+M[t>>8&255]+"-"+M[t>>16&15|64]+M[t>>24&255]+"-"+M[63&A|128]+M[A>>8&255]+"-"+M[A>>16&255]+M[A>>24&255]+M[255&n]+M[n>>8&255]+M[n>>16&255]+M[n>>24&255]).toUpperCase()}function H(e,t,A){return Math.max(t,Math.min(A,e))}function I(e,t,A){return(1-A)*e+A*t}function D(e){return 0==(e&e-1)&&0!==e}function R(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}class P{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,A=this.y,n=e.elements;return this.x=n[0]*t+n[3]*A+n[6],this.y=n[1]*t+n[4]*A+n[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const A=this.length();return this.divideScalar(A||1).multiplyScalar(Math.max(e,Math.min(t,A)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,A=this.y-e.y;return t*t+A*A}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,A){return this.x=e.x+(t.x-e.x)*A,this.y=e.y+(t.y-e.y)*A,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,A){return void 0!==A&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const A=Math.cos(t),n=Math.sin(t),r=this.x-e.x,i=this.y-e.y;return this.x=r*A-i*n+e.x,this.y=r*n+i*A+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}P.prototype.isVector2=!0;class N{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,A,n,r,i,s,o,a){const c=this.elements;return c[0]=e,c[1]=n,c[2]=s,c[3]=t,c[4]=r,c[5]=o,c[6]=A,c[7]=i,c[8]=a,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,A=e.elements;return t[0]=A[0],t[1]=A[1],t[2]=A[2],t[3]=A[3],t[4]=A[4],t[5]=A[5],t[6]=A[6],t[7]=A[7],t[8]=A[8],this}extractBasis(e,t,A){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),A.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const A=e.elements,n=t.elements,r=this.elements,i=A[0],s=A[3],o=A[6],a=A[1],c=A[4],l=A[7],h=A[2],u=A[5],d=A[8],p=n[0],g=n[3],f=n[6],m=n[1],B=n[4],w=n[7],v=n[2],y=n[5],x=n[8];return r[0]=i*p+s*m+o*v,r[3]=i*g+s*B+o*y,r[6]=i*f+s*w+o*x,r[1]=a*p+c*m+l*v,r[4]=a*g+c*B+l*y,r[7]=a*f+c*w+l*x,r[2]=h*p+u*m+d*v,r[5]=h*g+u*B+d*y,r[8]=h*f+u*w+d*x,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],A=e[1],n=e[2],r=e[3],i=e[4],s=e[5],o=e[6],a=e[7],c=e[8];return t*i*c-t*s*a-A*r*c+A*s*o+n*r*a-n*i*o}invert(){const e=this.elements,t=e[0],A=e[1],n=e[2],r=e[3],i=e[4],s=e[5],o=e[6],a=e[7],c=e[8],l=c*i-s*a,h=s*o-c*r,u=a*r-i*o,d=t*l+A*h+n*u;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);const p=1/d;return e[0]=l*p,e[1]=(n*a-c*A)*p,e[2]=(s*A-n*i)*p,e[3]=h*p,e[4]=(c*t-n*o)*p,e[5]=(n*r-s*t)*p,e[6]=u*p,e[7]=(A*o-a*t)*p,e[8]=(i*t-A*r)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,A,n,r,i,s){const o=Math.cos(r),a=Math.sin(r);return this.set(A*o,A*a,-A*(o*i+a*s)+i+e,-n*a,n*o,-n*(-a*i+o*s)+s+t,0,0,1),this}scale(e,t){const A=this.elements;return A[0]*=e,A[3]*=e,A[6]*=e,A[1]*=t,A[4]*=t,A[7]*=t,this}rotate(e){const t=Math.cos(e),A=Math.sin(e),n=this.elements,r=n[0],i=n[3],s=n[6],o=n[1],a=n[4],c=n[7];return n[0]=t*r+A*o,n[3]=t*i+A*a,n[6]=t*s+A*c,n[1]=-A*r+t*o,n[4]=-A*i+t*a,n[7]=-A*s+t*c,this}translate(e,t){const A=this.elements;return A[0]+=e*A[2],A[3]+=e*A[5],A[6]+=e*A[8],A[1]+=t*A[2],A[4]+=t*A[5],A[7]+=t*A[8],this}equals(e){const t=this.elements,A=e.elements;for(let e=0;e<9;e++)if(t[e]!==A[e])return!1;return!0}fromArray(e,t=0){for(let A=0;A<9;A++)this.elements[A]=e[A+t];return this}toArray(e=[],t=0){const A=this.elements;return e[t]=A[0],e[t+1]=A[1],e[t+2]=A[2],e[t+3]=A[3],e[t+4]=A[4],e[t+5]=A[5],e[t+6]=A[6],e[t+7]=A[7],e[t+8]=A[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}let O;N.prototype.isMatrix3=!0;class G{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===O&&(O=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),O.width=e.width,O.height=e.height;const A=O.getContext("2d");e instanceof ImageData?A.putImageData(e,0,0):A.drawImage(e,0,0,e.width,e.height),t=O}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let V=0;class k extends Q{constructor(e=k.DEFAULT_IMAGE,t=k.DEFAULT_MAPPING,A=1001,n=1001,r=1006,i=1008,s=1023,o=1009,a=1,c=3e3){super(),Object.defineProperty(this,"id",{value:V++}),this.uuid=L(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=A,this.wrapT=n,this.magFilter=r,this.minFilter=i,this.anisotropy=a,this.format=s,this.internalFormat=null,this.type=o,this.offset=new P(0,0),this.repeat=new P(1,1),this.center=new P(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new N,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.version=0,this.onUpdate=null}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const A={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const n=this.image;if(void 0===n.uuid&&(n.uuid=L()),!t&&void 0===e.images[n.uuid]){let t;if(Array.isArray(n)){t=[];for(let e=0,A=n.length;e<A;e++)n[e].isDataTexture?t.push(K(n[e].image)):t.push(K(n[e]))}else t=K(n);e.images[n.uuid]={uuid:n.uuid,url:t}}A.image=n.uuid}return t||(e.textures[this.uuid]=A),A}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case t:e.x=e.x-Math.floor(e.x);break;case n:e.x=e.x<0?0:1;break;case r:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case t:e.y=e.y-Math.floor(e.y);break;case n:e.y=e.y<0?0:1;break;case r:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function K(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?G.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}k.DEFAULT_IMAGE=void 0,k.DEFAULT_MAPPING=300,k.prototype.isTexture=!0;class z{constructor(e=0,t=0,A=0,n=1){this.x=e,this.y=t,this.z=A,this.w=n}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,A,n){return this.x=e,this.y=t,this.z=A,this.w=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,A=this.y,n=this.z,r=this.w,i=e.elements;return this.x=i[0]*t+i[4]*A+i[8]*n+i[12]*r,this.y=i[1]*t+i[5]*A+i[9]*n+i[13]*r,this.z=i[2]*t+i[6]*A+i[10]*n+i[14]*r,this.w=i[3]*t+i[7]*A+i[11]*n+i[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,A,n,r;const i=.01,s=.1,o=e.elements,a=o[0],c=o[4],l=o[8],h=o[1],u=o[5],d=o[9],p=o[2],g=o[6],f=o[10];if(Math.abs(c-h)<i&&Math.abs(l-p)<i&&Math.abs(d-g)<i){if(Math.abs(c+h)<s&&Math.abs(l+p)<s&&Math.abs(d+g)<s&&Math.abs(a+u+f-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(a+1)/2,o=(u+1)/2,m=(f+1)/2,B=(c+h)/4,w=(l+p)/4,v=(d+g)/4;return e>o&&e>m?e<i?(A=0,n=.707106781,r=.707106781):(A=Math.sqrt(e),n=B/A,r=w/A):o>m?o<i?(A=.707106781,n=0,r=.707106781):(n=Math.sqrt(o),A=B/n,r=v/n):m<i?(A=.707106781,n=.707106781,r=0):(r=Math.sqrt(m),A=w/r,n=v/r),this.set(A,n,r,t),this}let m=Math.sqrt((g-d)*(g-d)+(l-p)*(l-p)+(h-c)*(h-c));return Math.abs(m)<.001&&(m=1),this.x=(g-d)/m,this.y=(l-p)/m,this.z=(h-c)/m,this.w=Math.acos((a+u+f-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const A=this.length();return this.divideScalar(A||1).multiplyScalar(Math.max(e,Math.min(t,A)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,A){return this.x=e.x+(t.x-e.x)*A,this.y=e.y+(t.y-e.y)*A,this.z=e.z+(t.z-e.z)*A,this.w=e.w+(t.w-e.w)*A,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,A){return void 0!==A&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}z.prototype.isVector4=!0;class W extends Q{constructor(e,t,A={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new z(0,0,e,t),this.scissorTest=!1,this.viewport=new z(0,0,e,t),this.texture=new k(void 0,A.mapping,A.wrapS,A.wrapT,A.magFilter,A.minFilter,A.format,A.type,A.anisotropy,A.encoding),this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==A.generateMipmaps&&A.generateMipmaps,this.texture.minFilter=void 0!==A.minFilter?A.minFilter:s,this.depthBuffer=void 0===A.depthBuffer||A.depthBuffer,this.stencilBuffer=void 0!==A.stencilBuffer&&A.stencilBuffer,this.depthTexture=void 0!==A.depthTexture?A.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,A=1){this.width===e&&this.height===t&&this.depth===A||(this.width=e,this.height=t,this.depth=A,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=A,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}W.prototype.isWebGLRenderTarget=!0,class extends W{constructor(e,t,A){super(e,t);const n=this.texture;this.texture=[];for(let e=0;e<A;e++)this.texture[e]=n.clone()}setSize(e,t,A=1){if(this.width!==e||this.height!==t||this.depth!==A){this.width=e,this.height=t,this.depth=A;for(let n=0,r=this.texture.length;n<r;n++)this.texture[n].image.width=e,this.texture[n].image.height=t,this.texture[n].image.depth=A;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,A=e.texture.length;t<A;t++)this.texture[t]=e.texture[t].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class X extends W{constructor(e,t,A){super(e,t,A),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}X.prototype.isWebGLMultisampleRenderTarget=!0;class Y{constructor(e=0,t=0,A=0,n=1){this._x=e,this._y=t,this._z=A,this._w=n}static slerp(e,t,A,n){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),A.slerpQuaternions(e,t,n)}static slerpFlat(e,t,A,n,r,i,s){let o=A[n+0],a=A[n+1],c=A[n+2],l=A[n+3];const h=r[i+0],u=r[i+1],d=r[i+2],p=r[i+3];if(0===s)return e[t+0]=o,e[t+1]=a,e[t+2]=c,void(e[t+3]=l);if(1===s)return e[t+0]=h,e[t+1]=u,e[t+2]=d,void(e[t+3]=p);if(l!==p||o!==h||a!==u||c!==d){let e=1-s;const t=o*h+a*u+c*d+l*p,A=t>=0?1:-1,n=1-t*t;if(n>Number.EPSILON){const r=Math.sqrt(n),i=Math.atan2(r,t*A);e=Math.sin(e*i)/r,s=Math.sin(s*i)/r}const r=s*A;if(o=o*e+h*r,a=a*e+u*r,c=c*e+d*r,l=l*e+p*r,e===1-s){const e=1/Math.sqrt(o*o+a*a+c*c+l*l);o*=e,a*=e,c*=e,l*=e}}e[t]=o,e[t+1]=a,e[t+2]=c,e[t+3]=l}static multiplyQuaternionsFlat(e,t,A,n,r,i){const s=A[n],o=A[n+1],a=A[n+2],c=A[n+3],l=r[i],h=r[i+1],u=r[i+2],d=r[i+3];return e[t]=s*d+c*l+o*u-a*h,e[t+1]=o*d+c*h+a*l-s*u,e[t+2]=a*d+c*u+s*h-o*l,e[t+3]=c*d-s*l-o*h-a*u,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,A,n){return this._x=e,this._y=t,this._z=A,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const A=e._x,n=e._y,r=e._z,i=e._order,s=Math.cos,o=Math.sin,a=s(A/2),c=s(n/2),l=s(r/2),h=o(A/2),u=o(n/2),d=o(r/2);switch(i){case"XYZ":this._x=h*c*l+a*u*d,this._y=a*u*l-h*c*d,this._z=a*c*d+h*u*l,this._w=a*c*l-h*u*d;break;case"YXZ":this._x=h*c*l+a*u*d,this._y=a*u*l-h*c*d,this._z=a*c*d-h*u*l,this._w=a*c*l+h*u*d;break;case"ZXY":this._x=h*c*l-a*u*d,this._y=a*u*l+h*c*d,this._z=a*c*d+h*u*l,this._w=a*c*l-h*u*d;break;case"ZYX":this._x=h*c*l-a*u*d,this._y=a*u*l+h*c*d,this._z=a*c*d-h*u*l,this._w=a*c*l+h*u*d;break;case"YZX":this._x=h*c*l+a*u*d,this._y=a*u*l+h*c*d,this._z=a*c*d-h*u*l,this._w=a*c*l-h*u*d;break;case"XZY":this._x=h*c*l-a*u*d,this._y=a*u*l-h*c*d,this._z=a*c*d+h*u*l,this._w=a*c*l+h*u*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+i)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const A=t/2,n=Math.sin(A);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(A),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,A=t[0],n=t[4],r=t[8],i=t[1],s=t[5],o=t[9],a=t[2],c=t[6],l=t[10],h=A+s+l;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-o)*e,this._y=(r-a)*e,this._z=(i-n)*e}else if(A>s&&A>l){const e=2*Math.sqrt(1+A-s-l);this._w=(c-o)/e,this._x=.25*e,this._y=(n+i)/e,this._z=(r+a)/e}else if(s>l){const e=2*Math.sqrt(1+s-A-l);this._w=(r-a)/e,this._x=(n+i)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+l-A-s);this._w=(i-n)/e,this._x=(r+a)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let A=e.dot(t)+1;return A<Number.EPSILON?(A=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=A):(this._x=0,this._y=-e.z,this._z=e.y,this._w=A)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=A),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(H(this.dot(e),-1,1)))}rotateTowards(e,t){const A=this.angleTo(e);if(0===A)return this;const n=Math.min(1,t/A);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const A=e._x,n=e._y,r=e._z,i=e._w,s=t._x,o=t._y,a=t._z,c=t._w;return this._x=A*c+i*s+n*a-r*o,this._y=n*c+i*o+r*s-A*a,this._z=r*c+i*a+A*o-n*s,this._w=i*c-A*s-n*o-r*a,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const A=this._x,n=this._y,r=this._z,i=this._w;let s=i*e._w+A*e._x+n*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=i,this._x=A,this._y=n,this._z=r,this;const o=1-s*s;if(o<=Number.EPSILON){const e=1-t;return this._w=e*i+t*this._w,this._x=e*A+t*this._x,this._y=e*n+t*this._y,this._z=e*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const a=Math.sqrt(o),c=Math.atan2(a,s),l=Math.sin((1-t)*c)/a,h=Math.sin(t*c)/a;return this._w=i*l+this._w*h,this._x=A*l+this._x*h,this._y=n*l+this._y*h,this._z=r*l+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,A){this.copy(e).slerp(t,A)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Y.prototype.isQuaternion=!0;class J{constructor(e=0,t=0,A=0){this.x=e,this.y=t,this.z=A}set(e,t,A){return void 0===A&&(A=this.z),this.x=e,this.y=t,this.z=A,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Z.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Z.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,A=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[3]*A+r[6]*n,this.y=r[1]*t+r[4]*A+r[7]*n,this.z=r[2]*t+r[5]*A+r[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,A=this.y,n=this.z,r=e.elements,i=1/(r[3]*t+r[7]*A+r[11]*n+r[15]);return this.x=(r[0]*t+r[4]*A+r[8]*n+r[12])*i,this.y=(r[1]*t+r[5]*A+r[9]*n+r[13])*i,this.z=(r[2]*t+r[6]*A+r[10]*n+r[14])*i,this}applyQuaternion(e){const t=this.x,A=this.y,n=this.z,r=e.x,i=e.y,s=e.z,o=e.w,a=o*t+i*n-s*A,c=o*A+s*t-r*n,l=o*n+r*A-i*t,h=-r*t-i*A-s*n;return this.x=a*o+h*-r+c*-s-l*-i,this.y=c*o+h*-i+l*-r-a*-s,this.z=l*o+h*-s+a*-i-c*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,A=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[4]*A+r[8]*n,this.y=r[1]*t+r[5]*A+r[9]*n,this.z=r[2]*t+r[6]*A+r[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const A=this.length();return this.divideScalar(A||1).multiplyScalar(Math.max(e,Math.min(t,A)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,A){return this.x=e.x+(t.x-e.x)*A,this.y=e.y+(t.y-e.y)*A,this.z=e.z+(t.z-e.z)*A,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const A=e.x,n=e.y,r=e.z,i=t.x,s=t.y,o=t.z;return this.x=n*o-r*s,this.y=r*i-A*o,this.z=A*s-n*i,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const A=e.dot(this)/t;return this.copy(e).multiplyScalar(A)}projectOnPlane(e){return j.copy(this).projectOnVector(e),this.sub(j)}reflect(e){return this.sub(j.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const A=this.dot(e)/t;return Math.acos(H(A,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,A=this.y-e.y,n=this.z-e.z;return t*t+A*A+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,A){const n=Math.sin(t)*e;return this.x=n*Math.sin(A),this.y=Math.cos(t)*e,this.z=n*Math.cos(A),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,A){return this.x=e*Math.sin(t),this.y=A,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),A=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=A,this.z=n,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,A){return void 0!==A&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}J.prototype.isVector3=!0;const j=new J,Z=new Y;class q{constructor(e=new J(1/0,1/0,1/0),t=new J(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,A=1/0,n=1/0,r=-1/0,i=-1/0,s=-1/0;for(let o=0,a=e.length;o<a;o+=3){const a=e[o],c=e[o+1],l=e[o+2];a<t&&(t=a),c<A&&(A=c),l<n&&(n=l),a>r&&(r=a),c>i&&(i=c),l>s&&(s=l)}return this.min.set(t,A,n),this.max.set(r,i,s),this}setFromBufferAttribute(e){let t=1/0,A=1/0,n=1/0,r=-1/0,i=-1/0,s=-1/0;for(let o=0,a=e.count;o<a;o++){const a=e.getX(o),c=e.getY(o),l=e.getZ(o);a<t&&(t=a),c<A&&(A=c),l<n&&(n=l),a>r&&(r=a),c>i&&(i=c),l>s&&(s=l)}return this.min.set(t,A,n),this.max.set(r,i,s),this}setFromPoints(e){this.makeEmpty();for(let t=0,A=e.length;t<A;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const A=ee.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(A),this.max.copy(e).add(A),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),te.copy(t.boundingBox),te.applyMatrix4(e.matrixWorld),this.union(te));const A=e.children;for(let e=0,t=A.length;e<t;e++)this.expandByObject(A[e]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ee),ee.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,A;return e.normal.x>0?(t=e.normal.x*this.min.x,A=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,A=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,A+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,A+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,A+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,A+=e.normal.z*this.min.z),t<=-e.constant&&A>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ae),ce.subVectors(this.max,ae),Ae.subVectors(e.a,ae),ne.subVectors(e.b,ae),re.subVectors(e.c,ae),ie.subVectors(ne,Ae),se.subVectors(re,ne),oe.subVectors(Ae,re);let t=[0,-ie.z,ie.y,0,-se.z,se.y,0,-oe.z,oe.y,ie.z,0,-ie.x,se.z,0,-se.x,oe.z,0,-oe.x,-ie.y,ie.x,0,-se.y,se.x,0,-oe.y,oe.x,0];return!!ue(t,Ae,ne,re,ce)&&(t=[1,0,0,0,1,0,0,0,1],!!ue(t,Ae,ne,re,ce)&&(le.crossVectors(ie,se),t=[le.x,le.y,le.z],ue(t,Ae,ne,re,ce)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return ee.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(ee).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||($[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),$[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),$[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),$[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),$[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),$[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),$[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),$[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints($)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}q.prototype.isBox3=!0;const $=[new J,new J,new J,new J,new J,new J,new J,new J],ee=new J,te=new q,Ae=new J,ne=new J,re=new J,ie=new J,se=new J,oe=new J,ae=new J,ce=new J,le=new J,he=new J;function ue(e,t,A,n,r){for(let i=0,s=e.length-3;i<=s;i+=3){he.fromArray(e,i);const s=r.x*Math.abs(he.x)+r.y*Math.abs(he.y)+r.z*Math.abs(he.z),o=t.dot(he),a=A.dot(he),c=n.dot(he);if(Math.max(-Math.max(o,a,c),Math.min(o,a,c))>s)return!1}return!0}const de=new q,pe=new J,ge=new J,fe=new J;class me{constructor(e=new J,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const A=this.center;void 0!==t?A.copy(t):de.setFromPoints(e).getCenter(A);let n=0;for(let t=0,r=e.length;t<r;t++)n=Math.max(n,A.distanceToSquared(e[t]));return this.radius=Math.sqrt(n),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const A=this.center.distanceToSquared(e);return t.copy(e),A>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){fe.subVectors(e,this.center);const t=fe.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),A=.5*(e-this.radius);this.center.add(fe.multiplyScalar(A/e)),this.radius+=A}return this}union(e){return ge.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(pe.copy(e.center).add(ge)),this.expandByPoint(pe.copy(e.center).sub(ge)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Be=new J,we=new J,ve=new J,ye=new J,xe=new J,Ce=new J,be=new J;class _e{constructor(e=new J,t=new J(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Be)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const A=t.dot(this.direction);return A<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(A).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Be.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Be.copy(this.direction).multiplyScalar(t).add(this.origin),Be.distanceToSquared(e))}distanceSqToSegment(e,t,A,n){we.copy(e).add(t).multiplyScalar(.5),ve.copy(t).sub(e).normalize(),ye.copy(this.origin).sub(we);const r=.5*e.distanceTo(t),i=-this.direction.dot(ve),s=ye.dot(this.direction),o=-ye.dot(ve),a=ye.lengthSq(),c=Math.abs(1-i*i);let l,h,u,d;if(c>0)if(l=i*o-s,h=i*s-o,d=r*c,l>=0)if(h>=-d)if(h<=d){const e=1/c;l*=e,h*=e,u=l*(l+i*h+2*s)+h*(i*l+h+2*o)+a}else h=r,l=Math.max(0,-(i*h+s)),u=-l*l+h*(h+2*o)+a;else h=-r,l=Math.max(0,-(i*h+s)),u=-l*l+h*(h+2*o)+a;else h<=-d?(l=Math.max(0,-(-i*r+s)),h=l>0?-r:Math.min(Math.max(-r,-o),r),u=-l*l+h*(h+2*o)+a):h<=d?(l=0,h=Math.min(Math.max(-r,-o),r),u=h*(h+2*o)+a):(l=Math.max(0,-(i*r+s)),h=l>0?r:Math.min(Math.max(-r,-o),r),u=-l*l+h*(h+2*o)+a);else h=i>0?-r:r,l=Math.max(0,-(i*h+s)),u=-l*l+h*(h+2*o)+a;return A&&A.copy(this.direction).multiplyScalar(l).add(this.origin),n&&n.copy(ve).multiplyScalar(h).add(we),u}intersectSphere(e,t){Be.subVectors(e.center,this.origin);const A=Be.dot(this.direction),n=Be.dot(Be)-A*A,r=e.radius*e.radius;if(n>r)return null;const i=Math.sqrt(r-n),s=A-i,o=A+i;return s<0&&o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const A=-(this.origin.dot(e.normal)+e.constant)/t;return A>=0?A:null}intersectPlane(e,t){const A=this.distanceToPlane(e);return null===A?null:this.at(A,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let A,n,r,i,s,o;const a=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,h=this.origin;return a>=0?(A=(e.min.x-h.x)*a,n=(e.max.x-h.x)*a):(A=(e.max.x-h.x)*a,n=(e.min.x-h.x)*a),c>=0?(r=(e.min.y-h.y)*c,i=(e.max.y-h.y)*c):(r=(e.max.y-h.y)*c,i=(e.min.y-h.y)*c),A>i||r>n?null:((r>A||A!=A)&&(A=r),(i<n||n!=n)&&(n=i),l>=0?(s=(e.min.z-h.z)*l,o=(e.max.z-h.z)*l):(s=(e.max.z-h.z)*l,o=(e.min.z-h.z)*l),A>o||s>n?null:((s>A||A!=A)&&(A=s),(o<n||n!=n)&&(n=o),n<0?null:this.at(A>=0?A:n,t)))}intersectsBox(e){return null!==this.intersectBox(e,Be)}intersectTriangle(e,t,A,n,r){xe.subVectors(t,e),Ce.subVectors(A,e),be.crossVectors(xe,Ce);let i,s=this.direction.dot(be);if(s>0){if(n)return null;i=1}else{if(!(s<0))return null;i=-1,s=-s}ye.subVectors(this.origin,e);const o=i*this.direction.dot(Ce.crossVectors(ye,Ce));if(o<0)return null;const a=i*this.direction.dot(xe.cross(ye));if(a<0)return null;if(o+a>s)return null;const c=-i*ye.dot(be);return c<0?null:this.at(c/s,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Ee{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,A,n,r,i,s,o,a,c,l,h,u,d,p,g){const f=this.elements;return f[0]=e,f[4]=t,f[8]=A,f[12]=n,f[1]=r,f[5]=i,f[9]=s,f[13]=o,f[2]=a,f[6]=c,f[10]=l,f[14]=h,f[3]=u,f[7]=d,f[11]=p,f[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ee).fromArray(this.elements)}copy(e){const t=this.elements,A=e.elements;return t[0]=A[0],t[1]=A[1],t[2]=A[2],t[3]=A[3],t[4]=A[4],t[5]=A[5],t[6]=A[6],t[7]=A[7],t[8]=A[8],t[9]=A[9],t[10]=A[10],t[11]=A[11],t[12]=A[12],t[13]=A[13],t[14]=A[14],t[15]=A[15],this}copyPosition(e){const t=this.elements,A=e.elements;return t[12]=A[12],t[13]=A[13],t[14]=A[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,A){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),A.setFromMatrixColumn(this,2),this}makeBasis(e,t,A){return this.set(e.x,t.x,A.x,0,e.y,t.y,A.y,0,e.z,t.z,A.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,A=e.elements,n=1/Ue.setFromMatrixColumn(e,0).length(),r=1/Ue.setFromMatrixColumn(e,1).length(),i=1/Ue.setFromMatrixColumn(e,2).length();return t[0]=A[0]*n,t[1]=A[1]*n,t[2]=A[2]*n,t[3]=0,t[4]=A[4]*r,t[5]=A[5]*r,t[6]=A[6]*r,t[7]=0,t[8]=A[8]*i,t[9]=A[9]*i,t[10]=A[10]*i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,A=e.x,n=e.y,r=e.z,i=Math.cos(A),s=Math.sin(A),o=Math.cos(n),a=Math.sin(n),c=Math.cos(r),l=Math.sin(r);if("XYZ"===e.order){const e=i*c,A=i*l,n=s*c,r=s*l;t[0]=o*c,t[4]=-o*l,t[8]=a,t[1]=A+n*a,t[5]=e-r*a,t[9]=-s*o,t[2]=r-e*a,t[6]=n+A*a,t[10]=i*o}else if("YXZ"===e.order){const e=o*c,A=o*l,n=a*c,r=a*l;t[0]=e+r*s,t[4]=n*s-A,t[8]=i*a,t[1]=i*l,t[5]=i*c,t[9]=-s,t[2]=A*s-n,t[6]=r+e*s,t[10]=i*o}else if("ZXY"===e.order){const e=o*c,A=o*l,n=a*c,r=a*l;t[0]=e-r*s,t[4]=-i*l,t[8]=n+A*s,t[1]=A+n*s,t[5]=i*c,t[9]=r-e*s,t[2]=-i*a,t[6]=s,t[10]=i*o}else if("ZYX"===e.order){const e=i*c,A=i*l,n=s*c,r=s*l;t[0]=o*c,t[4]=n*a-A,t[8]=e*a+r,t[1]=o*l,t[5]=r*a+e,t[9]=A*a-n,t[2]=-a,t[6]=s*o,t[10]=i*o}else if("YZX"===e.order){const e=i*o,A=i*a,n=s*o,r=s*a;t[0]=o*c,t[4]=r-e*l,t[8]=n*l+A,t[1]=l,t[5]=i*c,t[9]=-s*c,t[2]=-a*c,t[6]=A*l+n,t[10]=e-r*l}else if("XZY"===e.order){const e=i*o,A=i*a,n=s*o,r=s*a;t[0]=o*c,t[4]=-l,t[8]=a*c,t[1]=e*l+r,t[5]=i*c,t[9]=A*l-n,t[2]=n*l-A,t[6]=s*c,t[10]=r*l+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Qe,e,Me)}lookAt(e,t,A){const n=this.elements;return Le.subVectors(e,t),0===Le.lengthSq()&&(Le.z=1),Le.normalize(),Se.crossVectors(A,Le),0===Se.lengthSq()&&(1===Math.abs(A.z)?Le.x+=1e-4:Le.z+=1e-4,Le.normalize(),Se.crossVectors(A,Le)),Se.normalize(),Te.crossVectors(Le,Se),n[0]=Se.x,n[4]=Te.x,n[8]=Le.x,n[1]=Se.y,n[5]=Te.y,n[9]=Le.y,n[2]=Se.z,n[6]=Te.z,n[10]=Le.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const A=e.elements,n=t.elements,r=this.elements,i=A[0],s=A[4],o=A[8],a=A[12],c=A[1],l=A[5],h=A[9],u=A[13],d=A[2],p=A[6],g=A[10],f=A[14],m=A[3],B=A[7],w=A[11],v=A[15],y=n[0],x=n[4],C=n[8],b=n[12],_=n[1],E=n[5],U=n[9],F=n[13],Q=n[2],M=n[6],S=n[10],T=n[14],L=n[3],H=n[7],I=n[11],D=n[15];return r[0]=i*y+s*_+o*Q+a*L,r[4]=i*x+s*E+o*M+a*H,r[8]=i*C+s*U+o*S+a*I,r[12]=i*b+s*F+o*T+a*D,r[1]=c*y+l*_+h*Q+u*L,r[5]=c*x+l*E+h*M+u*H,r[9]=c*C+l*U+h*S+u*I,r[13]=c*b+l*F+h*T+u*D,r[2]=d*y+p*_+g*Q+f*L,r[6]=d*x+p*E+g*M+f*H,r[10]=d*C+p*U+g*S+f*I,r[14]=d*b+p*F+g*T+f*D,r[3]=m*y+B*_+w*Q+v*L,r[7]=m*x+B*E+w*M+v*H,r[11]=m*C+B*U+w*S+v*I,r[15]=m*b+B*F+w*T+v*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],A=e[4],n=e[8],r=e[12],i=e[1],s=e[5],o=e[9],a=e[13],c=e[2],l=e[6],h=e[10],u=e[14];return e[3]*(+r*o*l-n*a*l-r*s*h+A*a*h+n*s*u-A*o*u)+e[7]*(+t*o*u-t*a*h+r*i*h-n*i*u+n*a*c-r*o*c)+e[11]*(+t*a*l-t*s*u-r*i*l+A*i*u+r*s*c-A*a*c)+e[15]*(-n*s*c-t*o*l+t*s*h+n*i*l-A*i*h+A*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,A){const n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=A),this}invert(){const e=this.elements,t=e[0],A=e[1],n=e[2],r=e[3],i=e[4],s=e[5],o=e[6],a=e[7],c=e[8],l=e[9],h=e[10],u=e[11],d=e[12],p=e[13],g=e[14],f=e[15],m=l*g*a-p*h*a+p*o*u-s*g*u-l*o*f+s*h*f,B=d*h*a-c*g*a-d*o*u+i*g*u+c*o*f-i*h*f,w=c*p*a-d*l*a+d*s*u-i*p*u-c*s*f+i*l*f,v=d*l*o-c*p*o-d*s*h+i*p*h+c*s*g-i*l*g,y=t*m+A*B+n*w+r*v;if(0===y)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/y;return e[0]=m*x,e[1]=(p*h*r-l*g*r-p*n*u+A*g*u+l*n*f-A*h*f)*x,e[2]=(s*g*r-p*o*r+p*n*a-A*g*a-s*n*f+A*o*f)*x,e[3]=(l*o*r-s*h*r-l*n*a+A*h*a+s*n*u-A*o*u)*x,e[4]=B*x,e[5]=(c*g*r-d*h*r+d*n*u-t*g*u-c*n*f+t*h*f)*x,e[6]=(d*o*r-i*g*r-d*n*a+t*g*a+i*n*f-t*o*f)*x,e[7]=(i*h*r-c*o*r+c*n*a-t*h*a-i*n*u+t*o*u)*x,e[8]=w*x,e[9]=(d*l*r-c*p*r-d*A*u+t*p*u+c*A*f-t*l*f)*x,e[10]=(i*p*r-d*s*r+d*A*a-t*p*a-i*A*f+t*s*f)*x,e[11]=(c*s*r-i*l*r-c*A*a+t*l*a+i*A*u-t*s*u)*x,e[12]=v*x,e[13]=(c*p*n-d*l*n+d*A*h-t*p*h-c*A*g+t*l*g)*x,e[14]=(d*s*n-i*p*n-d*A*o+t*p*o+i*A*g-t*s*g)*x,e[15]=(i*l*n-c*s*n+c*A*o-t*l*o-i*A*h+t*s*h)*x,this}scale(e){const t=this.elements,A=e.x,n=e.y,r=e.z;return t[0]*=A,t[4]*=n,t[8]*=r,t[1]*=A,t[5]*=n,t[9]*=r,t[2]*=A,t[6]*=n,t[10]*=r,t[3]*=A,t[7]*=n,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],A=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,A,n))}makeTranslation(e,t,A){return this.set(1,0,0,e,0,1,0,t,0,0,1,A,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),A=Math.sin(e);return this.set(1,0,0,0,0,t,-A,0,0,A,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),A=Math.sin(e);return this.set(t,0,A,0,0,1,0,0,-A,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),A=Math.sin(e);return this.set(t,-A,0,0,A,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const A=Math.cos(t),n=Math.sin(t),r=1-A,i=e.x,s=e.y,o=e.z,a=r*i,c=r*s;return this.set(a*i+A,a*s-n*o,a*o+n*s,0,a*s+n*o,c*s+A,c*o-n*i,0,a*o-n*s,c*o+n*i,r*o*o+A,0,0,0,0,1),this}makeScale(e,t,A){return this.set(e,0,0,0,0,t,0,0,0,0,A,0,0,0,0,1),this}makeShear(e,t,A,n,r,i){return this.set(1,A,r,0,e,1,i,0,t,n,1,0,0,0,0,1),this}compose(e,t,A){const n=this.elements,r=t._x,i=t._y,s=t._z,o=t._w,a=r+r,c=i+i,l=s+s,h=r*a,u=r*c,d=r*l,p=i*c,g=i*l,f=s*l,m=o*a,B=o*c,w=o*l,v=A.x,y=A.y,x=A.z;return n[0]=(1-(p+f))*v,n[1]=(u+w)*v,n[2]=(d-B)*v,n[3]=0,n[4]=(u-w)*y,n[5]=(1-(h+f))*y,n[6]=(g+m)*y,n[7]=0,n[8]=(d+B)*x,n[9]=(g-m)*x,n[10]=(1-(h+p))*x,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,t,A){const n=this.elements;let r=Ue.set(n[0],n[1],n[2]).length();const i=Ue.set(n[4],n[5],n[6]).length(),s=Ue.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),e.x=n[12],e.y=n[13],e.z=n[14],Fe.copy(this);const o=1/r,a=1/i,c=1/s;return Fe.elements[0]*=o,Fe.elements[1]*=o,Fe.elements[2]*=o,Fe.elements[4]*=a,Fe.elements[5]*=a,Fe.elements[6]*=a,Fe.elements[8]*=c,Fe.elements[9]*=c,Fe.elements[10]*=c,t.setFromRotationMatrix(Fe),A.x=r,A.y=i,A.z=s,this}makePerspective(e,t,A,n,r,i){void 0===i&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const s=this.elements,o=2*r/(t-e),a=2*r/(A-n),c=(t+e)/(t-e),l=(A+n)/(A-n),h=-(i+r)/(i-r),u=-2*i*r/(i-r);return s[0]=o,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=a,s[9]=l,s[13]=0,s[2]=0,s[6]=0,s[10]=h,s[14]=u,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,A,n,r,i){const s=this.elements,o=1/(t-e),a=1/(A-n),c=1/(i-r),l=(t+e)*o,h=(A+n)*a,u=(i+r)*c;return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-l,s[1]=0,s[5]=2*a,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-u,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){const t=this.elements,A=e.elements;for(let e=0;e<16;e++)if(t[e]!==A[e])return!1;return!0}fromArray(e,t=0){for(let A=0;A<16;A++)this.elements[A]=e[A+t];return this}toArray(e=[],t=0){const A=this.elements;return e[t]=A[0],e[t+1]=A[1],e[t+2]=A[2],e[t+3]=A[3],e[t+4]=A[4],e[t+5]=A[5],e[t+6]=A[6],e[t+7]=A[7],e[t+8]=A[8],e[t+9]=A[9],e[t+10]=A[10],e[t+11]=A[11],e[t+12]=A[12],e[t+13]=A[13],e[t+14]=A[14],e[t+15]=A[15],e}}Ee.prototype.isMatrix4=!0;const Ue=new J,Fe=new Ee,Qe=new J(0,0,0),Me=new J(1,1,1),Se=new J,Te=new J,Le=new J,He=new Ee,Ie=new Y;class De{constructor(e=0,t=0,A=0,n=De.DefaultOrder){this._x=e,this._y=t,this._z=A,this._order=n}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,A,n=this._order){return this._x=e,this._y=t,this._z=A,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,A=!0){const n=e.elements,r=n[0],i=n[4],s=n[8],o=n[1],a=n[5],c=n[9],l=n[2],h=n[6],u=n[10];switch(t){case"XYZ":this._y=Math.asin(H(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,u),this._z=Math.atan2(-i,r)):(this._x=Math.atan2(h,a),this._z=0);break;case"YXZ":this._x=Math.asin(-H(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,u),this._z=Math.atan2(o,a)):(this._y=Math.atan2(-l,r),this._z=0);break;case"ZXY":this._x=Math.asin(H(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-l,u),this._z=Math.atan2(-i,a)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-H(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(h,u),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-i,a));break;case"YZX":this._z=Math.asin(H(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,a),this._y=Math.atan2(-l,r)):(this._x=0,this._y=Math.atan2(s,u));break;case"XZY":this._z=Math.asin(-H(i,-1,1)),Math.abs(i)<.9999999?(this._x=Math.atan2(h,a),this._y=Math.atan2(s,r)):(this._x=Math.atan2(-c,u),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===A&&this._onChangeCallback(),this}setFromQuaternion(e,t,A){return He.makeRotationFromQuaternion(e),this.setFromRotationMatrix(He,t,A)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Ie.setFromEuler(this),this.setFromQuaternion(Ie,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new J(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}De.prototype.isEuler=!0,De.DefaultOrder="XYZ",De.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Re{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}}let Pe=0;const Ne=new J,Oe=new Y,Ge=new Ee,Ve=new J,ke=new J,Ke=new J,ze=new Y,We=new J(1,0,0),Xe=new J(0,1,0),Ye=new J(0,0,1),Je={type:"added"},je={type:"removed"};class Ze extends Q{constructor(){super(),Object.defineProperty(this,"id",{value:Pe++}),this.uuid=L(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ze.DefaultUp.clone();const e=new J,t=new De,A=new Y,n=new J(1,1,1);t._onChange((function(){A.setFromEuler(t,!1)})),A._onChange((function(){t.setFromQuaternion(A,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:A},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new Ee},normalMatrix:{value:new N}}),this.matrix=new Ee,this.matrixWorld=new Ee,this.matrixAutoUpdate=Ze.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Re,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Oe.setFromAxisAngle(e,t),this.quaternion.multiply(Oe),this}rotateOnWorldAxis(e,t){return Oe.setFromAxisAngle(e,t),this.quaternion.premultiply(Oe),this}rotateX(e){return this.rotateOnAxis(We,e)}rotateY(e){return this.rotateOnAxis(Xe,e)}rotateZ(e){return this.rotateOnAxis(Ye,e)}translateOnAxis(e,t){return Ne.copy(e).applyQuaternion(this.quaternion),this.position.add(Ne.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(We,e)}translateY(e){return this.translateOnAxis(Xe,e)}translateZ(e){return this.translateOnAxis(Ye,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Ge.copy(this.matrixWorld).invert())}lookAt(e,t,A){e.isVector3?Ve.copy(e):Ve.set(e,t,A);const n=this.parent;this.updateWorldMatrix(!0,!1),ke.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ge.lookAt(ke,Ve,this.up):Ge.lookAt(Ve,ke,this.up),this.quaternion.setFromRotationMatrix(Ge),n&&(Ge.extractRotation(n.matrixWorld),Oe.setFromRotationMatrix(Ge),this.quaternion.premultiply(Oe.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Je)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(je)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(je)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Ge.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Ge.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ge),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let A=0,n=this.children.length;A<n;A++){const n=this.children[A].getObjectByProperty(e,t);if(void 0!==n)return n}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ke,e,Ke),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ke,ze,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let A=0,n=t.length;A<n;A++)t[A].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let A=0,n=t.length;A<n;A++)t[A].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let A=0,n=t.length;A<n;A++)t[A].updateMatrixWorld(e)}updateWorldMatrix(e,t){const A=this.parent;if(!0===e&&null!==A&&A.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,A=e.length;t<A;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,A={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},A.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const n={};function r(t,A){return void 0===t[A.uuid]&&(t[A.uuid]=A.toJSON(e)),A.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(n.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(n.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const A=t.shapes;if(Array.isArray(A))for(let t=0,n=A.length;t<n;t++){const n=A[t];r(e.shapes,n)}else r(e.shapes,A)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let A=0,n=this.material.length;A<n;A++)t.push(r(e.materials,this.material[A]));n.material=t}else n.material=r(e.materials,this.material);if(this.children.length>0){n.children=[];for(let t=0;t<this.children.length;t++)n.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){n.animations=[];for(let t=0;t<this.animations.length;t++){const A=this.animations[t];n.animations.push(r(e.animations,A))}}if(t){const t=i(e.geometries),n=i(e.materials),r=i(e.textures),s=i(e.images),o=i(e.shapes),a=i(e.skeletons),c=i(e.animations);t.length>0&&(A.geometries=t),n.length>0&&(A.materials=n),r.length>0&&(A.textures=r),s.length>0&&(A.images=s),o.length>0&&(A.shapes=o),a.length>0&&(A.skeletons=a),c.length>0&&(A.animations=c)}return A.object=n,A;function i(e){const t=[];for(const A in e){const n=e[A];delete n.metadata,t.push(n)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const A=e.children[t];this.add(A.clone())}return this}}Ze.DefaultUp=new J(0,1,0),Ze.DefaultMatrixAutoUpdate=!0,Ze.prototype.isObject3D=!0;const qe=new J,$e=new J,et=new J,tt=new J,At=new J,nt=new J,rt=new J,it=new J,st=new J,ot=new J;class at{constructor(e=new J,t=new J,A=new J){this.a=e,this.b=t,this.c=A}static getNormal(e,t,A,n){n.subVectors(A,t),qe.subVectors(e,t),n.cross(qe);const r=n.lengthSq();return r>0?n.multiplyScalar(1/Math.sqrt(r)):n.set(0,0,0)}static getBarycoord(e,t,A,n,r){qe.subVectors(n,t),$e.subVectors(A,t),et.subVectors(e,t);const i=qe.dot(qe),s=qe.dot($e),o=qe.dot(et),a=$e.dot($e),c=$e.dot(et),l=i*a-s*s;if(0===l)return r.set(-2,-1,-1);const h=1/l,u=(a*o-s*c)*h,d=(i*c-s*o)*h;return r.set(1-u-d,d,u)}static containsPoint(e,t,A,n){return this.getBarycoord(e,t,A,n,tt),tt.x>=0&&tt.y>=0&&tt.x+tt.y<=1}static getUV(e,t,A,n,r,i,s,o){return this.getBarycoord(e,t,A,n,tt),o.set(0,0),o.addScaledVector(r,tt.x),o.addScaledVector(i,tt.y),o.addScaledVector(s,tt.z),o}static isFrontFacing(e,t,A,n){return qe.subVectors(A,t),$e.subVectors(e,t),qe.cross($e).dot(n)<0}set(e,t,A){return this.a.copy(e),this.b.copy(t),this.c.copy(A),this}setFromPointsAndIndices(e,t,A,n){return this.a.copy(e[t]),this.b.copy(e[A]),this.c.copy(e[n]),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return qe.subVectors(this.c,this.b),$e.subVectors(this.a,this.b),.5*qe.cross($e).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return at.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return at.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,A,n,r){return at.getUV(e,this.a,this.b,this.c,t,A,n,r)}containsPoint(e){return at.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return at.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const A=this.a,n=this.b,r=this.c;let i,s;At.subVectors(n,A),nt.subVectors(r,A),it.subVectors(e,A);const o=At.dot(it),a=nt.dot(it);if(o<=0&&a<=0)return t.copy(A);st.subVectors(e,n);const c=At.dot(st),l=nt.dot(st);if(c>=0&&l<=c)return t.copy(n);const h=o*l-c*a;if(h<=0&&o>=0&&c<=0)return i=o/(o-c),t.copy(A).addScaledVector(At,i);ot.subVectors(e,r);const u=At.dot(ot),d=nt.dot(ot);if(d>=0&&u<=d)return t.copy(r);const p=u*a-o*d;if(p<=0&&a>=0&&d<=0)return s=a/(a-d),t.copy(A).addScaledVector(nt,s);const g=c*d-u*l;if(g<=0&&l-c>=0&&u-d>=0)return rt.subVectors(r,n),s=(l-c)/(l-c+(u-d)),t.copy(n).addScaledVector(rt,s);const f=1/(g+p+h);return i=p*f,s=h*f,t.copy(A).addScaledVector(At,i).addScaledVector(nt,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let ct=0;class lt extends Q{constructor(){super(),Object.defineProperty(this,"id",{value:ct++}),this.uuid=L(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=e,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=_,this.stencilZFail=_,this.stencilZPass=_,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}onBuild(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const A=e[t];if(void 0===A){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===A;continue}const n=this[t];void 0!==n?n&&n.isColor?n.set(A):n&&n.isVector3&&A&&A.isVector3?n.copy(A):this[t]=A:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const A={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(e){const t=[];for(const A in e){const n=e[A];delete n.metadata,t.push(n)}return t}if(A.uuid=this.uuid,A.type=this.type,""!==this.name&&(A.name=this.name),this.color&&this.color.isColor&&(A.color=this.color.getHex()),void 0!==this.roughness&&(A.roughness=this.roughness),void 0!==this.metalness&&(A.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(A.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(A.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(A.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(A.specular=this.specular.getHex()),void 0!==this.shininess&&(A.shininess=this.shininess),void 0!==this.clearcoat&&(A.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(A.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(A.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(A.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(A.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,A.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(A.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(A.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(A.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(A.lightMap=this.lightMap.toJSON(e).uuid,A.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(A.aoMap=this.aoMap.toJSON(e).uuid,A.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(A.bumpMap=this.bumpMap.toJSON(e).uuid,A.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(A.normalMap=this.normalMap.toJSON(e).uuid,A.normalMapType=this.normalMapType,A.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(A.displacementMap=this.displacementMap.toJSON(e).uuid,A.displacementScale=this.displacementScale,A.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(A.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(A.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(A.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(A.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(A.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(A.combine=this.combine)),void 0!==this.envMapIntensity&&(A.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(A.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(A.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(A.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(A.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(A.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(A.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(A.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(A.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(A.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(A.size=this.size),null!==this.shadowSide&&(A.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(A.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(A.blending=this.blending),0!==this.side&&(A.side=this.side),this.vertexColors&&(A.vertexColors=!0),this.opacity<1&&(A.opacity=this.opacity),!0===this.transparent&&(A.transparent=this.transparent),A.depthFunc=this.depthFunc,A.depthTest=this.depthTest,A.depthWrite=this.depthWrite,A.colorWrite=this.colorWrite,A.stencilWrite=this.stencilWrite,A.stencilWriteMask=this.stencilWriteMask,A.stencilFunc=this.stencilFunc,A.stencilRef=this.stencilRef,A.stencilFuncMask=this.stencilFuncMask,A.stencilFail=this.stencilFail,A.stencilZFail=this.stencilZFail,A.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(A.rotation=this.rotation),!0===this.polygonOffset&&(A.polygonOffset=!0),0!==this.polygonOffsetFactor&&(A.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(A.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(A.linewidth=this.linewidth),void 0!==this.dashSize&&(A.dashSize=this.dashSize),void 0!==this.gapSize&&(A.gapSize=this.gapSize),void 0!==this.scale&&(A.scale=this.scale),!0===this.dithering&&(A.dithering=!0),this.alphaTest>0&&(A.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(A.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(A.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(A.wireframe=this.wireframe),this.wireframeLinewidth>1&&(A.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(A.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(A.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(A.morphTargets=!0),!0===this.morphNormals&&(A.morphNormals=!0),!0===this.flatShading&&(A.flatShading=this.flatShading),!1===this.visible&&(A.visible=!1),!1===this.toneMapped&&(A.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(A.userData=this.userData),t){const t=n(e.textures),r=n(e.images);t.length>0&&(A.textures=t),r.length>0&&(A.images=r)}return A}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let A=null;if(null!==t){const e=t.length;A=new Array(e);for(let n=0;n!==e;++n)A[n]=t[n].clone()}return this.clippingPlanes=A,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}lt.prototype.isMaterial=!0;const ht={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ut={h:0,s:0,l:0},dt={h:0,s:0,l:0};function pt(e,t,A){return A<0&&(A+=1),A>1&&(A-=1),A<1/6?e+6*(t-e)*A:A<.5?t:A<2/3?e+6*(t-e)*(2/3-A):e}function gt(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function ft(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class mt{constructor(e,t,A){return void 0===t&&void 0===A?this.set(e):this.setRGB(e,t,A)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,A){return this.r=e,this.g=t,this.b=A,this}setHSL(e,t,A){if(e=(e%(n=1)+n)%n,t=H(t,0,1),A=H(A,0,1),0===t)this.r=this.g=this.b=A;else{const n=A<=.5?A*(1+t):A+t-A*t,r=2*A-n;this.r=pt(r,n,e+1/3),this.g=pt(r,n,e),this.b=pt(r,n,e-1/3)}var n;return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let A;if(A=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const n=A[1],r=A[2];switch(n){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){const A=parseFloat(e[1])/360,n=parseInt(e[2],10)/100,r=parseInt(e[3],10)/100;return t(e[4]),this.setHSL(A,n,r)}}}else if(A=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=A[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=ht[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const A=t>0?1/t:1;return this.r=Math.pow(e.r,A),this.g=Math.pow(e.g,A),this.b=Math.pow(e.b,A),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=gt(e.r),this.g=gt(e.g),this.b=gt(e.b),this}copyLinearToSRGB(e){return this.r=ft(e.r),this.g=ft(e.g),this.b=ft(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,A=this.g,n=this.b,r=Math.max(t,A,n),i=Math.min(t,A,n);let s,o;const a=(i+r)/2;if(i===r)s=0,o=0;else{const e=r-i;switch(o=a<=.5?e/(r+i):e/(2-r-i),r){case t:s=(A-n)/e+(A<n?6:0);break;case A:s=(n-t)/e+2;break;case n:s=(t-A)/e+4}s/=6}return e.h=s,e.s=o,e.l=a,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,A){return this.getHSL(ut),ut.h+=e,ut.s+=t,ut.l+=A,this.setHSL(ut.h,ut.s,ut.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,A){return this.r=e.r+(t.r-e.r)*A,this.g=e.g+(t.g-e.g)*A,this.b=e.b+(t.b-e.b)*A,this}lerpHSL(e,t){this.getHSL(ut),e.getHSL(dt);const A=I(ut.h,dt.h,t),n=I(ut.s,dt.s,t),r=I(ut.l,dt.l,t);return this.setHSL(A,n,r),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}mt.NAMES=ht,mt.prototype.isColor=!0,mt.prototype.r=1,mt.prototype.g=1,mt.prototype.b=1;class Bt extends lt{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new mt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this}}Bt.prototype.isMeshBasicMaterial=!0;const wt=new J,vt=new P;class yt{constructor(e,t,A){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===A,this.usage=E,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,A){e*=this.itemSize,A*=t.itemSize;for(let n=0,r=this.itemSize;n<r;n++)this.array[e+n]=t.array[A+n];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let A=0;for(let n=0,r=e.length;n<r;n++){let r=e[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),r=new mt),t[A++]=r.r,t[A++]=r.g,t[A++]=r.b}return this}copyVector2sArray(e){const t=this.array;let A=0;for(let n=0,r=e.length;n<r;n++){let r=e[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),r=new P),t[A++]=r.x,t[A++]=r.y}return this}copyVector3sArray(e){const t=this.array;let A=0;for(let n=0,r=e.length;n<r;n++){let r=e[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),r=new J),t[A++]=r.x,t[A++]=r.y,t[A++]=r.z}return this}copyVector4sArray(e){const t=this.array;let A=0;for(let n=0,r=e.length;n<r;n++){let r=e[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),r=new z),t[A++]=r.x,t[A++]=r.y,t[A++]=r.z,t[A++]=r.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,A=this.count;t<A;t++)vt.fromBufferAttribute(this,t),vt.applyMatrix3(e),this.setXY(t,vt.x,vt.y);else if(3===this.itemSize)for(let t=0,A=this.count;t<A;t++)wt.fromBufferAttribute(this,t),wt.applyMatrix3(e),this.setXYZ(t,wt.x,wt.y,wt.z);return this}applyMatrix4(e){for(let t=0,A=this.count;t<A;t++)wt.x=this.getX(t),wt.y=this.getY(t),wt.z=this.getZ(t),wt.applyMatrix4(e),this.setXYZ(t,wt.x,wt.y,wt.z);return this}applyNormalMatrix(e){for(let t=0,A=this.count;t<A;t++)wt.x=this.getX(t),wt.y=this.getY(t),wt.z=this.getZ(t),wt.applyNormalMatrix(e),this.setXYZ(t,wt.x,wt.y,wt.z);return this}transformDirection(e){for(let t=0,A=this.count;t<A;t++)wt.x=this.getX(t),wt.y=this.getY(t),wt.z=this.getZ(t),wt.transformDirection(e),this.setXYZ(t,wt.x,wt.y,wt.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,A){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=A,this}setXYZ(e,t,A,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=A,this.array[e+2]=n,this}setXYZW(e,t,A,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=A,this.array[e+2]=n,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==E&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}yt.prototype.isBufferAttribute=!0;class xt extends yt{constructor(e,t,A){super(new Uint16Array(e),t,A)}}class Ct extends yt{constructor(e,t,A){super(new Uint32Array(e),t,A)}}(class extends yt{constructor(e,t,A){super(new Uint16Array(e),t,A)}}).prototype.isFloat16BufferAttribute=!0;class bt extends yt{constructor(e,t,A){super(new Float32Array(e),t,A)}}function _t(e){if(0===e.length)return-1/0;let t=e[0];for(let A=1,n=e.length;A<n;++A)e[A]>t&&(t=e[A]);return t}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;let Et=0;const Ut=new Ee,Ft=new Ze,Qt=new J,Mt=new q,St=new q,Tt=new J;class Lt extends Q{constructor(){super(),Object.defineProperty(this,"id",{value:Et++}),this.uuid=L(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(_t(e)>65535?Ct:xt)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,A=0){this.groups.push({start:e,count:t,materialIndex:A})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const A=this.attributes.normal;if(void 0!==A){const t=(new N).getNormalMatrix(e);A.applyNormalMatrix(t),A.needsUpdate=!0}const n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(e),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ut.makeRotationFromQuaternion(e),this.applyMatrix4(Ut),this}rotateX(e){return Ut.makeRotationX(e),this.applyMatrix4(Ut),this}rotateY(e){return Ut.makeRotationY(e),this.applyMatrix4(Ut),this}rotateZ(e){return Ut.makeRotationZ(e),this.applyMatrix4(Ut),this}translate(e,t,A){return Ut.makeTranslation(e,t,A),this.applyMatrix4(Ut),this}scale(e,t,A){return Ut.makeScale(e,t,A),this.applyMatrix4(Ut),this}lookAt(e){return Ft.lookAt(e),Ft.updateMatrix(),this.applyMatrix4(Ft.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Qt).negate(),this.translate(Qt.x,Qt.y,Qt.z),this}setFromPoints(e){const t=[];for(let A=0,n=e.length;A<n;A++){const n=e[A];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new bt(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new q);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new J(-1/0,-1/0,-1/0),new J(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,A=t.length;e<A;e++){const A=t[e];Mt.setFromBufferAttribute(A),this.morphTargetsRelative?(Tt.addVectors(this.boundingBox.min,Mt.min),this.boundingBox.expandByPoint(Tt),Tt.addVectors(this.boundingBox.max,Mt.max),this.boundingBox.expandByPoint(Tt)):(this.boundingBox.expandByPoint(Mt.min),this.boundingBox.expandByPoint(Mt.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new me);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new J,1/0);if(e){const A=this.boundingSphere.center;if(Mt.setFromBufferAttribute(e),t)for(let e=0,A=t.length;e<A;e++){const A=t[e];St.setFromBufferAttribute(A),this.morphTargetsRelative?(Tt.addVectors(Mt.min,St.min),Mt.expandByPoint(Tt),Tt.addVectors(Mt.max,St.max),Mt.expandByPoint(Tt)):(Mt.expandByPoint(St.min),Mt.expandByPoint(St.max))}Mt.getCenter(A);let n=0;for(let t=0,r=e.count;t<r;t++)Tt.fromBufferAttribute(e,t),n=Math.max(n,A.distanceToSquared(Tt));if(t)for(let r=0,i=t.length;r<i;r++){const i=t[r],s=this.morphTargetsRelative;for(let t=0,r=i.count;t<r;t++)Tt.fromBufferAttribute(i,t),s&&(Qt.fromBufferAttribute(e,t),Tt.add(Qt)),n=Math.max(n,A.distanceToSquared(Tt))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeFaceNormals(){}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const A=e.array,n=t.position.array,r=t.normal.array,i=t.uv.array,s=n.length/3;void 0===t.tangent&&this.setAttribute("tangent",new yt(new Float32Array(4*s),4));const o=t.tangent.array,a=[],c=[];for(let e=0;e<s;e++)a[e]=new J,c[e]=new J;const l=new J,h=new J,u=new J,d=new P,p=new P,g=new P,f=new J,m=new J;function B(e,t,A){l.fromArray(n,3*e),h.fromArray(n,3*t),u.fromArray(n,3*A),d.fromArray(i,2*e),p.fromArray(i,2*t),g.fromArray(i,2*A),h.sub(l),u.sub(l),p.sub(d),g.sub(d);const r=1/(p.x*g.y-g.x*p.y);isFinite(r)&&(f.copy(h).multiplyScalar(g.y).addScaledVector(u,-p.y).multiplyScalar(r),m.copy(u).multiplyScalar(p.x).addScaledVector(h,-g.x).multiplyScalar(r),a[e].add(f),a[t].add(f),a[A].add(f),c[e].add(m),c[t].add(m),c[A].add(m))}let w=this.groups;0===w.length&&(w=[{start:0,count:A.length}]);for(let e=0,t=w.length;e<t;++e){const t=w[e],n=t.start;for(let e=n,r=n+t.count;e<r;e+=3)B(A[e+0],A[e+1],A[e+2])}const v=new J,y=new J,x=new J,C=new J;function b(e){x.fromArray(r,3*e),C.copy(x);const t=a[e];v.copy(t),v.sub(x.multiplyScalar(x.dot(t))).normalize(),y.crossVectors(C,t);const A=y.dot(c[e])<0?-1:1;o[4*e]=v.x,o[4*e+1]=v.y,o[4*e+2]=v.z,o[4*e+3]=A}for(let e=0,t=w.length;e<t;++e){const t=w[e],n=t.start;for(let e=n,r=n+t.count;e<r;e+=3)b(A[e+0]),b(A[e+1]),b(A[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let A=this.getAttribute("normal");if(void 0===A)A=new yt(new Float32Array(3*t.count),3),this.setAttribute("normal",A);else for(let e=0,t=A.count;e<t;e++)A.setXYZ(e,0,0,0);const n=new J,r=new J,i=new J,s=new J,o=new J,a=new J,c=new J,l=new J;if(e)for(let h=0,u=e.count;h<u;h+=3){const u=e.getX(h+0),d=e.getX(h+1),p=e.getX(h+2);n.fromBufferAttribute(t,u),r.fromBufferAttribute(t,d),i.fromBufferAttribute(t,p),c.subVectors(i,r),l.subVectors(n,r),c.cross(l),s.fromBufferAttribute(A,u),o.fromBufferAttribute(A,d),a.fromBufferAttribute(A,p),s.add(c),o.add(c),a.add(c),A.setXYZ(u,s.x,s.y,s.z),A.setXYZ(d,o.x,o.y,o.z),A.setXYZ(p,a.x,a.y,a.z)}else for(let e=0,s=t.count;e<s;e+=3)n.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),i.fromBufferAttribute(t,e+2),c.subVectors(i,r),l.subVectors(n,r),c.cross(l),A.setXYZ(e+0,c.x,c.y,c.z),A.setXYZ(e+1,c.x,c.y,c.z),A.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),A.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const A=this.attributes;for(const n in A){if(void 0===e.attributes[n])continue;const r=A[n].array,i=e.attributes[n],s=i.array,o=i.itemSize*t,a=Math.min(s.length,r.length-o);for(let e=0,t=o;e<a;e++,t++)r[t]=s[e]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,A=e.count;t<A;t++)Tt.fromBufferAttribute(e,t),Tt.normalize(),e.setXYZ(t,Tt.x,Tt.y,Tt.z)}toNonIndexed(){function e(e,t){const A=e.array,n=e.itemSize,r=e.normalized,i=new A.constructor(t.length*n);let s=0,o=0;for(let r=0,a=t.length;r<a;r++){s=e.isInterleavedBufferAttribute?t[r]*e.data.stride+e.offset:t[r]*n;for(let e=0;e<n;e++)i[o++]=A[s++]}return new yt(i,n,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Lt,A=this.index.array,n=this.attributes;for(const r in n){const i=e(n[r],A);t.setAttribute(r,i)}const r=this.morphAttributes;for(const n in r){const i=[],s=r[n];for(let t=0,n=s.length;t<n;t++){const n=e(s[t],A);i.push(n)}t.morphAttributes[n]=i}t.morphTargetsRelative=this.morphTargetsRelative;const i=this.groups;for(let e=0,A=i.length;e<A;e++){const A=i[e];t.addGroup(A.start,A.count,A.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const A in t)void 0!==t[A]&&(e[A]=t[A]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const A=this.attributes;for(const t in A){const n=A[t];e.data.attributes[t]=n.toJSON(e.data)}const n={};let r=!1;for(const t in this.morphAttributes){const A=this.morphAttributes[t],i=[];for(let t=0,n=A.length;t<n;t++){const n=A[t];i.push(n.toJSON(e.data))}i.length>0&&(n[t]=i,r=!0)}r&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);const i=this.groups;i.length>0&&(e.data.groups=JSON.parse(JSON.stringify(i)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return(new Lt).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const A=e.index;null!==A&&this.setIndex(A.clone(t));const n=e.attributes;for(const e in n){const A=n[e];this.setAttribute(e,A.clone(t))}const r=e.morphAttributes;for(const e in r){const A=[],n=r[e];for(let e=0,r=n.length;e<r;e++)A.push(n[e].clone(t));this.morphAttributes[e]=A}this.morphTargetsRelative=e.morphTargetsRelative;const i=e.groups;for(let e=0,t=i.length;e<t;e++){const t=i[e];this.addGroup(t.start,t.count,t.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}Lt.prototype.isBufferGeometry=!0;const Ht=new Ee,It=new _e,Dt=new me,Rt=new J,Pt=new J,Nt=new J,Ot=new J,Gt=new J,Vt=new J,kt=new J,Kt=new J,zt=new J,Wt=new P,Xt=new P,Yt=new P,Jt=new J,jt=new J;class Zt extends Ze{constructor(e=new Lt,t=new Bt){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,A=Object.keys(t);if(A.length>0){const e=t[A[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,A=e.length;t<A;t++){const A=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[A]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const A=this.geometry,n=this.material,r=this.matrixWorld;if(void 0===n)return;if(null===A.boundingSphere&&A.computeBoundingSphere(),Dt.copy(A.boundingSphere),Dt.applyMatrix4(r),!1===e.ray.intersectsSphere(Dt))return;if(Ht.copy(r).invert(),It.copy(e.ray).applyMatrix4(Ht),null!==A.boundingBox&&!1===It.intersectsBox(A.boundingBox))return;let i;if(A.isBufferGeometry){const r=A.index,s=A.attributes.position,o=A.morphAttributes.position,a=A.morphTargetsRelative,c=A.attributes.uv,l=A.attributes.uv2,h=A.groups,u=A.drawRange;if(null!==r)if(Array.isArray(n))for(let A=0,d=h.length;A<d;A++){const d=h[A],p=n[d.materialIndex];for(let A=Math.max(d.start,u.start),n=Math.min(d.start+d.count,u.start+u.count);A<n;A+=3){const n=r.getX(A),h=r.getX(A+1),u=r.getX(A+2);i=qt(this,p,e,It,s,o,a,c,l,n,h,u),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=d.materialIndex,t.push(i))}}else for(let A=Math.max(0,u.start),h=Math.min(r.count,u.start+u.count);A<h;A+=3){const h=r.getX(A),u=r.getX(A+1),d=r.getX(A+2);i=qt(this,n,e,It,s,o,a,c,l,h,u,d),i&&(i.faceIndex=Math.floor(A/3),t.push(i))}else if(void 0!==s)if(Array.isArray(n))for(let A=0,r=h.length;A<r;A++){const r=h[A],d=n[r.materialIndex];for(let A=Math.max(r.start,u.start),n=Math.min(r.start+r.count,u.start+u.count);A<n;A+=3)i=qt(this,d,e,It,s,o,a,c,l,A,A+1,A+2),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=r.materialIndex,t.push(i))}else for(let A=Math.max(0,u.start),r=Math.min(s.count,u.start+u.count);A<r;A+=3)i=qt(this,n,e,It,s,o,a,c,l,A,A+1,A+2),i&&(i.faceIndex=Math.floor(A/3),t.push(i))}else A.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function qt(e,t,A,n,r,i,s,o,a,c,l,h){Rt.fromBufferAttribute(r,c),Pt.fromBufferAttribute(r,l),Nt.fromBufferAttribute(r,h);const u=e.morphTargetInfluences;if(t.morphTargets&&i&&u){kt.set(0,0,0),Kt.set(0,0,0),zt.set(0,0,0);for(let e=0,t=i.length;e<t;e++){const t=u[e],A=i[e];0!==t&&(Ot.fromBufferAttribute(A,c),Gt.fromBufferAttribute(A,l),Vt.fromBufferAttribute(A,h),s?(kt.addScaledVector(Ot,t),Kt.addScaledVector(Gt,t),zt.addScaledVector(Vt,t)):(kt.addScaledVector(Ot.sub(Rt),t),Kt.addScaledVector(Gt.sub(Pt),t),zt.addScaledVector(Vt.sub(Nt),t)))}Rt.add(kt),Pt.add(Kt),Nt.add(zt)}e.isSkinnedMesh&&(e.boneTransform(c,Rt),e.boneTransform(l,Pt),e.boneTransform(h,Nt));const d=function(e,t,A,n,r,i,s,o){let a;if(a=1===t.side?n.intersectTriangle(s,i,r,!0,o):n.intersectTriangle(r,i,s,2!==t.side,o),null===a)return null;jt.copy(o),jt.applyMatrix4(e.matrixWorld);const c=A.ray.origin.distanceTo(jt);return c<A.near||c>A.far?null:{distance:c,point:jt.clone(),object:e}}(e,t,A,n,Rt,Pt,Nt,Jt);if(d){o&&(Wt.fromBufferAttribute(o,c),Xt.fromBufferAttribute(o,l),Yt.fromBufferAttribute(o,h),d.uv=at.getUV(Jt,Rt,Pt,Nt,Wt,Xt,Yt,new P)),a&&(Wt.fromBufferAttribute(a,c),Xt.fromBufferAttribute(a,l),Yt.fromBufferAttribute(a,h),d.uv2=at.getUV(Jt,Rt,Pt,Nt,Wt,Xt,Yt,new P));const e={a:c,b:l,c:h,normal:new J,materialIndex:0};at.getNormal(Rt,Pt,Nt,e.normal),d.face=e}return d}Zt.prototype.isMesh=!0;class $t extends Lt{constructor(e=1,t=1,A=1,n=1,r=1,i=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:A,widthSegments:n,heightSegments:r,depthSegments:i};const s=this;n=Math.floor(n),r=Math.floor(r),i=Math.floor(i);const o=[],a=[],c=[],l=[];let h=0,u=0;function d(e,t,A,n,r,i,d,p,g,f,m){const B=i/g,w=d/f,v=i/2,y=d/2,x=p/2,C=g+1,b=f+1;let _=0,E=0;const U=new J;for(let i=0;i<b;i++){const s=i*w-y;for(let o=0;o<C;o++){const h=o*B-v;U[e]=h*n,U[t]=s*r,U[A]=x,a.push(U.x,U.y,U.z),U[e]=0,U[t]=0,U[A]=p>0?1:-1,c.push(U.x,U.y,U.z),l.push(o/g),l.push(1-i/f),_+=1}}for(let e=0;e<f;e++)for(let t=0;t<g;t++){const A=h+t+C*e,n=h+t+C*(e+1),r=h+(t+1)+C*(e+1),i=h+(t+1)+C*e;o.push(A,n,i),o.push(n,r,i),E+=6}s.addGroup(u,E,m),u+=E,h+=_}d("z","y","x",-1,-1,A,t,e,i,r,0),d("z","y","x",1,-1,A,t,-e,i,r,1),d("x","z","y",1,1,e,A,t,n,i,2),d("x","z","y",1,-1,e,A,-t,n,i,3),d("x","y","z",1,-1,e,t,A,n,r,4),d("x","y","z",-1,-1,e,t,-A,n,r,5),this.setIndex(o),this.setAttribute("position",new bt(a,3)),this.setAttribute("normal",new bt(c,3)),this.setAttribute("uv",new bt(l,2))}static fromJSON(e){return new $t(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function eA(e){const t={};for(const A in e){t[A]={};for(const n in e[A]){const r=e[A][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?t[A][n]=r.clone():Array.isArray(r)?t[A][n]=r.slice():t[A][n]=r}}return t}function tA(e){const t={};for(let A=0;A<e.length;A++){const n=eA(e[A]);for(const e in n)t[e]=n[e]}return t}const AA={clone:eA,merge:tA};class nA extends lt{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=eA(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const A in this.uniforms){const n=this.uniforms[A].value;n&&n.isTexture?t.uniforms[A]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[A]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[A]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[A]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[A]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[A]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[A]={type:"m4",value:n.toArray()}:t.uniforms[A]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const A={};for(const e in this.extensions)!0===this.extensions[e]&&(A[e]=!0);return Object.keys(A).length>0&&(t.extensions=A),t}}nA.prototype.isShaderMaterial=!0;class rA extends Ze{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Ee,this.projectionMatrix=new Ee,this.projectionMatrixInverse=new Ee}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}rA.prototype.isCamera=!0;class iA extends rA{constructor(e=50,t=1,A=.1,n=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=A,this.far=n,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*T*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*S*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*T*Math.atan(Math.tan(.5*S*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,A,n,r,i){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=A,this.view.offsetY=n,this.view.width=r,this.view.height=i,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*S*this.fov)/this.zoom,A=2*t,n=this.aspect*A,r=-.5*n;const i=this.view;if(null!==this.view&&this.view.enabled){const e=i.fullWidth,s=i.fullHeight;r+=i.offsetX*n/e,t-=i.offsetY*A/s,n*=i.width/e,A*=i.height/s}const s=this.filmOffset;0!==s&&(r+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,t,t-A,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}iA.prototype.isPerspectiveCamera=!0;const sA=90;class oA extends Ze{constructor(e,t,A){if(super(),this.type="CubeCamera",!0!==A.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=A;const n=new iA(sA,1,e,t);n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new J(1,0,0)),this.add(n);const r=new iA(sA,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new J(-1,0,0)),this.add(r);const i=new iA(sA,1,e,t);i.layers=this.layers,i.up.set(0,0,1),i.lookAt(new J(0,1,0)),this.add(i);const s=new iA(sA,1,e,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(new J(0,-1,0)),this.add(s);const o=new iA(sA,1,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new J(0,0,1)),this.add(o);const a=new iA(sA,1,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new J(0,0,-1)),this.add(a)}update(e,t){null===this.parent&&this.updateMatrixWorld();const A=this.renderTarget,[n,r,i,s,o,a]=this.children,c=e.xr.enabled,l=e.getRenderTarget();e.xr.enabled=!1;const h=A.texture.generateMipmaps;A.texture.generateMipmaps=!1,e.setRenderTarget(A,0),e.render(t,n),e.setRenderTarget(A,1),e.render(t,r),e.setRenderTarget(A,2),e.render(t,i),e.setRenderTarget(A,3),e.render(t,s),e.setRenderTarget(A,4),e.render(t,o),A.texture.generateMipmaps=h,e.setRenderTarget(A,5),e.render(t,a),e.setRenderTarget(l),e.xr.enabled=c}}class aA extends k{constructor(e,t,A,n,r,i,s,o,a,c){super(e=void 0!==e?e:[],t=void 0!==t?t:301,A,n,r,i,s=void 0!==s?s:p,o,a,c),this._needsFlipEnvMap=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}aA.prototype.isCubeTexture=!0;class cA extends W{constructor(e,t,A){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=A),super(e,e,t),t=t||{},this.texture=new aA(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:s,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=g,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const A={tEquirect:{value:null}},n="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",i=new $t(5,5,5),a=new nA({name:"CubemapFromEquirect",uniforms:eA(A),vertexShader:n,fragmentShader:r,side:1,blending:0});a.uniforms.tEquirect.value=t;const c=new Zt(i,a),l=t.minFilter;return t.minFilter===o&&(t.minFilter=s),new oA(1,10,this).update(e,c),t.minFilter=l,c.geometry.dispose(),c.material.dispose(),this}clear(e,t,A,n){const r=e.getRenderTarget();for(let r=0;r<6;r++)e.setRenderTarget(this,r),e.clear(t,A,n);e.setRenderTarget(r)}}cA.prototype.isWebGLCubeRenderTarget=!0;const lA=new J,hA=new J,uA=new N;class dA{constructor(e=new J(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,A,n){return this.normal.set(e,t,A),this.constant=n,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,A){const n=lA.subVectors(A,t).cross(hA.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(n,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const A=e.delta(lA),n=this.normal.dot(A);if(0===n)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/n;return r<0||r>1?null:t.copy(A).multiplyScalar(r).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),A=this.distanceToPoint(e.end);return t<0&&A>0||A<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const A=t||uA.getNormalMatrix(e),n=this.coplanarPoint(lA).applyMatrix4(e),r=this.normal.applyMatrix3(A).normalize();return this.constant=-n.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}dA.prototype.isPlane=!0;const pA=new me,gA=new J;class fA{constructor(e=new dA,t=new dA,A=new dA,n=new dA,r=new dA,i=new dA){this.planes=[e,t,A,n,r,i]}set(e,t,A,n,r,i){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(A),s[3].copy(n),s[4].copy(r),s[5].copy(i),this}copy(e){const t=this.planes;for(let A=0;A<6;A++)t[A].copy(e.planes[A]);return this}setFromProjectionMatrix(e){const t=this.planes,A=e.elements,n=A[0],r=A[1],i=A[2],s=A[3],o=A[4],a=A[5],c=A[6],l=A[7],h=A[8],u=A[9],d=A[10],p=A[11],g=A[12],f=A[13],m=A[14],B=A[15];return t[0].setComponents(s-n,l-o,p-h,B-g).normalize(),t[1].setComponents(s+n,l+o,p+h,B+g).normalize(),t[2].setComponents(s+r,l+a,p+u,B+f).normalize(),t[3].setComponents(s-r,l-a,p-u,B-f).normalize(),t[4].setComponents(s-i,l-c,p-d,B-m).normalize(),t[5].setComponents(s+i,l+c,p+d,B+m).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),pA.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(pA)}intersectsSprite(e){return pA.center.set(0,0,0),pA.radius=.7071067811865476,pA.applyMatrix4(e.matrixWorld),this.intersectsSphere(pA)}intersectsSphere(e){const t=this.planes,A=e.center,n=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(A)<n)return!1;return!0}intersectsBox(e){const t=this.planes;for(let A=0;A<6;A++){const n=t[A];if(gA.x=n.normal.x>0?e.max.x:e.min.x,gA.y=n.normal.y>0?e.max.y:e.min.y,gA.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(gA)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let A=0;A<6;A++)if(t[A].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function mA(){let e=null,t=!1,A=null,n=null;function r(t,i){A(t,i),n=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==A&&(n=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(e){A=e},setContext:function(t){e=t}}}function BA(e,t){const A=t.isWebGL2,n=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),n.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const A=n.get(t);A&&(e.deleteBuffer(A.buffer),n.delete(t))},update:function(t,r){if(t.isGLBufferAttribute){const e=n.get(t);return void((!e||e.version<t.version)&&n.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const i=n.get(t);void 0===i?n.set(t,function(t,n){const r=t.array,i=t.usage,s=e.createBuffer();e.bindBuffer(n,s),e.bufferData(n,r,i),t.onUploadCallback();let o=5126;return r instanceof Float32Array?o=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?t.isFloat16BufferAttribute?A?o=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):o=5123:r instanceof Int16Array?o=5122:r instanceof Uint32Array?o=5125:r instanceof Int32Array?o=5124:r instanceof Int8Array?o=5120:(r instanceof Uint8Array||r instanceof Uint8ClampedArray)&&(o=5121),{buffer:s,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(t,r)):i.version<t.version&&(function(t,n,r){const i=n.array,s=n.updateRange;e.bindBuffer(r,t),-1===s.count?e.bufferSubData(r,0,i):(A?e.bufferSubData(r,s.offset*i.BYTES_PER_ELEMENT,i,s.offset,s.count):e.bufferSubData(r,s.offset*i.BYTES_PER_ELEMENT,i.subarray(s.offset,s.offset+s.count)),s.count=-1)}(i.buffer,t,r),i.version=t.version)}}}class wA extends Lt{constructor(e=1,t=1,A=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:A,heightSegments:n};const r=e/2,i=t/2,s=Math.floor(A),o=Math.floor(n),a=s+1,c=o+1,l=e/s,h=t/o,u=[],d=[],p=[],g=[];for(let e=0;e<c;e++){const t=e*h-i;for(let A=0;A<a;A++){const n=A*l-r;d.push(n,-t,0),p.push(0,0,1),g.push(A/s),g.push(1-e/o)}}for(let e=0;e<o;e++)for(let t=0;t<s;t++){const A=t+a*e,n=t+a*(e+1),r=t+1+a*(e+1),i=t+1+a*e;u.push(A,n,i),u.push(n,r,i)}this.setIndex(u),this.setAttribute("position",new bt(d,3)),this.setAttribute("normal",new bt(p,3)),this.setAttribute("uv",new bt(g,2))}static fromJSON(e){return new wA(e.width,e.height,e.widthSegments,e.heightSegments)}}const vA={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotVH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSNMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition.xyz / vWorldPosition.w;\n\tvec3 v = normalize( cameraPosition - pos );\n\tfloat ior = ( 1.0 + 0.4 * reflectivity ) / ( 1.0 - 0.4 * reflectivity );\n\tvec3 transmission = transmissionFactor * getIBLVolumeRefraction(\n\t\tnormal, v, roughnessFactor, material.diffuseColor, totalSpecular,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec4 vWorldPosition;\n\tvec3 getVolumeTransmissionRay(vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix) {\n\t\tvec3 refractionVector = refract(-v, normalize(n), 1.0 / ior);\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length(vec3(modelMatrix[0].xyz));\n\t\tmodelScale.y = length(vec3(modelMatrix[1].xyz));\n\t\tmodelScale.z = length(vec3(modelMatrix[2].xyz));\n\t\treturn normalize(refractionVector) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness(float roughness, float ior) {\n\t\treturn roughness * clamp(ior * 2.0 - 2.0, 0.0, 1.0);\n\t}\n\tvec3 getTransmissionSample(vec2 fragCoord, float roughness, float ior) {\n\t\tfloat framebufferLod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness, ior);\n\t\treturn texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod).rgb;\n\t}\n\tvec3 applyVolumeAttenuation(vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance) {\n\t\tif (attenuationDistance == 0.0) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log(attenuationColor) / attenuationDistance;\n\t\t\tvec3 transmittance = exp(-attenuationCoefficient * transmissionDistance);\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec3 getIBLVolumeRefraction(vec3 n, vec3 v, float perceptualRoughness, vec3 baseColor, vec3 specularColor,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay(n, v, thickness, ior, modelMatrix);\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4(refractedRayExit, 1.0);\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec3 transmittedLight = getTransmissionSample(refractionCoords, perceptualRoughness, ior);\n\t\tvec3 attenuatedColor = applyVolumeAttenuation(transmittedLight, length(transmissionRay), attenuationColor, attenuationDistance);\n\t\treturn (1.0 - specularColor) * attenuatedColor * baseColor;\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform vec3 attenuationColor;\n\tuniform float attenuationDistance;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <transmission_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#ifdef USE_TRANSMISSION\n\tvarying vec4 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition;\n#endif\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},yA={common:{diffuse:{value:new mt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new N},uv2Transform:{value:new N},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new P(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new mt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new mt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new N}},sprite:{diffuse:{value:new mt(16777215)},opacity:{value:1},center:{value:new P(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new N}}},xA={basic:{uniforms:tA([yA.common,yA.specularmap,yA.envmap,yA.aomap,yA.lightmap,yA.fog]),vertexShader:vA.meshbasic_vert,fragmentShader:vA.meshbasic_frag},lambert:{uniforms:tA([yA.common,yA.specularmap,yA.envmap,yA.aomap,yA.lightmap,yA.emissivemap,yA.fog,yA.lights,{emissive:{value:new mt(0)}}]),vertexShader:vA.meshlambert_vert,fragmentShader:vA.meshlambert_frag},phong:{uniforms:tA([yA.common,yA.specularmap,yA.envmap,yA.aomap,yA.lightmap,yA.emissivemap,yA.bumpmap,yA.normalmap,yA.displacementmap,yA.fog,yA.lights,{emissive:{value:new mt(0)},specular:{value:new mt(1118481)},shininess:{value:30}}]),vertexShader:vA.meshphong_vert,fragmentShader:vA.meshphong_frag},standard:{uniforms:tA([yA.common,yA.envmap,yA.aomap,yA.lightmap,yA.emissivemap,yA.bumpmap,yA.normalmap,yA.displacementmap,yA.roughnessmap,yA.metalnessmap,yA.fog,yA.lights,{emissive:{value:new mt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:vA.meshphysical_vert,fragmentShader:vA.meshphysical_frag},toon:{uniforms:tA([yA.common,yA.aomap,yA.lightmap,yA.emissivemap,yA.bumpmap,yA.normalmap,yA.displacementmap,yA.gradientmap,yA.fog,yA.lights,{emissive:{value:new mt(0)}}]),vertexShader:vA.meshtoon_vert,fragmentShader:vA.meshtoon_frag},matcap:{uniforms:tA([yA.common,yA.bumpmap,yA.normalmap,yA.displacementmap,yA.fog,{matcap:{value:null}}]),vertexShader:vA.meshmatcap_vert,fragmentShader:vA.meshmatcap_frag},points:{uniforms:tA([yA.points,yA.fog]),vertexShader:vA.points_vert,fragmentShader:vA.points_frag},dashed:{uniforms:tA([yA.common,yA.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:vA.linedashed_vert,fragmentShader:vA.linedashed_frag},depth:{uniforms:tA([yA.common,yA.displacementmap]),vertexShader:vA.depth_vert,fragmentShader:vA.depth_frag},normal:{uniforms:tA([yA.common,yA.bumpmap,yA.normalmap,yA.displacementmap,{opacity:{value:1}}]),vertexShader:vA.normal_vert,fragmentShader:vA.normal_frag},sprite:{uniforms:tA([yA.sprite,yA.fog]),vertexShader:vA.sprite_vert,fragmentShader:vA.sprite_frag},background:{uniforms:{uvTransform:{value:new N},t2D:{value:null}},vertexShader:vA.background_vert,fragmentShader:vA.background_frag},cube:{uniforms:tA([yA.envmap,{opacity:{value:1}}]),vertexShader:vA.cube_vert,fragmentShader:vA.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:vA.equirect_vert,fragmentShader:vA.equirect_frag},distanceRGBA:{uniforms:tA([yA.common,yA.displacementmap,{referencePosition:{value:new J},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:vA.distanceRGBA_vert,fragmentShader:vA.distanceRGBA_frag},shadow:{uniforms:tA([yA.lights,yA.fog,{color:{value:new mt(0)},opacity:{value:1}}]),vertexShader:vA.shadow_vert,fragmentShader:vA.shadow_frag}};function CA(e,t,A,n,r){const i=new mt(0);let s,o,a=0,c=null,l=0,h=null;function u(e,t){A.buffers.color.setClear(e.r,e.g,e.b,t,r)}return{getClearColor:function(){return i},setClearColor:function(e,t=1){i.set(e),a=t,u(i,a)},getClearAlpha:function(){return a},setClearAlpha:function(e){a=e,u(i,a)},render:function(A,r){let d=!1,p=!0===r.isScene?r.background:null;p&&p.isTexture&&(p=t.get(p));const g=e.xr,f=g.getSession&&g.getSession();f&&"additive"===f.environmentBlendMode&&(p=null),null===p?u(i,a):p&&p.isColor&&(u(p,1),d=!0),(e.autoClear||d)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||306===p.mapping)?(void 0===o&&(o=new Zt(new $t(1,1,1),new nA({name:"BackgroundCubeMaterial",uniforms:eA(xA.cube.uniforms),vertexShader:xA.cube.vertexShader,fragmentShader:xA.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(e,t,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(o)),o.material.uniforms.envMap.value=p,o.material.uniforms.flipEnvMap.value=p.isCubeTexture&&p._needsFlipEnvMap?-1:1,c===p&&l===p.version&&h===e.toneMapping||(o.material.needsUpdate=!0,c=p,l=p.version,h=e.toneMapping),A.unshift(o,o.geometry,o.material,0,0,null)):p&&p.isTexture&&(void 0===s&&(s=new Zt(new wA(2,2),new nA({name:"BackgroundMaterial",uniforms:eA(xA.background.uniforms),vertexShader:xA.background.vertexShader,fragmentShader:xA.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(s)),s.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),s.material.uniforms.uvTransform.value.copy(p.matrix),c===p&&l===p.version&&h===e.toneMapping||(s.material.needsUpdate=!0,c=p,l=p.version,h=e.toneMapping),A.unshift(s,s.geometry,s.material,0,0,null))}}}function bA(e,t,A,n){const r=e.getParameter(34921),i=n.isWebGL2?null:t.get("OES_vertex_array_object"),s=n.isWebGL2||null!==i,o={},a=u(null);let c=a;function l(t){return n.isWebGL2?e.bindVertexArray(t):i.bindVertexArrayOES(t)}function h(t){return n.isWebGL2?e.deleteVertexArray(t):i.deleteVertexArrayOES(t)}function u(e){const t=[],A=[],n=[];for(let e=0;e<r;e++)t[e]=0,A[e]=0,n[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:A,attributeDivisors:n,object:e,attributes:{},index:null}}function d(){const e=c.newAttributes;for(let t=0,A=e.length;t<A;t++)e[t]=0}function p(e){g(e,0)}function g(A,r){const i=c.newAttributes,s=c.enabledAttributes,o=c.attributeDivisors;i[A]=1,0===s[A]&&(e.enableVertexAttribArray(A),s[A]=1),o[A]!==r&&((n.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](A,r),o[A]=r)}function f(){const t=c.newAttributes,A=c.enabledAttributes;for(let n=0,r=A.length;n<r;n++)A[n]!==t[n]&&(e.disableVertexAttribArray(n),A[n]=0)}function m(t,A,r,i,s,o){!0!==n.isWebGL2||5124!==r&&5125!==r?e.vertexAttribPointer(t,A,r,i,s,o):e.vertexAttribIPointer(t,A,r,s,o)}function B(){w(),c!==a&&(c=a,l(c.object))}function w(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:function(r,a,h,B,w){let v=!1;if(s){const t=function(t,A,r){const s=!0===r.wireframe;let a=o[t.id];void 0===a&&(a={},o[t.id]=a);let c=a[A.id];void 0===c&&(c={},a[A.id]=c);let l=c[s];return void 0===l&&(l=u(n.isWebGL2?e.createVertexArray():i.createVertexArrayOES()),c[s]=l),l}(B,h,a);c!==t&&(c=t,l(c.object)),v=function(e,t){const A=c.attributes,n=e.attributes;let r=0;for(const e in n){const t=A[e],i=n[e];if(void 0===t)return!0;if(t.attribute!==i)return!0;if(t.data!==i.data)return!0;r++}return c.attributesNum!==r||c.index!==t}(B,w),v&&function(e,t){const A={},n=e.attributes;let r=0;for(const e in n){const t=n[e],i={};i.attribute=t,t.data&&(i.data=t.data),A[e]=i,r++}c.attributes=A,c.attributesNum=r,c.index=t}(B,w)}else{const e=!0===a.wireframe;c.geometry===B.id&&c.program===h.id&&c.wireframe===e||(c.geometry=B.id,c.program=h.id,c.wireframe=e,v=!0)}!0===r.isInstancedMesh&&(v=!0),null!==w&&A.update(w,34963),v&&(function(r,i,s,o){if(!1===n.isWebGL2&&(r.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;d();const a=o.attributes,c=s.getAttributes(),l=i.defaultAttributeValues;for(const t in c){const n=c[t];if(n>=0){const i=a[t];if(void 0!==i){const t=i.normalized,r=i.itemSize,s=A.get(i);if(void 0===s)continue;const a=s.buffer,c=s.type,l=s.bytesPerElement;if(i.isInterleavedBufferAttribute){const A=i.data,s=A.stride,h=i.offset;A&&A.isInstancedInterleavedBuffer?(g(n,A.meshPerAttribute),void 0===o._maxInstanceCount&&(o._maxInstanceCount=A.meshPerAttribute*A.count)):p(n),e.bindBuffer(34962,a),m(n,r,c,t,s*l,h*l)}else i.isInstancedBufferAttribute?(g(n,i.meshPerAttribute),void 0===o._maxInstanceCount&&(o._maxInstanceCount=i.meshPerAttribute*i.count)):p(n),e.bindBuffer(34962,a),m(n,r,c,t,0,0)}else if("instanceMatrix"===t){const t=A.get(r.instanceMatrix);if(void 0===t)continue;const i=t.buffer,s=t.type;g(n+0,1),g(n+1,1),g(n+2,1),g(n+3,1),e.bindBuffer(34962,i),e.vertexAttribPointer(n+0,4,s,!1,64,0),e.vertexAttribPointer(n+1,4,s,!1,64,16),e.vertexAttribPointer(n+2,4,s,!1,64,32),e.vertexAttribPointer(n+3,4,s,!1,64,48)}else if("instanceColor"===t){const t=A.get(r.instanceColor);if(void 0===t)continue;const i=t.buffer,s=t.type;g(n,1),e.bindBuffer(34962,i),e.vertexAttribPointer(n,3,s,!1,12,0)}else if(void 0!==l){const A=l[t];if(void 0!==A)switch(A.length){case 2:e.vertexAttrib2fv(n,A);break;case 3:e.vertexAttrib3fv(n,A);break;case 4:e.vertexAttrib4fv(n,A);break;default:e.vertexAttrib1fv(n,A)}}}}f()}(r,a,h,B),null!==w&&e.bindBuffer(34963,A.get(w).buffer))},reset:B,resetDefaultState:w,dispose:function(){B();for(const e in o){const t=o[e];for(const e in t){const A=t[e];for(const e in A)h(A[e].object),delete A[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;const t=o[e.id];for(const e in t){const A=t[e];for(const e in A)h(A[e].object),delete A[e];delete t[e]}delete o[e.id]},releaseStatesOfProgram:function(e){for(const t in o){const A=o[t];if(void 0===A[e.id])continue;const n=A[e.id];for(const e in n)h(n[e].object),delete n[e];delete A[e.id]}},initAttributes:d,enableAttribute:p,disableUnusedAttributes:f}}function _A(e,t,A,n){const r=n.isWebGL2;let i;this.setMode=function(e){i=e},this.render=function(t,n){e.drawArrays(i,t,n),A.update(n,i,1)},this.renderInstances=function(n,s,o){if(0===o)return;let a,c;if(r)a=e,c="drawArraysInstanced";else if(a=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===a)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");a[c](i,n,s,o),A.update(s,i,o)}}function EA(e,t,A){let n;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const i="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let s=void 0!==A.precision?A.precision:"highp";const o=r(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);const a=i||t.has("WEBGL_draw_buffers"),c=!0===A.logarithmicDepthBuffer,l=e.getParameter(34930),h=e.getParameter(35660),u=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),g=e.getParameter(36347),f=e.getParameter(36348),m=e.getParameter(36349),B=h>0,w=i||t.has("OES_texture_float");return{isWebGL2:i,drawBuffers:a,getMaxAnisotropy:function(){if(void 0!==n)return n;if(!0===t.has("EXT_texture_filter_anisotropic")){const A=t.get("EXT_texture_filter_anisotropic");n=e.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:r,precision:s,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:h,maxTextureSize:u,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:g,maxVaryings:f,maxFragmentUniforms:m,vertexTextures:B,floatFragmentTextures:w,floatVertexTextures:B&&w,maxSamples:i?e.getParameter(36183):0}}function UA(e){const t=this;let A=null,n=0,r=!1,i=!1;const s=new dA,o=new N,a={value:null,needsUpdate:!1};function c(){a.value!==A&&(a.value=A,a.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function l(e,A,n,r){const i=null!==e?e.length:0;let c=null;if(0!==i){if(c=a.value,!0!==r||null===c){const t=n+4*i,r=A.matrixWorldInverse;o.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,A=n;t!==i;++t,A+=4)s.copy(e[t]).applyMatrix4(r,o),s.normal.toArray(c,A),c[A+3]=s.constant}a.value=c,a.needsUpdate=!0}return t.numPlanes=i,t.numIntersection=0,c}this.uniform=a,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,i){const s=0!==e.length||t||0!==n||r;return r=t,A=l(e,i,0),n=e.length,s},this.beginShadows=function(){i=!0,l(null)},this.endShadows=function(){i=!1,c()},this.setState=function(t,s,o){const h=t.clippingPlanes,u=t.clipIntersection,d=t.clipShadows,p=e.get(t);if(!r||null===h||0===h.length||i&&!d)i?l(null):c();else{const e=i?0:n,t=4*e;let r=p.clippingState||null;a.value=r,r=l(h,s,t,o);for(let e=0;e!==t;++e)r[e]=A[e];p.clippingState=r,this.numIntersection=u?this.numPlanes:0,this.numPlanes+=e}}}function FA(e){let t=new WeakMap;function A(e,t){return 303===t?e.mapping=301:304===t&&(e.mapping=302),e}function n(e){const A=e.target;A.removeEventListener("dispose",n);const r=t.get(A);void 0!==r&&(t.delete(A),r.dispose())}return{get:function(r){if(r&&r.isTexture){const i=r.mapping;if(303===i||304===i){if(t.has(r))return A(t.get(r).texture,r.mapping);{const i=r.image;if(i&&i.height>0){const s=e.getRenderTarget(),o=new cA(i.height/2);return o.fromEquirectangularTexture(e,r),t.set(r,o),e.setRenderTarget(s),r.addEventListener("dispose",n),A(o.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}function QA(e){const t={};function A(A){if(void 0!==t[A])return t[A];let n;switch(A){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(A)}return t[A]=n,n}return{has:function(e){return null!==A(e)},init:function(e){e.isWebGL2?A("EXT_color_buffer_float"):(A("WEBGL_depth_texture"),A("OES_texture_float"),A("OES_texture_half_float"),A("OES_texture_half_float_linear"),A("OES_standard_derivatives"),A("OES_element_index_uint"),A("OES_vertex_array_object"),A("ANGLE_instanced_arrays")),A("OES_texture_float_linear"),A("EXT_color_buffer_half_float")},get:function(e){const t=A(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function MA(e,t,A,n){const r={},i=new WeakMap;function s(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const e in o.attributes)t.remove(o.attributes[e]);o.removeEventListener("dispose",s),delete r[o.id];const a=i.get(o);a&&(t.remove(a),i.delete(o)),n.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,A.memory.geometries--}function o(e){const A=[],n=e.index,r=e.attributes.position;let s=0;if(null!==n){const e=n.array;s=n.version;for(let t=0,n=e.length;t<n;t+=3){const n=e[t+0],r=e[t+1],i=e[t+2];A.push(n,r,r,i,i,n)}}else{const e=r.array;s=r.version;for(let t=0,n=e.length/3-1;t<n;t+=3){const e=t+0,n=t+1,r=t+2;A.push(e,n,n,r,r,e)}}const o=new(_t(A)>65535?Ct:xt)(A,1);o.version=s;const a=i.get(e);a&&t.remove(a),i.set(e,o)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",s),r[t.id]=!0,A.memory.geometries++),t},update:function(e){const A=e.attributes;for(const e in A)t.update(A[e],34962);const n=e.morphAttributes;for(const e in n){const A=n[e];for(let e=0,n=A.length;e<n;e++)t.update(A[e],34962)}},getWireframeAttribute:function(e){const t=i.get(e);if(t){const A=e.index;null!==A&&t.version<A.version&&o(e)}else o(e);return i.get(e)}}}function SA(e,t,A,n){const r=n.isWebGL2;let i,s,o;this.setMode=function(e){i=e},this.setIndex=function(e){s=e.type,o=e.bytesPerElement},this.render=function(t,n){e.drawElements(i,n,s,t*o),A.update(n,i,1)},this.renderInstances=function(n,a,c){if(0===c)return;let l,h;if(r)l=e,h="drawElementsInstanced";else if(l=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===l)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[h](i,a,s,n*o,c),A.update(a,i,c)}}function TA(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,A,n){switch(t.calls++,A){case 4:t.triangles+=n*(e/3);break;case 1:t.lines+=n*(e/2);break;case 3:t.lines+=n*(e-1);break;case 2:t.lines+=n*e;break;case 0:t.points+=n*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",A)}}}}function LA(e,t){return e[0]-t[0]}function HA(e,t){return Math.abs(t[1])-Math.abs(e[1])}function IA(e){const t={},A=new Float32Array(8),n=[];for(let e=0;e<8;e++)n[e]=[e,0];return{update:function(r,i,s,o){const a=r.morphTargetInfluences,c=void 0===a?0:a.length;let l=t[i.id];if(void 0===l||l.length!==c){l=[];for(let e=0;e<c;e++)l[e]=[e,0];t[i.id]=l}for(let e=0;e<c;e++){const t=l[e];t[0]=e,t[1]=a[e]}l.sort(HA);for(let e=0;e<8;e++)e<c&&l[e][1]?(n[e][0]=l[e][0],n[e][1]=l[e][1]):(n[e][0]=Number.MAX_SAFE_INTEGER,n[e][1]=0);n.sort(LA);const h=s.morphTargets&&i.morphAttributes.position,u=s.morphNormals&&i.morphAttributes.normal;let d=0;for(let e=0;e<8;e++){const t=n[e],r=t[0],s=t[1];r!==Number.MAX_SAFE_INTEGER&&s?(h&&i.getAttribute("morphTarget"+e)!==h[r]&&i.setAttribute("morphTarget"+e,h[r]),u&&i.getAttribute("morphNormal"+e)!==u[r]&&i.setAttribute("morphNormal"+e,u[r]),A[e]=s,d+=s):(h&&!0===i.hasAttribute("morphTarget"+e)&&i.deleteAttribute("morphTarget"+e),u&&!0===i.hasAttribute("morphNormal"+e)&&i.deleteAttribute("morphNormal"+e),A[e]=0)}const p=i.morphTargetsRelative?1:1-d;o.getUniforms().setValue(e,"morphTargetBaseInfluence",p),o.getUniforms().setValue(e,"morphTargetInfluences",A)}}}function DA(e,t,A,n){let r=new WeakMap;function i(e){const t=e.target;t.removeEventListener("dispose",i),A.remove(t.instanceMatrix),null!==t.instanceColor&&A.remove(t.instanceColor)}return{update:function(e){const s=n.render.frame,o=e.geometry,a=t.get(e,o);return r.get(a)!==s&&(t.update(a),r.set(a,s)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",i)&&e.addEventListener("dispose",i),A.update(e.instanceMatrix,34962),null!==e.instanceColor&&A.update(e.instanceColor,34962)),a},dispose:function(){r=new WeakMap}}}xA.physical={uniforms:tA([xA.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new P(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new mt(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new P},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new mt(0)}}]),vertexShader:vA.meshphysical_vert,fragmentShader:vA.meshphysical_frag};class RA extends k{constructor(e=null,t=1,A=1,r=1){super(null),this.image={data:e,width:t,height:A,depth:r},this.magFilter=i,this.minFilter=i,this.wrapR=n,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}RA.prototype.isDataTexture2DArray=!0;class PA extends k{constructor(e=null,t=1,A=1,r=1){super(null),this.image={data:e,width:t,height:A,depth:r},this.magFilter=i,this.minFilter=i,this.wrapR=n,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}PA.prototype.isDataTexture3D=!0;const NA=new k,OA=new RA,GA=new PA,VA=new aA,kA=[],KA=[],zA=new Float32Array(16),WA=new Float32Array(9),XA=new Float32Array(4);function YA(e,t,A){const n=e[0];if(n<=0||n>0)return e;const r=t*A;let i=kA[r];if(void 0===i&&(i=new Float32Array(r),kA[r]=i),0!==t){n.toArray(i,0);for(let n=1,r=0;n!==t;++n)r+=A,e[n].toArray(i,r)}return i}function JA(e,t){if(e.length!==t.length)return!1;for(let A=0,n=e.length;A<n;A++)if(e[A]!==t[A])return!1;return!0}function jA(e,t){for(let A=0,n=t.length;A<n;A++)e[A]=t[A]}function ZA(e,t){let A=KA[t];void 0===A&&(A=new Int32Array(t),KA[t]=A);for(let n=0;n!==t;++n)A[n]=e.allocateTextureUnit();return A}function qA(e,t){const A=this.cache;A[0]!==t&&(e.uniform1f(this.addr,t),A[0]=t)}function $A(e,t){const A=this.cache;if(void 0!==t.x)A[0]===t.x&&A[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),A[0]=t.x,A[1]=t.y);else{if(JA(A,t))return;e.uniform2fv(this.addr,t),jA(A,t)}}function en(e,t){const A=this.cache;if(void 0!==t.x)A[0]===t.x&&A[1]===t.y&&A[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),A[0]=t.x,A[1]=t.y,A[2]=t.z);else if(void 0!==t.r)A[0]===t.r&&A[1]===t.g&&A[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),A[0]=t.r,A[1]=t.g,A[2]=t.b);else{if(JA(A,t))return;e.uniform3fv(this.addr,t),jA(A,t)}}function tn(e,t){const A=this.cache;if(void 0!==t.x)A[0]===t.x&&A[1]===t.y&&A[2]===t.z&&A[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),A[0]=t.x,A[1]=t.y,A[2]=t.z,A[3]=t.w);else{if(JA(A,t))return;e.uniform4fv(this.addr,t),jA(A,t)}}function An(e,t){const A=this.cache,n=t.elements;if(void 0===n){if(JA(A,t))return;e.uniformMatrix2fv(this.addr,!1,t),jA(A,t)}else{if(JA(A,n))return;XA.set(n),e.uniformMatrix2fv(this.addr,!1,XA),jA(A,n)}}function nn(e,t){const A=this.cache,n=t.elements;if(void 0===n){if(JA(A,t))return;e.uniformMatrix3fv(this.addr,!1,t),jA(A,t)}else{if(JA(A,n))return;WA.set(n),e.uniformMatrix3fv(this.addr,!1,WA),jA(A,n)}}function rn(e,t){const A=this.cache,n=t.elements;if(void 0===n){if(JA(A,t))return;e.uniformMatrix4fv(this.addr,!1,t),jA(A,t)}else{if(JA(A,n))return;zA.set(n),e.uniformMatrix4fv(this.addr,!1,zA),jA(A,n)}}function sn(e,t){const A=this.cache;A[0]!==t&&(e.uniform1i(this.addr,t),A[0]=t)}function on(e,t){const A=this.cache;JA(A,t)||(e.uniform2iv(this.addr,t),jA(A,t))}function an(e,t){const A=this.cache;JA(A,t)||(e.uniform3iv(this.addr,t),jA(A,t))}function cn(e,t){const A=this.cache;JA(A,t)||(e.uniform4iv(this.addr,t),jA(A,t))}function ln(e,t){const A=this.cache;A[0]!==t&&(e.uniform1ui(this.addr,t),A[0]=t)}function hn(e,t){const A=this.cache;JA(A,t)||(e.uniform2uiv(this.addr,t),jA(A,t))}function un(e,t){const A=this.cache;JA(A,t)||(e.uniform3uiv(this.addr,t),jA(A,t))}function dn(e,t){const A=this.cache;JA(A,t)||(e.uniform4uiv(this.addr,t),jA(A,t))}function pn(e,t,A){const n=this.cache,r=A.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),A.safeSetTexture2D(t||NA,r)}function gn(e,t,A){const n=this.cache,r=A.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),A.setTexture3D(t||GA,r)}function fn(e,t,A){const n=this.cache,r=A.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),A.safeSetTextureCube(t||VA,r)}function mn(e,t,A){const n=this.cache,r=A.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),A.setTexture2DArray(t||OA,r)}function Bn(e,t){e.uniform1fv(this.addr,t)}function wn(e,t){const A=YA(t,this.size,2);e.uniform2fv(this.addr,A)}function vn(e,t){const A=YA(t,this.size,3);e.uniform3fv(this.addr,A)}function yn(e,t){const A=YA(t,this.size,4);e.uniform4fv(this.addr,A)}function xn(e,t){const A=YA(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,A)}function Cn(e,t){const A=YA(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,A)}function bn(e,t){const A=YA(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,A)}function _n(e,t){e.uniform1iv(this.addr,t)}function En(e,t){e.uniform2iv(this.addr,t)}function Un(e,t){e.uniform3iv(this.addr,t)}function Fn(e,t){e.uniform4iv(this.addr,t)}function Qn(e,t){e.uniform1uiv(this.addr,t)}function Mn(e,t){e.uniform2uiv(this.addr,t)}function Sn(e,t){e.uniform3uiv(this.addr,t)}function Tn(e,t){e.uniform4uiv(this.addr,t)}function Ln(e,t,A){const n=t.length,r=ZA(A,n);e.uniform1iv(this.addr,r);for(let e=0;e!==n;++e)A.safeSetTexture2D(t[e]||NA,r[e])}function Hn(e,t,A){const n=t.length,r=ZA(A,n);e.uniform1iv(this.addr,r);for(let e=0;e!==n;++e)A.safeSetTextureCube(t[e]||VA,r[e])}function In(e,t,A){this.id=e,this.addr=A,this.cache=[],this.setValue=function(e){switch(e){case 5126:return qA;case 35664:return $A;case 35665:return en;case 35666:return tn;case 35674:return An;case 35675:return nn;case 35676:return rn;case 5124:case 35670:return sn;case 35667:case 35671:return on;case 35668:case 35672:return an;case 35669:case 35673:return cn;case 5125:return ln;case 36294:return hn;case 36295:return un;case 36296:return dn;case 35678:case 36198:case 36298:case 36306:case 35682:return pn;case 35679:case 36299:case 36307:return gn;case 35680:case 36300:case 36308:case 36293:return fn;case 36289:case 36303:case 36311:case 36292:return mn}}(t.type)}function Dn(e,t,A){this.id=e,this.addr=A,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Bn;case 35664:return wn;case 35665:return vn;case 35666:return yn;case 35674:return xn;case 35675:return Cn;case 35676:return bn;case 5124:case 35670:return _n;case 35667:case 35671:return En;case 35668:case 35672:return Un;case 35669:case 35673:return Fn;case 5125:return Qn;case 36294:return Mn;case 36295:return Sn;case 36296:return Tn;case 35678:case 36198:case 36298:case 36306:case 35682:return Ln;case 35680:case 36300:case 36308:case 36293:return Hn}}(t.type)}function Rn(e){this.id=e,this.seq=[],this.map={}}Dn.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),jA(t,e)},Rn.prototype.setValue=function(e,t,A){const n=this.seq;for(let r=0,i=n.length;r!==i;++r){const i=n[r];i.setValue(e,t[i.id],A)}};const Pn=/(\w+)(\])?(\[|\.)?/g;function Nn(e,t){e.seq.push(t),e.map[t.id]=t}function On(e,t,A){const n=e.name,r=n.length;for(Pn.lastIndex=0;;){const i=Pn.exec(n),s=Pn.lastIndex;let o=i[1];const a="]"===i[2],c=i[3];if(a&&(o|=0),void 0===c||"["===c&&s+2===r){Nn(A,void 0===c?new In(o,e,t):new Dn(o,e,t));break}{let e=A.map[o];void 0===e&&(e=new Rn(o),Nn(A,e)),A=e}}}function Gn(e,t){this.seq=[],this.map={};const A=e.getProgramParameter(t,35718);for(let n=0;n<A;++n){const A=e.getActiveUniform(t,n);On(A,e.getUniformLocation(t,A.name),this)}}function Vn(e,t,A){const n=e.createShader(t);return e.shaderSource(n,A),e.compileShader(n),n}Gn.prototype.setValue=function(e,t,A,n){const r=this.map[t];void 0!==r&&r.setValue(e,A,n)},Gn.prototype.setOptional=function(e,t,A){const n=t[A];void 0!==n&&this.setValue(e,A,n)},Gn.upload=function(e,t,A,n){for(let r=0,i=t.length;r!==i;++r){const i=t[r],s=A[i.id];!1!==s.needsUpdate&&i.setValue(e,s.value,n)}},Gn.seqWithValue=function(e,t){const A=[];for(let n=0,r=e.length;n!==r;++n){const r=e[n];r.id in t&&A.push(r)}return A};let kn=0;function Kn(e){switch(e){case b:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function zn(e,t,A){const n=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();return n&&""===r?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+A+"\n"+r+function(e){const t=e.split("\n");for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(e.getShaderSource(t))}function Wn(e,t){const A=Kn(t);return"vec4 "+e+"( vec4 value ) { return "+A[0]+"ToLinear"+A[1]+"; }"}function Xn(e,t){const A=Kn(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+A[0]+A[1]+"; }"}function Yn(e,t){let A;switch(t){case 1:A="Linear";break;case 2:A="Reinhard";break;case 3:A="OptimizedCineon";break;case 4:A="ACESFilmic";break;case 5:A="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),A="Linear"}return"vec3 "+e+"( vec3 color ) { return "+A+"ToneMapping( color ); }"}function Jn(e){return""!==e}function jn(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Zn(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const qn=/^[ \t]*#include +<([\w\d./]+)>/gm;function $n(e){return e.replace(qn,er)}function er(e,t){const A=vA[t];if(void 0===A)throw new Error("Can not resolve #include <"+t+">");return $n(A)}const tr=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Ar=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function nr(e){return e.replace(Ar,ir).replace(tr,rr)}function rr(e,t,A,n){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),ir(0,t,A,n)}function ir(e,t,A,n){let r="";for(let e=parseInt(t);e<parseInt(A);e++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return r}function sr(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function or(e,t,A,n){const r=e.getContext(),i=A.defines;let s=A.vertexShader,o=A.fragmentShader;const a=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(A),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:case 307:t="ENVMAP_TYPE_CUBE_UV"}return t}(A),l=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case 302:case 307:t="ENVMAP_MODE_REFRACTION"}return t}(A),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(A),u=e.gammaFactor>0?e.gammaFactor:1,d=A.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission>0)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Jn).join("\n")}(A),p=function(e){const t=[];for(const A in e){const n=e[A];!1!==n&&t.push("#define "+A+" "+n)}return t.join("\n")}(i),g=r.createProgram();let f,m,B=A.glslVersion?"#version "+A.glslVersion+"\n":"";A.isRawShaderMaterial?(f=[p].filter(Jn).join("\n"),f.length>0&&(f+="\n"),m=[d,p].filter(Jn).join("\n"),m.length>0&&(m+="\n")):(f=[sr(A),"#define SHADER_NAME "+A.shaderName,p,A.instancing?"#define USE_INSTANCING":"",A.instancingColor?"#define USE_INSTANCING_COLOR":"",A.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+u,"#define MAX_BONES "+A.maxBones,A.useFog&&A.fog?"#define USE_FOG":"",A.useFog&&A.fogExp2?"#define FOG_EXP2":"",A.map?"#define USE_MAP":"",A.envMap?"#define USE_ENVMAP":"",A.envMap?"#define "+l:"",A.lightMap?"#define USE_LIGHTMAP":"",A.aoMap?"#define USE_AOMAP":"",A.emissiveMap?"#define USE_EMISSIVEMAP":"",A.bumpMap?"#define USE_BUMPMAP":"",A.normalMap?"#define USE_NORMALMAP":"",A.normalMap&&A.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",A.normalMap&&A.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",A.clearcoatMap?"#define USE_CLEARCOATMAP":"",A.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",A.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",A.displacementMap&&A.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",A.specularMap?"#define USE_SPECULARMAP":"",A.roughnessMap?"#define USE_ROUGHNESSMAP":"",A.metalnessMap?"#define USE_METALNESSMAP":"",A.alphaMap?"#define USE_ALPHAMAP":"",A.transmission?"#define USE_TRANSMISSION":"",A.transmissionMap?"#define USE_TRANSMISSIONMAP":"",A.thicknessMap?"#define USE_THICKNESSMAP":"",A.vertexTangents?"#define USE_TANGENT":"",A.vertexColors?"#define USE_COLOR":"",A.vertexAlphas?"#define USE_COLOR_ALPHA":"",A.vertexUvs?"#define USE_UV":"",A.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",A.flatShading?"#define FLAT_SHADED":"",A.skinning?"#define USE_SKINNING":"",A.useVertexTexture?"#define BONE_TEXTURE":"",A.morphTargets?"#define USE_MORPHTARGETS":"",A.morphNormals&&!1===A.flatShading?"#define USE_MORPHNORMALS":"",A.doubleSided?"#define DOUBLE_SIDED":"",A.flipSided?"#define FLIP_SIDED":"",A.shadowMapEnabled?"#define USE_SHADOWMAP":"",A.shadowMapEnabled?"#define "+a:"",A.sizeAttenuation?"#define USE_SIZEATTENUATION":"",A.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",A.logarithmicDepthBuffer&&A.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Jn).join("\n"),m=[d,sr(A),"#define SHADER_NAME "+A.shaderName,p,A.alphaTest?"#define ALPHATEST "+A.alphaTest+(A.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+u,A.useFog&&A.fog?"#define USE_FOG":"",A.useFog&&A.fogExp2?"#define FOG_EXP2":"",A.map?"#define USE_MAP":"",A.matcap?"#define USE_MATCAP":"",A.envMap?"#define USE_ENVMAP":"",A.envMap?"#define "+c:"",A.envMap?"#define "+l:"",A.envMap?"#define "+h:"",A.lightMap?"#define USE_LIGHTMAP":"",A.aoMap?"#define USE_AOMAP":"",A.emissiveMap?"#define USE_EMISSIVEMAP":"",A.bumpMap?"#define USE_BUMPMAP":"",A.normalMap?"#define USE_NORMALMAP":"",A.normalMap&&A.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",A.normalMap&&A.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",A.clearcoatMap?"#define USE_CLEARCOATMAP":"",A.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",A.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",A.specularMap?"#define USE_SPECULARMAP":"",A.roughnessMap?"#define USE_ROUGHNESSMAP":"",A.metalnessMap?"#define USE_METALNESSMAP":"",A.alphaMap?"#define USE_ALPHAMAP":"",A.sheen?"#define USE_SHEEN":"",A.transmission?"#define USE_TRANSMISSION":"",A.transmissionMap?"#define USE_TRANSMISSIONMAP":"",A.thicknessMap?"#define USE_THICKNESSMAP":"",A.vertexTangents?"#define USE_TANGENT":"",A.vertexColors||A.instancingColor?"#define USE_COLOR":"",A.vertexAlphas?"#define USE_COLOR_ALPHA":"",A.vertexUvs?"#define USE_UV":"",A.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",A.gradientMap?"#define USE_GRADIENTMAP":"",A.flatShading?"#define FLAT_SHADED":"",A.doubleSided?"#define DOUBLE_SIDED":"",A.flipSided?"#define FLIP_SIDED":"",A.shadowMapEnabled?"#define USE_SHADOWMAP":"",A.shadowMapEnabled?"#define "+a:"",A.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",A.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",A.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",A.logarithmicDepthBuffer&&A.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(A.extensionShaderTextureLOD||A.envMap)&&A.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==A.toneMapping?"#define TONE_MAPPING":"",0!==A.toneMapping?vA.tonemapping_pars_fragment:"",0!==A.toneMapping?Yn("toneMapping",A.toneMapping):"",A.dithering?"#define DITHERING":"",vA.encodings_pars_fragment,A.map?Wn("mapTexelToLinear",A.mapEncoding):"",A.matcap?Wn("matcapTexelToLinear",A.matcapEncoding):"",A.envMap?Wn("envMapTexelToLinear",A.envMapEncoding):"",A.emissiveMap?Wn("emissiveMapTexelToLinear",A.emissiveMapEncoding):"",A.lightMap?Wn("lightMapTexelToLinear",A.lightMapEncoding):"",Xn("linearToOutputTexel",A.outputEncoding),A.depthPacking?"#define DEPTH_PACKING "+A.depthPacking:"","\n"].filter(Jn).join("\n")),s=$n(s),s=jn(s,A),s=Zn(s,A),o=$n(o),o=jn(o,A),o=Zn(o,A),s=nr(s),o=nr(o),A.isWebGL2&&!0!==A.isRawShaderMaterial&&(B="#version 300 es\n",f=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+f,m=["#define varying in",A.glslVersion===F?"":"out highp vec4 pc_fragColor;",A.glslVersion===F?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+m);const w=B+m+o,v=Vn(r,35633,B+f+s),y=Vn(r,35632,w);if(r.attachShader(g,v),r.attachShader(g,y),void 0!==A.index0AttributeName?r.bindAttribLocation(g,0,A.index0AttributeName):!0===A.morphTargets&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g),e.debug.checkShaderErrors){const e=r.getProgramInfoLog(g).trim(),t=r.getShaderInfoLog(v).trim(),A=r.getShaderInfoLog(y).trim();let n=!0,i=!0;if(!1===r.getProgramParameter(g,35714)){n=!1;const t=zn(r,v,"vertex"),A=zn(r,y,"fragment");console.error("THREE.WebGLProgram: shader error: ",r.getError(),"35715",r.getProgramParameter(g,35715),"gl.getProgramInfoLog",e,t,A)}else""!==e?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",e):""!==t&&""!==A||(i=!1);i&&(this.diagnostics={runnable:n,programLog:e,vertexShader:{log:t,prefix:f},fragmentShader:{log:A,prefix:m}})}let x,C;return r.deleteShader(v),r.deleteShader(y),this.getUniforms=function(){return void 0===x&&(x=new Gn(r,g)),x},this.getAttributes=function(){return void 0===C&&(C=function(e,t){const A={},n=e.getProgramParameter(t,35721);for(let r=0;r<n;r++){const n=e.getActiveAttrib(t,r).name;A[n]=e.getAttribLocation(t,n)}return A}(r,g)),C},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(g),this.program=void 0},this.name=A.shaderName,this.id=kn++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=v,this.fragmentShader=y,this}function ar(e,t,A,n,r,i){const s=[],o=n.isWebGL2,a=n.logarithmicDepthBuffer,c=n.floatVertexTextures,l=n.maxVertexUniforms,h=n.vertexTextures;let u=n.precision;const d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmission","transmissionMap","thicknessMap"];function g(e){let t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=b,t}return{getParameters:function(r,s,p,f,m){const B=f.fog,w=r.isMeshStandardMaterial?f.environment:null,v=t.get(r.envMap||w),y=d[r.type],x=m.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(c)return 1024;{const e=l,A=Math.floor((e-20)/4),n=Math.min(A,t.length);return n<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+n+"."),0):n}}(m):0;let C,b;if(null!==r.precision&&(u=n.getMaxPrecision(r.precision),u!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",u,"instead.")),y){const e=xA[y];C=e.vertexShader,b=e.fragmentShader}else C=r.vertexShader,b=r.fragmentShader;const _=e.getRenderTarget();return{isWebGL2:o,shaderID:y,shaderName:r.type,vertexShader:C,fragmentShader:b,defines:r.defines,isRawShaderMaterial:!0===r.isRawShaderMaterial,glslVersion:r.glslVersion,precision:u,instancing:!0===m.isInstancedMesh,instancingColor:!0===m.isInstancedMesh&&null!==m.instanceColor,supportsVertexTextures:h,outputEncoding:null!==_?g(_.texture):e.outputEncoding,map:!!r.map,mapEncoding:g(r.map),matcap:!!r.matcap,matcapEncoding:g(r.matcap),envMap:!!v,envMapMode:v&&v.mapping,envMapEncoding:g(v),envMapCubeUV:!!v&&(306===v.mapping||307===v.mapping),lightMap:!!r.lightMap,lightMapEncoding:g(r.lightMap),aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:g(r.emissiveMap),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,objectSpaceNormalMap:1===r.normalMapType,tangentSpaceNormalMap:0===r.normalMapType,clearcoatMap:!!r.clearcoatMap,clearcoatRoughnessMap:!!r.clearcoatRoughnessMap,clearcoatNormalMap:!!r.clearcoatNormalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,sheen:!!r.sheen,transmission:!!r.transmission,transmissionMap:!!r.transmissionMap,thicknessMap:!!r.thicknessMap,combine:r.combine,vertexTangents:r.normalMap&&r.vertexTangents,vertexColors:r.vertexColors,vertexAlphas:!0===r.vertexColors&&m.geometry&&m.geometry.attributes.color&&4===m.geometry.attributes.color.itemSize,vertexUvs:!!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatMap||r.clearcoatRoughnessMap||r.clearcoatNormalMap||r.displacementMap||r.transmissionMap||r.thicknessMap),uvsVertexOnly:!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatNormalMap||r.transmission||r.transmissionMap||r.thicknessMap||!r.displacementMap),fog:!!B,useFog:r.fog,fogExp2:B&&B.isFogExp2,flatShading:!!r.flatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:a,skinning:!0===m.isSkinnedMesh&&x>0,maxBones:x,useVertexTexture:c,morphTargets:r.morphTargets,morphNormals:r.morphNormals,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:i.numPlanes,numClipIntersection:i.numIntersection,dithering:r.dithering,shadowMapEnabled:e.shadowMap.enabled&&p.length>0,shadowMapType:e.shadowMap.type,toneMapping:r.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:2===r.side,flipSided:1===r.side,depthPacking:void 0!==r.depthPacking&&r.depthPacking,index0AttributeName:r.index0AttributeName,extensionDerivatives:r.extensions&&r.extensions.derivatives,extensionFragDepth:r.extensions&&r.extensions.fragDepth,extensionDrawBuffers:r.extensions&&r.extensions.drawBuffers,extensionShaderTextureLOD:r.extensions&&r.extensions.shaderTextureLOD,rendererExtensionFragDepth:o||A.has("EXT_frag_depth"),rendererExtensionDrawBuffers:o||A.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:o||A.has("EXT_shader_texture_lod"),customProgramCacheKey:r.customProgramCacheKey()}},getProgramCacheKey:function(t){const A=[];if(t.shaderID?A.push(t.shaderID):(A.push(t.fragmentShader),A.push(t.vertexShader)),void 0!==t.defines)for(const e in t.defines)A.push(e),A.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<p.length;e++)A.push(t[p[e]]);A.push(e.outputEncoding),A.push(e.gammaFactor)}return A.push(t.customProgramCacheKey),A.join()},getUniforms:function(e){const t=d[e.type];let A;if(t){const e=xA[t];A=AA.clone(e.uniforms)}else A=e.uniforms;return A},acquireProgram:function(t,A){let n;for(let e=0,t=s.length;e<t;e++){const t=s[e];if(t.cacheKey===A){n=t,++n.usedTimes;break}}return void 0===n&&(n=new or(e,A,t,r),s.push(n)),n},releaseProgram:function(e){if(0==--e.usedTimes){const t=s.indexOf(e);s[t]=s[s.length-1],s.pop(),e.destroy()}},programs:s}}function cr(){let e=new WeakMap;return{get:function(t){let A=e.get(t);return void 0===A&&(A={},e.set(t,A)),A},remove:function(t){e.delete(t)},update:function(t,A,n){e.get(t)[A]=n},dispose:function(){e=new WeakMap}}}function lr(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function hr(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function ur(e){const t=[];let A=0;const n=[],r=[],i=[],s={id:-1};function o(n,r,i,o,a,c){let l=t[A];const h=e.get(i);return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,program:h.program||s,groupOrder:o,renderOrder:n.renderOrder,z:a,group:c},t[A]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.program=h.program||s,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=a,l.group=c),A++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){A=0,n.length=0,r.length=0,i.length=0},push:function(e,t,A,s,a,c){const l=o(e,t,A,s,a,c);A.transmission>0?r.push(l):!0===A.transparent?i.push(l):n.push(l)},unshift:function(e,t,A,s,a,c){const l=o(e,t,A,s,a,c);A.transmission>0?r.unshift(l):!0===A.transparent?i.unshift(l):n.unshift(l)},finish:function(){for(let e=A,n=t.length;e<n;e++){const A=t[e];if(null===A.id)break;A.id=null,A.object=null,A.geometry=null,A.material=null,A.program=null,A.group=null}},sort:function(e,t){n.length>1&&n.sort(e||lr),r.length>1&&r.sort(t||hr),i.length>1&&i.sort(t||hr)}}}function dr(e){let t=new WeakMap;return{get:function(A,n){let r;return!1===t.has(A)?(r=new ur(e),t.set(A,[r])):n>=t.get(A).length?(r=new ur(e),t.get(A).push(r)):r=t.get(A)[n],r},dispose:function(){t=new WeakMap}}}function pr(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let A;switch(t.type){case"DirectionalLight":A={direction:new J,color:new mt};break;case"SpotLight":A={position:new J,direction:new J,color:new mt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":A={position:new J,color:new mt,distance:0,decay:0};break;case"HemisphereLight":A={direction:new J,skyColor:new mt,groundColor:new mt};break;case"RectAreaLight":A={color:new mt,position:new J,halfWidth:new J,halfHeight:new J}}return e[t.id]=A,A}}}let gr=0;function fr(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function mr(e,t){const A=new pr,n=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let A;switch(t.type){case"DirectionalLight":case"SpotLight":A={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new P};break;case"PointLight":A={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new P,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=A,A}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)r.probe.push(new J);const i=new J,s=new Ee,o=new Ee;return{setup:function(i){let s=0,o=0,a=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let c=0,l=0,h=0,u=0,d=0,p=0,g=0,f=0;i.sort(fr);for(let e=0,t=i.length;e<t;e++){const t=i[e],m=t.color,B=t.intensity,w=t.distance,v=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)s+=m.r*B,o+=m.g*B,a+=m.b*B;else if(t.isLightProbe)for(let e=0;e<9;e++)r.probe[e].addScaledVector(t.sh.coefficients[e],B);else if(t.isDirectionalLight){const e=A.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),t.castShadow){const e=t.shadow,A=n.get(t);A.shadowBias=e.bias,A.shadowNormalBias=e.normalBias,A.shadowRadius=e.radius,A.shadowMapSize=e.mapSize,r.directionalShadow[c]=A,r.directionalShadowMap[c]=v,r.directionalShadowMatrix[c]=t.shadow.matrix,p++}r.directional[c]=e,c++}else if(t.isSpotLight){const e=A.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(m).multiplyScalar(B),e.distance=w,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,A=n.get(t);A.shadowBias=e.bias,A.shadowNormalBias=e.normalBias,A.shadowRadius=e.radius,A.shadowMapSize=e.mapSize,r.spotShadow[h]=A,r.spotShadowMap[h]=v,r.spotShadowMatrix[h]=t.shadow.matrix,f++}r.spot[h]=e,h++}else if(t.isRectAreaLight){const e=A.get(t);e.color.copy(m).multiplyScalar(B),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),r.rectArea[u]=e,u++}else if(t.isPointLight){const e=A.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,A=n.get(t);A.shadowBias=e.bias,A.shadowNormalBias=e.normalBias,A.shadowRadius=e.radius,A.shadowMapSize=e.mapSize,A.shadowCameraNear=e.camera.near,A.shadowCameraFar=e.camera.far,r.pointShadow[l]=A,r.pointShadowMap[l]=v,r.pointShadowMatrix[l]=t.shadow.matrix,g++}r.point[l]=e,l++}else if(t.isHemisphereLight){const e=A.get(t);e.skyColor.copy(t.color).multiplyScalar(B),e.groundColor.copy(t.groundColor).multiplyScalar(B),r.hemi[d]=e,d++}}u>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=yA.LTC_FLOAT_1,r.rectAreaLTC2=yA.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=yA.LTC_HALF_1,r.rectAreaLTC2=yA.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=s,r.ambient[1]=o,r.ambient[2]=a;const m=r.hash;m.directionalLength===c&&m.pointLength===l&&m.spotLength===h&&m.rectAreaLength===u&&m.hemiLength===d&&m.numDirectionalShadows===p&&m.numPointShadows===g&&m.numSpotShadows===f||(r.directional.length=c,r.spot.length=h,r.rectArea.length=u,r.point.length=l,r.hemi.length=d,r.directionalShadow.length=p,r.directionalShadowMap.length=p,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=f,r.spotShadowMap.length=f,r.directionalShadowMatrix.length=p,r.pointShadowMatrix.length=g,r.spotShadowMatrix.length=f,m.directionalLength=c,m.pointLength=l,m.spotLength=h,m.rectAreaLength=u,m.hemiLength=d,m.numDirectionalShadows=p,m.numPointShadows=g,m.numSpotShadows=f,r.version=gr++)},setupView:function(e,t){let A=0,n=0,a=0,c=0,l=0;const h=t.matrixWorldInverse;for(let t=0,u=e.length;t<u;t++){const u=e[t];if(u.isDirectionalLight){const e=r.directional[A];e.direction.setFromMatrixPosition(u.matrixWorld),i.setFromMatrixPosition(u.target.matrixWorld),e.direction.sub(i),e.direction.transformDirection(h),A++}else if(u.isSpotLight){const e=r.spot[a];e.position.setFromMatrixPosition(u.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(u.matrixWorld),i.setFromMatrixPosition(u.target.matrixWorld),e.direction.sub(i),e.direction.transformDirection(h),a++}else if(u.isRectAreaLight){const e=r.rectArea[c];e.position.setFromMatrixPosition(u.matrixWorld),e.position.applyMatrix4(h),o.identity(),s.copy(u.matrixWorld),s.premultiply(h),o.extractRotation(s),e.halfWidth.set(.5*u.width,0,0),e.halfHeight.set(0,.5*u.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(u.isPointLight){const e=r.point[n];e.position.setFromMatrixPosition(u.matrixWorld),e.position.applyMatrix4(h),n++}else if(u.isHemisphereLight){const e=r.hemi[l];e.direction.setFromMatrixPosition(u.matrixWorld),e.direction.transformDirection(h),e.direction.normalize(),l++}}},state:r}}function Br(e,t){const A=new mr(e,t),n=[],r=[];return{init:function(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:A},setupLights:function(){A.setup(n)},setupLightsView:function(e){A.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function wr(e,t){let A=new WeakMap;return{get:function(n,r=0){let i;return!1===A.has(n)?(i=new Br(e,t),A.set(n,[i])):r>=A.get(n).length?(i=new Br(e,t),A.get(n).push(i)):i=A.get(n)[r],i},dispose:function(){A=new WeakMap}}}class vr extends lt{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}vr.prototype.isMeshDepthMaterial=!0;class yr extends lt{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new J,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function xr(e,t,A){let n=new fA;const r=new P,o=new P,a=new z,c=[],l=[],h={},u=A.maxTextureSize,d={0:1,1:0,2:2},p=new nA({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new P},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=p.clone();f.defines.HORIZONTAL_PASS=1;const m=new Lt;m.setAttribute("position",new yt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const B=new Zt(m,p),w=this;function v(A,n){const r=t.update(B);p.uniforms.shadow_pass.value=A.map.texture,p.uniforms.resolution.value=A.mapSize,p.uniforms.radius.value=A.radius,e.setRenderTarget(A.mapPass),e.clear(),e.renderBufferDirect(n,null,r,p,B,null),f.uniforms.shadow_pass.value=A.mapPass.texture,f.uniforms.resolution.value=A.mapSize,f.uniforms.radius.value=A.radius,e.setRenderTarget(A.map),e.clear(),e.renderBufferDirect(n,null,r,f,B,null)}function y(e){const t=e<<0;let A=c[t];return void 0===A&&(A=new vr({depthPacking:3201,morphTargets:e}),c[t]=A),A}function x(e){const t=e<<0;let A=l[t];return void 0===A&&(A=new yr({morphTargets:e}),l[t]=A),A}function C(t,A,n,r,i,s,o){let a=null,c=y,l=t.customDepthMaterial;if(!0===r.isPointLight&&(c=x,l=t.customDistanceMaterial),void 0===l){let e=!1;!0===n.morphTargets&&(e=A.morphAttributes&&A.morphAttributes.position&&A.morphAttributes.position.length>0),a=c(e)}else a=l;if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){const e=a.uuid,t=n.uuid;let A=h[e];void 0===A&&(A={},h[e]=A);let r=A[t];void 0===r&&(r=a.clone(),A[t]=r),a=r}return a.visible=n.visible,a.wireframe=n.wireframe,a.side=3===o?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===r.isPointLight&&!0===a.isMeshDistanceMaterial&&(a.referencePosition.setFromMatrixPosition(r.matrixWorld),a.nearDistance=i,a.farDistance=s),a}function b(A,r,i,s,o){if(!1===A.visible)return;if(A.layers.test(r.layers)&&(A.isMesh||A.isLine||A.isPoints)&&(A.castShadow||A.receiveShadow&&3===o)&&(!A.frustumCulled||n.intersectsObject(A))){A.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,A.matrixWorld);const n=t.update(A),r=A.material;if(Array.isArray(r)){const t=n.groups;for(let a=0,c=t.length;a<c;a++){const c=t[a],l=r[c.materialIndex];if(l&&l.visible){const t=C(A,n,l,s,i.near,i.far,o);e.renderBufferDirect(i,null,n,t,A,c)}}}else if(r.visible){const t=C(A,n,r,s,i.near,i.far,o);e.renderBufferDirect(i,null,n,t,A,null)}}const a=A.children;for(let e=0,t=a.length;e<t;e++)b(a[e],r,i,s,o)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,A,c){if(!1===w.enabled)return;if(!1===w.autoUpdate&&!1===w.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),p=e.state;p.setBlending(0),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(let l=0,h=t.length;l<h;l++){const h=t[l],d=h.shadow;if(void 0===d){console.warn("THREE.WebGLShadowMap:",h,"has no shadow.");continue}if(!1===d.autoUpdate&&!1===d.needsUpdate)continue;r.copy(d.mapSize);const f=d.getFrameExtents();if(r.multiply(f),o.copy(d.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(o.x=Math.floor(u/f.x),r.x=o.x*f.x,d.mapSize.x=o.x),r.y>u&&(o.y=Math.floor(u/f.y),r.y=o.y*f.y,d.mapSize.y=o.y)),null===d.map&&!d.isPointLightShadow&&3===this.type){const e={minFilter:s,magFilter:s,format:g};d.map=new W(r.x,r.y,e),d.map.texture.name=h.name+".shadowMap",d.mapPass=new W(r.x,r.y,e),d.camera.updateProjectionMatrix()}if(null===d.map){const e={minFilter:i,magFilter:i,format:g};d.map=new W(r.x,r.y,e),d.map.texture.name=h.name+".shadowMap",d.camera.updateProjectionMatrix()}e.setRenderTarget(d.map),e.clear();const m=d.getViewportCount();for(let e=0;e<m;e++){const t=d.getViewport(e);a.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),p.viewport(a),d.updateMatrices(h,e),n=d.getFrustum(),b(A,c,d.camera,h,this.type)}d.isPointLightShadow||3!==this.type||v(d,c),d.needsUpdate=!1}w.needsUpdate=!1,e.setRenderTarget(l,h,d)}}function Cr(t,A,n){const r=n.isWebGL2,i=new function(){let e=!1;const A=new z;let n=null;const r=new z(0,0,0,0);return{setMask:function(A){n===A||e||(t.colorMask(A,A,A,A),n=A)},setLocked:function(t){e=t},setClear:function(e,n,i,s,o){!0===o&&(e*=s,n*=s,i*=s),A.set(e,n,i,s),!1===r.equals(A)&&(t.clearColor(e,n,i,s),r.copy(A))},reset:function(){e=!1,n=null,r.set(-1,0,0,0)}}},s=new function(){let e=!1,A=null,n=null,r=null;return{setTest:function(e){e?P(2929):N(2929)},setMask:function(n){A===n||e||(t.depthMask(n),A=n)},setFunc:function(e){if(n!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);n=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,A=null,n=null,r=null}}},o=new function(){let e=!1,A=null,n=null,r=null,i=null,s=null,o=null,a=null,c=null;return{setTest:function(t){e||(t?P(2960):N(2960))},setMask:function(n){A===n||e||(t.stencilMask(n),A=n)},setFunc:function(e,A,s){n===e&&r===A&&i===s||(t.stencilFunc(e,A,s),n=e,r=A,i=s)},setOp:function(e,A,n){s===e&&o===A&&a===n||(t.stencilOp(e,A,n),s=e,o=A,a=n)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,A=null,n=null,r=null,i=null,s=null,o=null,a=null,c=null}}};let a={},c=null,l={},h=null,u=!1,d=null,p=null,g=null,f=null,m=null,B=null,w=null,v=!1,y=null,x=null,C=null,b=null,_=null;const E=t.getParameter(35661);let U=!1,F=0;const Q=t.getParameter(7938);-1!==Q.indexOf("WebGL")?(F=parseFloat(/^WebGL (\d)/.exec(Q)[1]),U=F>=1):-1!==Q.indexOf("OpenGL ES")&&(F=parseFloat(/^OpenGL ES (\d)/.exec(Q)[1]),U=F>=2);let M=null,S={};const T=t.getParameter(3088),L=t.getParameter(2978),H=(new z).fromArray(T),I=(new z).fromArray(L);function D(e,A,n){const r=new Uint8Array(4),i=t.createTexture();t.bindTexture(e,i),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let e=0;e<n;e++)t.texImage2D(A+e,0,6408,1,1,0,6408,5121,r);return i}const R={};function P(e){!0!==a[e]&&(t.enable(e),a[e]=!0)}function N(e){!1!==a[e]&&(t.disable(e),a[e]=!1)}R[3553]=D(3553,3553,1),R[34067]=D(34067,34069,6),i.setClear(0,0,0,1),s.setClear(1),o.setClear(0),P(2929),s.setFunc(3),k(!1),K(1),P(2884),V(0);const O={[e]:32774,101:32778,102:32779};if(r)O[103]=32775,O[104]=32776;else{const e=A.get("EXT_blend_minmax");null!==e&&(O[103]=e.MIN_EXT,O[104]=e.MAX_EXT)}const G={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function V(A,n,r,i,s,o,a,c){if(0!==A){if(!1===u&&(P(3042),u=!0),5===A)s=s||n,o=o||r,a=a||i,n===p&&s===m||(t.blendEquationSeparate(O[n],O[s]),p=n,m=s),r===g&&i===f&&o===B&&a===w||(t.blendFuncSeparate(G[r],G[i],G[o],G[a]),g=r,f=i,B=o,w=a),d=A,v=null;else if(A!==d||c!==v){if(p===e&&m===e||(t.blendEquation(32774),p=e,m=e),c)switch(A){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,0,769,771);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",A)}else switch(A){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFunc(0,769);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",A)}g=null,f=null,B=null,w=null,d=A,v=c}}else!0===u&&(N(3042),u=!1)}function k(e){y!==e&&(e?t.frontFace(2304):t.frontFace(2305),y=e)}function K(e){0!==e?(P(2884),e!==x&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):N(2884),x=e}function W(e,A,n){e?(P(32823),b===A&&_===n||(t.polygonOffset(A,n),b=A,_=n)):N(32823)}function X(e){void 0===e&&(e=33984+E-1),M!==e&&(t.activeTexture(e),M=e)}return{buffers:{color:i,depth:s,stencil:o},enable:P,disable:N,bindFramebuffer:function(e,A){return null===A&&null!==c&&(A=c),l[e]!==A&&(t.bindFramebuffer(e,A),l[e]=A,r&&(36009===e&&(l[36160]=A),36160===e&&(l[36009]=A)),!0)},bindXRFramebuffer:function(e){e!==c&&(t.bindFramebuffer(36160,e),c=e)},useProgram:function(e){return h!==e&&(t.useProgram(e),h=e,!0)},setBlending:V,setMaterial:function(e,t){2===e.side?N(2884):P(2884);let A=1===e.side;t&&(A=!A),k(A),1===e.blending&&!1===e.transparent?V(0):V(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),i.setMask(e.colorWrite);const n=e.stencilWrite;o.setTest(n),n&&(o.setMask(e.stencilWriteMask),o.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),o.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),W(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?P(32926):N(32926)},setFlipSided:k,setCullFace:K,setLineWidth:function(e){e!==C&&(U&&t.lineWidth(e),C=e)},setPolygonOffset:W,setScissorTest:function(e){e?P(3089):N(3089)},activeTexture:X,bindTexture:function(e,A){null===M&&X();let n=S[M];void 0===n&&(n={type:void 0,texture:void 0},S[M]=n),n.type===e&&n.texture===A||(t.bindTexture(e,A||R[e]),n.type=e,n.texture=A)},unbindTexture:function(){const e=S[M];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===H.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),H.copy(e))},viewport:function(e){!1===I.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),I.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===r&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),a={},M=null,S={},c=null,l={},h=null,u=!1,d=null,p=null,g=null,f=null,m=null,B=null,w=null,v=!1,y=null,x=null,C=null,b=null,_=null,H.set(0,0,t.canvas.width,t.canvas.height),I.set(0,0,t.canvas.width,t.canvas.height),i.reset(),s.reset(),o.reset()}}}function br(e,A,a,B,w,v,y){const x=w.isWebGL2,C=w.maxTextures,b=w.maxCubemapSize,_=w.maxTextureSize,E=w.maxSamples,U=new WeakMap;let F,Q=!1;try{Q="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function M(e,t){return Q?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function S(e,t,A,n){let r=1;if((e.width>n||e.height>n)&&(r=n/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const n=t?R:Math.floor,i=n(r*e.width),s=n(r*e.height);void 0===F&&(F=M(i,s));const o=A?M(i,s):F;return o.width=i,o.height=s,o.getContext("2d").drawImage(e,0,0,i,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+i+"x"+s+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function T(e){return D(e.width)&&D(e.height)}function L(e,t){return e.generateMipmaps&&t&&e.minFilter!==i&&e.minFilter!==s}function H(t,A,n,r){e.generateMipmap(t),B.get(A).__maxMipLevel=Math.log2(Math.max(n,r))}function I(t,n,r){if(!1===x)return n;if(null!==t){if(void 0!==e[t])return e[t];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+t+"'")}let i=n;return 6403===n&&(5126===r&&(i=33326),5131===r&&(i=33325),5121===r&&(i=33321)),6407===n&&(5126===r&&(i=34837),5131===r&&(i=34843),5121===r&&(i=32849)),6408===n&&(5126===r&&(i=34836),5131===r&&(i=34842),5121===r&&(i=32856)),33325!==i&&33326!==i&&34842!==i&&34836!==i||A.get("EXT_color_buffer_float"),i}function P(e){return e===i||1004===e||1005===e?9728:9729}function N(t){const A=t.target;A.removeEventListener("dispose",N),function(t){const A=B.get(t);void 0!==A.__webglInit&&(e.deleteTexture(A.__webglTexture),B.remove(t))}(A),A.isVideoTexture&&U.delete(A),y.memory.textures--}function O(t){const A=t.target;A.removeEventListener("dispose",O),function(t){const A=t.texture,n=B.get(t),r=B.get(A);if(t){if(void 0!==r.__webglTexture&&(e.deleteTexture(r.__webglTexture),y.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&e.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(let t=0,n=A.length;t<n;t++){const n=B.get(A[t]);n.__webglTexture&&(e.deleteTexture(n.__webglTexture),y.memory.textures--),B.remove(A[t])}B.remove(A),B.remove(t)}}(A)}let G=0;function V(e,t){const A=B.get(e);if(e.isVideoTexture&&function(e){const t=y.render.frame;U.get(e)!==t&&(U.set(e,t),e.update())}(e),e.version>0&&A.__version!==e.version){const n=e.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void Y(A,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}a.activeTexture(33984+t),a.bindTexture(3553,A.__webglTexture)}function k(t,A){const n=B.get(t);t.version>0&&n.__version!==t.version?function(t,A,n){if(6!==A.image.length)return;X(t,A),a.activeTexture(33984+n),a.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,A.flipY),e.pixelStorei(37441,A.premultiplyAlpha),e.pixelStorei(3317,A.unpackAlignment),e.pixelStorei(37443,0);const r=A&&(A.isCompressedTexture||A.image[0].isCompressedTexture),i=A.image[0]&&A.image[0].isDataTexture,s=[];for(let e=0;e<6;e++)s[e]=r||i?i?A.image[e].image:A.image[e]:S(A.image[e],!1,!0,b);const o=s[0],c=T(o)||x,l=v.convert(A.format),h=v.convert(A.type),u=I(A.internalFormat,l,h);let d;if(W(34067,A,c),r){for(let e=0;e<6;e++){d=s[e].mipmaps;for(let t=0;t<d.length;t++){const n=d[t];A.format!==g&&A.format!==p?null!==l?a.compressedTexImage2D(34069+e,t,u,n.width,n.height,0,n.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):a.texImage2D(34069+e,t,u,n.width,n.height,0,l,h,n.data)}}t.__maxMipLevel=d.length-1}else{d=A.mipmaps;for(let e=0;e<6;e++)if(i){a.texImage2D(34069+e,0,u,s[e].width,s[e].height,0,l,h,s[e].data);for(let t=0;t<d.length;t++){const A=d[t].image[e].image;a.texImage2D(34069+e,t+1,u,A.width,A.height,0,l,h,A.data)}}else{a.texImage2D(34069+e,0,u,l,h,s[e]);for(let t=0;t<d.length;t++){const A=d[t];a.texImage2D(34069+e,t+1,u,l,h,A.image[e])}}t.__maxMipLevel=d.length}L(A,c)&&H(34067,A,o.width,o.height),t.__version=A.version,A.onUpdate&&A.onUpdate(A)}(n,t,A):(a.activeTexture(33984+A),a.bindTexture(34067,n.__webglTexture))}const K={[t]:10497,[n]:33071,[r]:33648},z={[i]:9728,1004:9984,1005:9986,[s]:9729,1007:9985,[o]:9987};function W(t,r,o){if(o?(e.texParameteri(t,10242,K[r.wrapS]),e.texParameteri(t,10243,K[r.wrapT]),32879!==t&&35866!==t||e.texParameteri(t,32882,K[r.wrapR]),e.texParameteri(t,10240,z[r.magFilter]),e.texParameteri(t,10241,z[r.minFilter])):(e.texParameteri(t,10242,33071),e.texParameteri(t,10243,33071),32879!==t&&35866!==t||e.texParameteri(t,32882,33071),r.wrapS===n&&r.wrapT===n||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(t,10240,P(r.magFilter)),e.texParameteri(t,10241,P(r.minFilter)),r.minFilter!==i&&r.minFilter!==s&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===A.has("EXT_texture_filter_anisotropic")){const n=A.get("EXT_texture_filter_anisotropic");if(r.type===h&&!1===A.has("OES_texture_float_linear"))return;if(!1===x&&r.type===u&&!1===A.has("OES_texture_half_float_linear"))return;(r.anisotropy>1||B.get(r).__currentAnisotropy)&&(e.texParameterf(t,n.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(r.anisotropy,w.getMaxAnisotropy())),B.get(r).__currentAnisotropy=r.anisotropy)}}function X(t,A){void 0===t.__webglInit&&(t.__webglInit=!0,A.addEventListener("dispose",N),t.__webglTexture=e.createTexture(),y.memory.textures++)}function Y(t,A,r){let o=3553;A.isDataTexture2DArray&&(o=35866),A.isDataTexture3D&&(o=32879),X(t,A),a.activeTexture(33984+r),a.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,A.flipY),e.pixelStorei(37441,A.premultiplyAlpha),e.pixelStorei(3317,A.unpackAlignment),e.pixelStorei(37443,0);const u=function(e){return!x&&(e.wrapS!==n||e.wrapT!==n||e.minFilter!==i&&e.minFilter!==s)}(A)&&!1===T(A.image),B=S(A.image,u,!1,_),w=T(B)||x,y=v.convert(A.format);let C,b=v.convert(A.type),E=I(A.internalFormat,y,b);W(o,A,w);const U=A.mipmaps;if(A.isDepthTexture)E=6402,x?E=A.type===h?36012:A.type===l?33190:A.type===d?35056:33189:A.type===h&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),A.format===f&&6402===E&&A.type!==c&&A.type!==l&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),A.type=c,b=v.convert(A.type)),A.format===m&&6402===E&&(E=34041,A.type!==d&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),A.type=d,b=v.convert(A.type))),a.texImage2D(3553,0,E,B.width,B.height,0,y,b,null);else if(A.isDataTexture)if(U.length>0&&w){for(let e=0,t=U.length;e<t;e++)C=U[e],a.texImage2D(3553,e,E,C.width,C.height,0,y,b,C.data);A.generateMipmaps=!1,t.__maxMipLevel=U.length-1}else a.texImage2D(3553,0,E,B.width,B.height,0,y,b,B.data),t.__maxMipLevel=0;else if(A.isCompressedTexture){for(let e=0,t=U.length;e<t;e++)C=U[e],A.format!==g&&A.format!==p?null!==y?a.compressedTexImage2D(3553,e,E,C.width,C.height,0,C.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):a.texImage2D(3553,e,E,C.width,C.height,0,y,b,C.data);t.__maxMipLevel=U.length-1}else if(A.isDataTexture2DArray)a.texImage3D(35866,0,E,B.width,B.height,B.depth,0,y,b,B.data),t.__maxMipLevel=0;else if(A.isDataTexture3D)a.texImage3D(32879,0,E,B.width,B.height,B.depth,0,y,b,B.data),t.__maxMipLevel=0;else if(U.length>0&&w){for(let e=0,t=U.length;e<t;e++)C=U[e],a.texImage2D(3553,e,E,y,b,C);A.generateMipmaps=!1,t.__maxMipLevel=U.length-1}else a.texImage2D(3553,0,E,y,b,B),t.__maxMipLevel=0;L(A,w)&&H(o,A,B.width,B.height),t.__version=A.version,A.onUpdate&&A.onUpdate(A)}function J(t,A,n,r,i){const s=v.convert(n.format),o=v.convert(n.type),c=I(n.internalFormat,s,o);32879===i||35866===i?a.texImage3D(i,0,c,A.width,A.height,A.depth,0,s,o,null):a.texImage2D(i,0,c,A.width,A.height,0,s,o,null),a.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,r,i,B.get(n).__webglTexture,0),a.bindFramebuffer(36160,null)}function j(t,A,n){if(e.bindRenderbuffer(36161,t),A.depthBuffer&&!A.stencilBuffer){let r=33189;if(n){const t=A.depthTexture;t&&t.isDepthTexture&&(t.type===h?r=36012:t.type===l&&(r=33190));const n=Z(A);e.renderbufferStorageMultisample(36161,n,r,A.width,A.height)}else e.renderbufferStorage(36161,r,A.width,A.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(A.depthBuffer&&A.stencilBuffer){if(n){const t=Z(A);e.renderbufferStorageMultisample(36161,t,35056,A.width,A.height)}else e.renderbufferStorage(36161,34041,A.width,A.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===A.isWebGLMultipleRenderTargets?A.texture[0]:A.texture,r=v.convert(t.format),i=v.convert(t.type),s=I(t.internalFormat,r,i);if(n){const t=Z(A);e.renderbufferStorageMultisample(36161,t,s,A.width,A.height)}else e.renderbufferStorage(36161,s,A.width,A.height)}e.bindRenderbuffer(36161,null)}function Z(e){return x&&e.isWebGLMultisampleRenderTarget?Math.min(E,e.samples):0}let q=!1,$=!1;this.allocateTextureUnit=function(){const e=G;return e>=C&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+C),G+=1,e},this.resetTextureUnits=function(){G=0},this.setTexture2D=V,this.setTexture2DArray=function(e,t){const A=B.get(e);e.version>0&&A.__version!==e.version?Y(A,e,t):(a.activeTexture(33984+t),a.bindTexture(35866,A.__webglTexture))},this.setTexture3D=function(e,t){const A=B.get(e);e.version>0&&A.__version!==e.version?Y(A,e,t):(a.activeTexture(33984+t),a.bindTexture(32879,A.__webglTexture))},this.setTextureCube=k,this.setupRenderTarget=function(t){const A=t.texture,n=B.get(t),r=B.get(A);t.addEventListener("dispose",O),!0!==t.isWebGLMultipleRenderTargets&&(r.__webglTexture=e.createTexture(),r.__version=A.version,y.memory.textures++);const i=!0===t.isWebGLCubeRenderTarget,s=!0===t.isWebGLMultipleRenderTargets,o=!0===t.isWebGLMultisampleRenderTarget,c=A.isDataTexture3D||A.isDataTexture2DArray,l=T(t)||x;if(!x||A.format!==p||A.type!==h&&A.type!==u||(A.format=g,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),i){n.__webglFramebuffer=[];for(let t=0;t<6;t++)n.__webglFramebuffer[t]=e.createFramebuffer()}else if(n.__webglFramebuffer=e.createFramebuffer(),s)if(w.drawBuffers){const A=t.texture;for(let t=0,n=A.length;t<n;t++){const n=B.get(A[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),y.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(o)if(x){n.__webglMultisampledFramebuffer=e.createFramebuffer(),n.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,n.__webglColorRenderbuffer);const r=v.convert(A.format),i=v.convert(A.type),s=I(A.internalFormat,r,i),o=Z(t);e.renderbufferStorageMultisample(36161,o,s,t.width,t.height),a.bindFramebuffer(36160,n.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,n.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(n.__webglDepthRenderbuffer=e.createRenderbuffer(),j(n.__webglDepthRenderbuffer,t,!0)),a.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(i){a.bindTexture(34067,r.__webglTexture),W(34067,A,l);for(let e=0;e<6;e++)J(n.__webglFramebuffer[e],t,A,36064,34069+e);L(A,l)&&H(34067,A,t.width,t.height),a.bindTexture(34067,null)}else if(s){const e=t.texture;for(let A=0,r=e.length;A<r;A++){const r=e[A],i=B.get(r);a.bindTexture(3553,i.__webglTexture),W(3553,r,l),J(n.__webglFramebuffer,t,r,36064+A,3553),L(r,l)&&H(3553,r,t.width,t.height)}a.bindTexture(3553,null)}else{let e=3553;c&&(x?e=A.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),a.bindTexture(e,r.__webglTexture),W(e,A,l),J(n.__webglFramebuffer,t,A,36064,e),L(A,l)&&H(3553,A,t.width,t.height),a.bindTexture(3553,null)}t.depthBuffer&&function(t){const A=B.get(t),n=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(n)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,A){if(A&&A.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(a.bindFramebuffer(36160,t),!A.depthTexture||!A.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");B.get(A.depthTexture).__webglTexture&&A.depthTexture.image.width===A.width&&A.depthTexture.image.height===A.height||(A.depthTexture.image.width=A.width,A.depthTexture.image.height=A.height,A.depthTexture.needsUpdate=!0),V(A.depthTexture,0);const n=B.get(A.depthTexture).__webglTexture;if(A.depthTexture.format===f)e.framebufferTexture2D(36160,36096,3553,n,0);else{if(A.depthTexture.format!==m)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,n,0)}}(A.__webglFramebuffer,t)}else if(n){A.__webglDepthbuffer=[];for(let n=0;n<6;n++)a.bindFramebuffer(36160,A.__webglFramebuffer[n]),A.__webglDepthbuffer[n]=e.createRenderbuffer(),j(A.__webglDepthbuffer[n],t,!1)}else a.bindFramebuffer(36160,A.__webglFramebuffer),A.__webglDepthbuffer=e.createRenderbuffer(),j(A.__webglDepthbuffer,t,!1);a.bindFramebuffer(36160,null)}(t)},this.updateRenderTargetMipmap=function(e){const t=T(e)||x,A=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let n=0,r=A.length;n<r;n++){const r=A[n];if(L(r,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,A=B.get(r).__webglTexture;a.bindTexture(t,A),H(t,r,e.width,e.height),a.bindTexture(t,null)}}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(x){const A=t.width,n=t.height;let r=16384;t.depthBuffer&&(r|=256),t.stencilBuffer&&(r|=1024);const i=B.get(t);a.bindFramebuffer(36008,i.__webglMultisampledFramebuffer),a.bindFramebuffer(36009,i.__webglFramebuffer),e.blitFramebuffer(0,0,A,n,0,0,A,n,r,9728),a.bindFramebuffer(36008,null),a.bindFramebuffer(36009,i.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===q&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),q=!0),e=e.texture),V(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===$&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),$=!0),e=e.texture),k(e,t)}}function _r(e,t,A){const n=A.isWebGL2;return{convert:function(e){let A;if(e===a)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(e===c)return 5123;if(1013===e)return 5124;if(e===l)return 5125;if(e===h)return 5126;if(e===u)return n?5131:(A=t.get("OES_texture_half_float"),null!==A?A.HALF_FLOAT_OES:null);if(1021===e)return 6406;if(e===p)return 6407;if(e===g)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(e===f)return 6402;if(e===m)return 34041;if(1028===e)return 6403;if(1029===e)return 36244;if(1030===e)return 33319;if(1031===e)return 33320;if(1032===e)return 36248;if(1033===e)return 36249;if(33776===e||33777===e||33778===e||33779===e){if(A=t.get("WEBGL_compressed_texture_s3tc"),null===A)return null;if(33776===e)return A.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return A.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return A.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return A.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===e||35841===e||35842===e||35843===e){if(A=t.get("WEBGL_compressed_texture_pvrtc"),null===A)return null;if(35840===e)return A.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return A.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return A.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return A.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e)return A=t.get("WEBGL_compressed_texture_etc1"),null!==A?A.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===e||37496===e)&&(A=t.get("WEBGL_compressed_texture_etc"),null!==A)){if(37492===e)return A.COMPRESSED_RGB8_ETC2;if(37496===e)return A.COMPRESSED_RGBA8_ETC2_EAC}return 37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e||37840===e||37841===e||37842===e||37843===e||37844===e||37845===e||37846===e||37847===e||37848===e||37849===e||37850===e||37851===e||37852===e||37853===e?(A=t.get("WEBGL_compressed_texture_astc"),null!==A?e:null):36492===e?(A=t.get("EXT_texture_compression_bptc"),null!==A?e:null):e===d?n?34042:(A=t.get("WEBGL_depth_texture"),null!==A?A.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}yr.prototype.isMeshDistanceMaterial=!0;class Er extends iA{constructor(e=[]){super(),this.cameras=e}}Er.prototype.isArrayCamera=!0;class Ur extends Ze{constructor(){super(),this.type="Group"}}Ur.prototype.isGroup=!0;const Fr={type:"move"};class Qr{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Ur,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ur,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new J,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new J),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Ur,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new J,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new J),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,A){let n=null,r=null,i=null;const s=this._targetRay,o=this._grip,a=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==s&&(n=t.getPose(e.targetRaySpace,A),null!==n&&(s.matrix.fromArray(n.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),n.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(n.linearVelocity)):s.hasLinearVelocity=!1,n.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(n.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(Fr))),a&&e.hand){i=!0;for(const n of e.hand.values()){const e=t.getJointPose(n,A);if(void 0===a.joints[n.jointName]){const e=new Ur;e.matrixAutoUpdate=!1,e.visible=!1,a.joints[n.jointName]=e,a.add(e)}const r=a.joints[n.jointName];null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=e.radius),r.visible=null!==e}const n=a.joints["index-finger-tip"],r=a.joints["thumb-tip"],s=n.position.distanceTo(r.position),o=.02,c=.005;a.inputState.pinching&&s>o+c?(a.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!a.inputState.pinching&&s<=o-c&&(a.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(r=t.getPose(e.gripSpace,A),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));return null!==s&&(s.visible=null!==n),null!==o&&(o.visible=null!==r),null!==a&&(a.visible=null!==i),this}}class Mr extends Q{constructor(e,t){super();const A=this,n=e.state;let r=null,i=1,s=null,o="local-floor",a=null,c=null,l=null,h=null;const u=[],d=new Map,p=new iA;p.layers.enable(1),p.viewport=new z;const g=new iA;g.layers.enable(2),g.viewport=new z;const f=[p,g],m=new Er;m.layers.enable(1),m.layers.enable(2);let B=null,w=null;function v(e){const t=d.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function y(){d.forEach((function(e,t){e.disconnect(t)})),d.clear(),B=null,w=null,n.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),U.stop(),A.isPresenting=!1,A.dispatchEvent({type:"sessionend"})}function x(e){const t=r.inputSources;for(let e=0;e<u.length;e++)d.set(t[e],u[e]);for(let t=0;t<e.removed.length;t++){const A=e.removed[t],n=d.get(A);n&&(n.dispatchEvent({type:"disconnected",data:A}),d.delete(A))}for(let t=0;t<e.added.length;t++){const A=e.added[t],n=d.get(A);n&&n.dispatchEvent({type:"connected",data:A})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=u[e];return void 0===t&&(t=new Qr,u[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=u[e];return void 0===t&&(t=new Qr,u[e]=t),t.getGripSpace()},this.getHand=function(e){let t=u[e];return void 0===t&&(t=new Qr,u[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===A.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===A.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s},this.getSession=function(){return r},this.setSession=async function(e){if(r=e,null!==r){r.addEventListener("select",v),r.addEventListener("selectstart",v),r.addEventListener("selectend",v),r.addEventListener("squeeze",v),r.addEventListener("squeezestart",v),r.addEventListener("squeezeend",v),r.addEventListener("end",y),r.addEventListener("inputsourceschange",x);const e=t.getContextAttributes();if(!0!==e.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers){const A={antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:i},n=new XRWebGLLayer(r,t,A);r.updateRenderState({baseLayer:n})}else{let A=0;e.depth&&(A=e.stencil?34041:6402);const n={colorFormat:e.alpha?6408:6407,depthFormat:A,scaleFactor:i};c=new XRWebGLBinding(r,t),h=c.createProjectionLayer(n),l=t.createFramebuffer(),r.updateRenderState({layers:[h]})}s=await r.requestReferenceSpace(o),U.setContext(r),U.start(),A.isPresenting=!0,A.dispatchEvent({type:"sessionstart"})}};const C=new J,b=new J;function _(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;m.near=g.near=p.near=e.near,m.far=g.far=p.far=e.far,B===m.near&&w===m.far||(r.updateRenderState({depthNear:m.near,depthFar:m.far}),B=m.near,w=m.far);const t=e.parent,A=m.cameras;_(m,t);for(let e=0;e<A.length;e++)_(A[e],t);m.matrixWorld.decompose(m.position,m.quaternion,m.scale),e.position.copy(m.position),e.quaternion.copy(m.quaternion),e.scale.copy(m.scale),e.matrix.copy(m.matrix),e.matrixWorld.copy(m.matrixWorld);const n=e.children;for(let e=0,t=n.length;e<t;e++)n[e].updateMatrixWorld(!0);2===A.length?function(e,t,A){C.setFromMatrixPosition(t.matrixWorld),b.setFromMatrixPosition(A.matrixWorld);const n=C.distanceTo(b),r=t.projectionMatrix.elements,i=A.projectionMatrix.elements,s=r[14]/(r[10]-1),o=r[14]/(r[10]+1),a=(r[9]+1)/r[5],c=(r[9]-1)/r[5],l=(r[8]-1)/r[0],h=(i[8]+1)/i[0],u=s*l,d=s*h,p=n/(-l+h),g=p*-l;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(g),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const f=s+p,m=o+p,B=u-g,w=d+(n-g),v=a*o/m*f,y=c*o/m*f;e.projectionMatrix.makePerspective(B,w,v,y,f,m)}(m,p,g):m.projectionMatrix.copy(p.projectionMatrix)},this.getCamera=function(){return m};let E=null;const U=new mA;U.setAnimationLoop((function(e,A){if(a=A.getViewerPose(s),null!==a){const e=a.views,A=r.renderState.baseLayer;void 0===r.renderState.layers&&n.bindXRFramebuffer(A.framebuffer);let i=!1;e.length!==m.cameras.length&&(m.cameras.length=0,i=!0);for(let s=0;s<e.length;s++){const o=e[s];let a=null;if(void 0===r.renderState.layers)a=A.getViewport(o);else{const e=c.getViewSubImage(h,o);t.bindFramebuffer(36160,l),t.framebufferTexture2D(36160,36064,3553,e.colorTexture,0),void 0!==e.depthStencilTexture&&t.framebufferTexture2D(36160,36096,3553,e.depthStencilTexture,0),t.bindFramebuffer(36160,null),n.bindXRFramebuffer(l),a=e.viewport}const u=f[s];u.matrix.fromArray(o.transform.matrix),u.projectionMatrix.fromArray(o.projectionMatrix),u.viewport.set(a.x,a.y,a.width,a.height),0===s&&m.matrix.copy(u.matrix),!0===i&&m.cameras.push(u)}}const i=r.inputSources;for(let e=0;e<u.length;e++){const t=u[e],n=i[e];t.update(n,A,s)}E&&E(e,A)})),this.setAnimationLoop=function(e){E=e},this.dispose=function(){}}}function Sr(e){function t(t,A){t.opacity.value=A.opacity,A.color&&t.diffuse.value.copy(A.color),A.emissive&&t.emissive.value.copy(A.emissive).multiplyScalar(A.emissiveIntensity),A.map&&(t.map.value=A.map),A.alphaMap&&(t.alphaMap.value=A.alphaMap),A.specularMap&&(t.specularMap.value=A.specularMap);const n=e.get(A).envMap;if(n){t.envMap.value=n,t.flipEnvMap.value=n.isCubeTexture&&n._needsFlipEnvMap?-1:1,t.reflectivity.value=A.reflectivity,t.refractionRatio.value=A.refractionRatio;const r=e.get(n).__maxMipLevel;void 0!==r&&(t.maxMipLevel.value=r)}let r,i;A.lightMap&&(t.lightMap.value=A.lightMap,t.lightMapIntensity.value=A.lightMapIntensity),A.aoMap&&(t.aoMap.value=A.aoMap,t.aoMapIntensity.value=A.aoMapIntensity),A.map?r=A.map:A.specularMap?r=A.specularMap:A.displacementMap?r=A.displacementMap:A.normalMap?r=A.normalMap:A.bumpMap?r=A.bumpMap:A.roughnessMap?r=A.roughnessMap:A.metalnessMap?r=A.metalnessMap:A.alphaMap?r=A.alphaMap:A.emissiveMap?r=A.emissiveMap:A.clearcoatMap?r=A.clearcoatMap:A.clearcoatNormalMap?r=A.clearcoatNormalMap:A.clearcoatRoughnessMap&&(r=A.clearcoatRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),A.aoMap?i=A.aoMap:A.lightMap&&(i=A.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uv2Transform.value.copy(i.matrix))}function A(t,A){t.roughness.value=A.roughness,t.metalness.value=A.metalness,A.roughnessMap&&(t.roughnessMap.value=A.roughnessMap),A.metalnessMap&&(t.metalnessMap.value=A.metalnessMap),A.emissiveMap&&(t.emissiveMap.value=A.emissiveMap),A.bumpMap&&(t.bumpMap.value=A.bumpMap,t.bumpScale.value=A.bumpScale,1===A.side&&(t.bumpScale.value*=-1)),A.normalMap&&(t.normalMap.value=A.normalMap,t.normalScale.value.copy(A.normalScale),1===A.side&&t.normalScale.value.negate()),A.displacementMap&&(t.displacementMap.value=A.displacementMap,t.displacementScale.value=A.displacementScale,t.displacementBias.value=A.displacementBias),e.get(A).envMap&&(t.envMapIntensity.value=A.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,n,r,i,s){n.isMeshBasicMaterial?t(e,n):n.isMeshLambertMaterial?(t(e,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,n)):n.isMeshToonMaterial?(t(e,n),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshPhongMaterial?(t(e,n),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshStandardMaterial?(t(e,n),n.isMeshPhysicalMaterial?function(e,t,n){A(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen),t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate()),e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),t.transmission>0&&(e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)}(e,n,s):A(e,n)):n.isMeshMatcapMaterial?(t(e,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshDepthMaterial?(t(e,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshDistanceMaterial?(t(e,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,n)):n.isMeshNormalMaterial?(t(e,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,n)):n.isPointsMaterial?function(e,t,A,n){let r;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*A,e.scale.value=.5*n,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.map?r=t.map:t.alphaMap&&(r=t.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(e,n,r,i):n.isSpriteMaterial?function(e,t){let A;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.map?A=t.map:t.alphaMap&&(A=t.alphaMap),void 0!==A&&(!0===A.matrixAutoUpdate&&A.updateMatrix(),e.uvTransform.value.copy(A.matrix))}(e,n):n.isShadowMaterial?(e.color.value.copy(n.color),e.opacity.value=n.opacity):n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)}}}function Tr(e={}){const t=void 0!==e.canvas?e.canvas:function(){const e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return e.style.display="block",e}(),A=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,s=void 0===e.depth||e.depth,c=void 0===e.stencil||e.stencil,l=void 0!==e.antialias&&e.antialias,d=void 0===e.premultipliedAlpha||e.premultipliedAlpha,p=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,f=void 0!==e.powerPreference?e.powerPreference:"default",m=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let B=null,w=null;const v=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=b,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const x=this;let C=!1,_=0,E=0,U=null,F=-1,Q=null;const M=new z,S=new z;let T=null,L=t.width,H=t.height,I=1,D=null,R=null;const P=new z(0,0,L,H),N=new z(0,0,L,H);let O=!1;const G=[],V=new fA;let k=!1,K=!1,Y=null;const j=new Ee,Z=new J,q={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function $(){return null===U?I:1}let ee,te,Ae,ne,re,ie,se,oe,ae,ce,le,he,ue,de,pe,ge,fe,me,Be,we,ve,ye,xe=A;function Ce(e,A){for(let n=0;n<e.length;n++){const r=e[n],i=t.getContext(r,A);if(null!==i)return i}return null}try{const e={alpha:r,depth:s,stencil:c,antialias:l,premultipliedAlpha:d,preserveDrawingBuffer:p,powerPreference:f,failIfMajorPerformanceCaveat:m};if(t.addEventListener("webglcontextlost",Ue,!1),t.addEventListener("webglcontextrestored",Fe,!1),null===xe){const t=["webgl2","webgl","experimental-webgl"];if(!0===x.isWebGL1Renderer&&t.shift(),xe=Ce(t,e),null===xe)throw Ce(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===xe.getShaderPrecisionFormat&&(xe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function be(){ee=new QA(xe),te=new EA(xe,ee,e),ee.init(te),ve=new _r(xe,ee,te),Ae=new Cr(xe,ee,te),G[0]=1029,ne=new TA(xe),re=new cr,ie=new br(xe,ee,Ae,re,te,ve,ne),se=new FA(x),oe=new BA(xe,te),ye=new bA(xe,ee,oe,te),ae=new MA(xe,oe,ne,ye),ce=new DA(xe,ae,oe,ne),me=new IA(xe),pe=new UA(re),le=new ar(x,se,ee,te,ye,pe),he=new Sr(re),ue=new dr(re),de=new wr(ee,te),fe=new CA(x,se,Ae,ce,d),ge=new xr(x,ce,te),Be=new _A(xe,ee,ne,te),we=new SA(xe,ee,ne,te),ne.programs=le.programs,x.capabilities=te,x.extensions=ee,x.properties=re,x.renderLists=ue,x.shadowMap=ge,x.state=Ae,x.info=ne}be();const _e=new Mr(x,xe);function Ue(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function Fe(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;const e=ne.autoReset,t=ge.enabled,A=ge.autoUpdate,n=ge.needsUpdate,r=ge.type;be(),ne.autoReset=e,ge.enabled=t,ge.autoUpdate=A,ge.needsUpdate=n,ge.type=r}function Qe(e){const t=e.target;t.removeEventListener("dispose",Qe),function(e){(function(e){const t=re.get(e).programs;void 0!==t&&t.forEach((function(e){le.releaseProgram(e)}))})(e),re.remove(e)}(t)}this.xr=_e,this.getContext=function(){return xe},this.getContextAttributes=function(){return xe.getContextAttributes()},this.forceContextLoss=function(){const e=ee.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=ee.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(e){void 0!==e&&(I=e,this.setSize(L,H,!1))},this.getSize=function(e){return e.set(L,H)},this.setSize=function(e,A,n){_e.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(L=e,H=A,t.width=Math.floor(e*I),t.height=Math.floor(A*I),!1!==n&&(t.style.width=e+"px",t.style.height=A+"px"),this.setViewport(0,0,e,A))},this.getDrawingBufferSize=function(e){return e.set(L*I,H*I).floor()},this.setDrawingBufferSize=function(e,A,n){L=e,H=A,I=n,t.width=Math.floor(e*n),t.height=Math.floor(A*n),this.setViewport(0,0,e,A)},this.getCurrentViewport=function(e){return e.copy(M)},this.getViewport=function(e){return e.copy(P)},this.setViewport=function(e,t,A,n){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,A,n),Ae.viewport(M.copy(P).multiplyScalar(I).floor())},this.getScissor=function(e){return e.copy(N)},this.setScissor=function(e,t,A,n){e.isVector4?N.set(e.x,e.y,e.z,e.w):N.set(e,t,A,n),Ae.scissor(S.copy(N).multiplyScalar(I).floor())},this.getScissorTest=function(){return O},this.setScissorTest=function(e){Ae.setScissorTest(O=e)},this.setOpaqueSort=function(e){D=e},this.setTransparentSort=function(e){R=e},this.getClearColor=function(e){return e.copy(fe.getClearColor())},this.setClearColor=function(){fe.setClearColor.apply(fe,arguments)},this.getClearAlpha=function(){return fe.getClearAlpha()},this.setClearAlpha=function(){fe.setClearAlpha.apply(fe,arguments)},this.clear=function(e,t,A){let n=0;(void 0===e||e)&&(n|=16384),(void 0===t||t)&&(n|=256),(void 0===A||A)&&(n|=1024),xe.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ue,!1),t.removeEventListener("webglcontextrestored",Fe,!1),ue.dispose(),de.dispose(),re.dispose(),se.dispose(),ce.dispose(),ye.dispose(),_e.dispose(),_e.removeEventListener("sessionstart",Se),_e.removeEventListener("sessionend",Te),Y&&(Y.dispose(),Y=null),Le.stop()},this.renderBufferImmediate=function(e,t){ye.initAttributes();const A=re.get(e);e.hasPositions&&!A.position&&(A.position=xe.createBuffer()),e.hasNormals&&!A.normal&&(A.normal=xe.createBuffer()),e.hasUvs&&!A.uv&&(A.uv=xe.createBuffer()),e.hasColors&&!A.color&&(A.color=xe.createBuffer());const n=t.getAttributes();e.hasPositions&&(xe.bindBuffer(34962,A.position),xe.bufferData(34962,e.positionArray,35048),ye.enableAttribute(n.position),xe.vertexAttribPointer(n.position,3,5126,!1,0,0)),e.hasNormals&&(xe.bindBuffer(34962,A.normal),xe.bufferData(34962,e.normalArray,35048),ye.enableAttribute(n.normal),xe.vertexAttribPointer(n.normal,3,5126,!1,0,0)),e.hasUvs&&(xe.bindBuffer(34962,A.uv),xe.bufferData(34962,e.uvArray,35048),ye.enableAttribute(n.uv),xe.vertexAttribPointer(n.uv,2,5126,!1,0,0)),e.hasColors&&(xe.bindBuffer(34962,A.color),xe.bufferData(34962,e.colorArray,35048),ye.enableAttribute(n.color),xe.vertexAttribPointer(n.color,3,5126,!1,0,0)),ye.disableUnusedAttributes(),xe.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,A,n,r,i){null===t&&(t=q);const s=r.isMesh&&r.matrixWorld.determinant()<0,o=Ne(e,t,n,r);Ae.setMaterial(n,s);let a=A.index;const c=A.attributes.position;if(null===a){if(void 0===c||0===c.count)return}else if(0===a.count)return;let l,h=1;!0===n.wireframe&&(a=ae.getWireframeAttribute(A),h=2),(n.morphTargets||n.morphNormals)&&me.update(r,A,n,o),ye.setup(r,n,o,A,a);let u=Be;null!==a&&(l=oe.get(a),u=we,u.setIndex(l));const d=null!==a?a.count:c.count,p=A.drawRange.start*h,g=A.drawRange.count*h,f=null!==i?i.start*h:0,m=null!==i?i.count*h:1/0,B=Math.max(p,f),w=Math.min(d,p+g,f+m)-1,v=Math.max(0,w-B+1);if(0!==v){if(r.isMesh)!0===n.wireframe?(Ae.setLineWidth(n.wireframeLinewidth*$()),u.setMode(1)):u.setMode(4);else if(r.isLine){let e=n.linewidth;void 0===e&&(e=1),Ae.setLineWidth(e*$()),r.isLineSegments?u.setMode(1):r.isLineLoop?u.setMode(2):u.setMode(3)}else r.isPoints?u.setMode(0):r.isSprite&&u.setMode(4);if(r.isInstancedMesh)u.renderInstances(B,v,r.count);else if(A.isInstancedBufferGeometry){const e=Math.min(A.instanceCount,A._maxInstanceCount);u.renderInstances(B,v,e)}else u.render(B,v)}},this.compile=function(e,t){w=de.get(e),w.init(),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(w.pushLight(e),e.castShadow&&w.pushShadow(e))})),w.setupLights(),e.traverse((function(t){const A=t.material;if(A)if(Array.isArray(A))for(let n=0;n<A.length;n++)Re(A[n],e,t);else Re(A,e,t)}))};let Me=null;function Se(){Le.stop()}function Te(){Le.start()}const Le=new mA;function He(e,t,A,n){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)A=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)w.pushLight(e),e.castShadow&&w.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||V.intersectsSprite(e)){n&&Z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j);const t=ce.update(e),r=e.material;r.visible&&B.push(e,t,r,A,Z.z,null)}}else if(e.isImmediateRenderObject)n&&Z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j),B.push(e,null,e.material,A,Z.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==ne.render.frame&&(e.skeleton.update(),e.skeleton.frame=ne.render.frame),!e.frustumCulled||V.intersectsObject(e))){n&&Z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j);const t=ce.update(e),r=e.material;if(Array.isArray(r)){const n=t.groups;for(let i=0,s=n.length;i<s;i++){const s=n[i],o=r[s.materialIndex];o&&o.visible&&B.push(e,t,o,A,Z.z,s)}}else r.visible&&B.push(e,t,r,A,Z.z,null)}const r=e.children;for(let e=0,i=r.length;e<i;e++)He(r[e],t,A,n)}function Ie(e,t,A){const n=!0===t.isScene?t.overrideMaterial:null;for(let r=0,i=e.length;r<i;r++){const i=e[r],s=i.object,o=i.geometry,a=null===n?i.material:n,c=i.group;if(A.isArrayCamera){const e=A.cameras;for(let A=0,n=e.length;A<n;A++){const n=e[A];s.layers.test(n.layers)&&(Ae.viewport(M.copy(n.viewport)),w.setupLightsView(n),De(s,t,n,o,a,c))}}else De(s,t,A,o,a,c)}}function De(e,t,A,n,r,i){if(e.onBeforeRender(x,t,A,n,r,i),e.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){const n=Ne(A,t,r,e);Ae.setMaterial(r),ye.reset(),function(e,t){e.render((function(e){x.renderBufferImmediate(e,t)}))}(e,n)}else!0===r.transparent&&2===r.side?(r.side=1,r.needsUpdate=!0,x.renderBufferDirect(A,t,n,r,e,i),r.side=0,r.needsUpdate=!0,x.renderBufferDirect(A,t,n,r,e,i),r.side=2):x.renderBufferDirect(A,t,n,r,e,i);e.onAfterRender(x,t,A,n,r,i)}function Re(e,t,A){!0!==t.isScene&&(t=q);const n=re.get(e),r=w.state.lights,i=w.state.shadowsArray,s=r.state.version,o=le.getParameters(e,r.state,i,t,A),a=le.getProgramCacheKey(o);let c=n.programs;n.environment=e.isMeshStandardMaterial?t.environment:null,n.fog=t.fog,n.envMap=se.get(e.envMap||n.environment),void 0===c&&(e.addEventListener("dispose",Qe),c=new Map,n.programs=c);let l=c.get(a);if(void 0!==l){if(n.currentProgram===l&&n.lightsStateVersion===s)return Pe(e,o),l}else o.uniforms=le.getUniforms(e),e.onBuild(o,x),e.onBeforeCompile(o,x),l=le.acquireProgram(o,a),c.set(a,l),n.uniforms=o.uniforms;const h=n.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=pe.uniform),Pe(e,o),n.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),n.lightsStateVersion=s,n.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotShadowMatrix.value=r.state.spotShadowMatrix,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix);const u=l.getUniforms(),d=Gn.seqWithValue(u.seq,h);return n.currentProgram=l,n.uniformsList=d,l}function Pe(e,t){const A=re.get(e);A.outputEncoding=t.outputEncoding,A.instancing=t.instancing,A.skinning=t.skinning,A.numClippingPlanes=t.numClippingPlanes,A.numIntersection=t.numClipIntersection,A.vertexAlphas=t.vertexAlphas}function Ne(e,t,A,n){!0!==t.isScene&&(t=q),ie.resetTextureUnits();const r=t.fog,i=A.isMeshStandardMaterial?t.environment:null,s=null===U?x.outputEncoding:U.texture.encoding,o=se.get(A.envMap||i),a=!0===A.vertexColors&&n.geometry&&n.geometry.attributes.color&&4===n.geometry.attributes.color.itemSize,c=re.get(A),l=w.state.lights;if(!0===k&&(!0===K||e!==Q)){const t=e===Q&&A.id===F;pe.setState(A,e,t)}let h=!1;A.version===c.__version?c.needsLights&&c.lightsStateVersion!==l.state.version||c.outputEncoding!==s||n.isInstancedMesh&&!1===c.instancing?h=!0:n.isInstancedMesh||!0!==c.instancing?n.isSkinnedMesh&&!1===c.skinning?h=!0:n.isSkinnedMesh||!0!==c.skinning?c.envMap!==o||A.fog&&c.fog!==r?h=!0:void 0===c.numClippingPlanes||c.numClippingPlanes===pe.numPlanes&&c.numIntersection===pe.numIntersection?c.vertexAlphas!==a&&(h=!0):h=!0:h=!0:h=!0:(h=!0,c.__version=A.version);let u=c.currentProgram;!0===h&&(u=Re(A,t,n));let d=!1,p=!1,g=!1;const f=u.getUniforms(),m=c.uniforms;if(Ae.useProgram(u.program)&&(d=!0,p=!0,g=!0),A.id!==F&&(F=A.id,p=!0),d||Q!==e){if(f.setValue(xe,"projectionMatrix",e.projectionMatrix),te.logarithmicDepthBuffer&&f.setValue(xe,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),Q!==e&&(Q=e,p=!0,g=!0),A.isShaderMaterial||A.isMeshPhongMaterial||A.isMeshToonMaterial||A.isMeshStandardMaterial||A.envMap){const t=f.map.cameraPosition;void 0!==t&&t.setValue(xe,Z.setFromMatrixPosition(e.matrixWorld))}(A.isMeshPhongMaterial||A.isMeshToonMaterial||A.isMeshLambertMaterial||A.isMeshBasicMaterial||A.isMeshStandardMaterial||A.isShaderMaterial)&&f.setValue(xe,"isOrthographic",!0===e.isOrthographicCamera),(A.isMeshPhongMaterial||A.isMeshToonMaterial||A.isMeshLambertMaterial||A.isMeshBasicMaterial||A.isMeshStandardMaterial||A.isShaderMaterial||A.isShadowMaterial||n.isSkinnedMesh)&&f.setValue(xe,"viewMatrix",e.matrixWorldInverse)}if(n.isSkinnedMesh){f.setOptional(xe,n,"bindMatrix"),f.setOptional(xe,n,"bindMatrixInverse");const e=n.skeleton;e&&(te.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),f.setValue(xe,"boneTexture",e.boneTexture,ie),f.setValue(xe,"boneTextureSize",e.boneTextureSize)):f.setOptional(xe,e,"boneMatrices"))}var B,v;return(p||c.receiveShadow!==n.receiveShadow)&&(c.receiveShadow=n.receiveShadow,f.setValue(xe,"receiveShadow",n.receiveShadow)),p&&(f.setValue(xe,"toneMappingExposure",x.toneMappingExposure),c.needsLights&&(v=g,(B=m).ambientLightColor.needsUpdate=v,B.lightProbe.needsUpdate=v,B.directionalLights.needsUpdate=v,B.directionalLightShadows.needsUpdate=v,B.pointLights.needsUpdate=v,B.pointLightShadows.needsUpdate=v,B.spotLights.needsUpdate=v,B.spotLightShadows.needsUpdate=v,B.rectAreaLights.needsUpdate=v,B.hemisphereLights.needsUpdate=v),r&&A.fog&&he.refreshFogUniforms(m,r),he.refreshMaterialUniforms(m,A,I,H,Y),Gn.upload(xe,c.uniformsList,m,ie)),A.isShaderMaterial&&!0===A.uniformsNeedUpdate&&(Gn.upload(xe,c.uniformsList,m,ie),A.uniformsNeedUpdate=!1),A.isSpriteMaterial&&f.setValue(xe,"center",n.center),f.setValue(xe,"modelViewMatrix",n.modelViewMatrix),f.setValue(xe,"normalMatrix",n.normalMatrix),f.setValue(xe,"modelMatrix",n.matrixWorld),u}Le.setAnimationLoop((function(e){Me&&Me(e)})),"undefined"!=typeof window&&Le.setContext(window),this.setAnimationLoop=function(e){Me=e,_e.setAnimationLoop(e),null===e?Le.stop():Le.start()},_e.addEventListener("sessionstart",Se),_e.addEventListener("sessionend",Te),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===C)return;!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===_e.enabled&&!0===_e.isPresenting&&(!0===_e.cameraAutoUpdate&&_e.updateCamera(t),t=_e.getCamera()),!0===e.isScene&&e.onBeforeRender(x,e,t,U),w=de.get(e,y.length),w.init(),y.push(w),j.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),V.setFromProjectionMatrix(j),K=this.localClippingEnabled,k=pe.init(this.clippingPlanes,K,t),B=ue.get(e,v.length),B.init(),v.push(B),He(e,t,0,x.sortObjects),B.finish(),!0===x.sortObjects&&B.sort(D,R),!0===k&&pe.beginShadows();const A=w.state.shadowsArray;ge.render(A,e,t),w.setupLights(),w.setupLightsView(t),!0===k&&pe.endShadows(),!0===this.info.autoReset&&this.info.reset(),fe.render(B,e);const r=B.opaque,s=B.transmissive,c=B.transparent;r.length>0&&Ie(r,e,t),s.length>0&&function(e,t,A,r){if(null===Y){const e=!0===l&&!0===te.isWebGL2;Y=new(e?X:W)(1024,1024,{generateMipmaps:!0,type:null!==ve.convert(u)?u:a,minFilter:o,magFilter:i,wrapS:n,wrapT:n})}const s=x.getRenderTarget();x.setRenderTarget(Y),x.clear();const c=x.toneMapping;x.toneMapping=0,Ie(e,A,r),x.toneMapping=c,ie.updateMultisampleRenderTarget(Y),ie.updateRenderTargetMipmap(Y),x.setRenderTarget(s),Ie(t,A,r)}(r,s,e,t),c.length>0&&Ie(c,e,t),null!==U&&(ie.updateMultisampleRenderTarget(U),ie.updateRenderTargetMipmap(U)),!0===e.isScene&&e.onAfterRender(x,e,t),Ae.buffers.depth.setTest(!0),Ae.buffers.depth.setMask(!0),Ae.buffers.color.setMask(!0),Ae.setPolygonOffset(!1),ye.resetDefaultState(),F=-1,Q=null,y.pop(),w=y.length>0?y[y.length-1]:null,v.pop(),B=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return U},this.setRenderTarget=function(e,t=0,A=0){U=e,_=t,E=A,e&&void 0===re.get(e).__webglFramebuffer&&ie.setupRenderTarget(e);let n=null,r=!1,i=!1;if(e){const A=e.texture;(A.isDataTexture3D||A.isDataTexture2DArray)&&(i=!0);const s=re.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(n=s[t],r=!0):n=e.isWebGLMultisampleRenderTarget?re.get(e).__webglMultisampledFramebuffer:s,M.copy(e.viewport),S.copy(e.scissor),T=e.scissorTest}else M.copy(P).multiplyScalar(I).floor(),S.copy(N).multiplyScalar(I).floor(),T=O;if(Ae.bindFramebuffer(36160,n)&&te.drawBuffers){let t=!1;if(e)if(e.isWebGLMultipleRenderTargets){const A=e.texture;if(G.length!==A.length||36064!==G[0]){for(let e=0,t=A.length;e<t;e++)G[e]=36064+e;G.length=A.length,t=!0}}else 1===G.length&&36064===G[0]||(G[0]=36064,G.length=1,t=!0);else 1===G.length&&1029===G[0]||(G[0]=1029,G.length=1,t=!0);t&&(te.isWebGL2?xe.drawBuffers(G):ee.get("WEBGL_draw_buffers").drawBuffersWEBGL(G))}if(Ae.viewport(M),Ae.scissor(S),Ae.setScissorTest(T),r){const n=re.get(e.texture);xe.framebufferTexture2D(36160,36064,34069+t,n.__webglTexture,A)}else if(i){const n=re.get(e.texture),r=t||0;xe.framebufferTextureLayer(36160,36064,n.__webglTexture,A||0,r)}},this.readRenderTargetPixels=function(e,t,A,n,r,i,s){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=re.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){Ae.bindFramebuffer(36160,o);try{const s=e.texture,o=s.format,c=s.type;if(o!==g&&ve.convert(o)!==xe.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const l=c===u&&(ee.has("EXT_color_buffer_half_float")||te.isWebGL2&&ee.has("EXT_color_buffer_float"));if(!(c===a||ve.convert(c)===xe.getParameter(35738)||c===h&&(te.isWebGL2||ee.has("OES_texture_float")||ee.has("WEBGL_color_buffer_float"))||l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===xe.checkFramebufferStatus(36160)?t>=0&&t<=e.width-n&&A>=0&&A<=e.height-r&&xe.readPixels(t,A,n,r,ve.convert(o),ve.convert(c),i):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const e=null!==U?re.get(U).__webglFramebuffer:null;Ae.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,A=0){const n=Math.pow(2,-A),r=Math.floor(t.image.width*n),i=Math.floor(t.image.height*n);let s=ve.convert(t.format);te.isWebGL2&&(6407===s&&(s=32849),6408===s&&(s=32856)),ie.setTexture2D(t,0),xe.copyTexImage2D(3553,A,s,e.x,e.y,r,i,0),Ae.unbindTexture()},this.copyTextureToTexture=function(e,t,A,n=0){const r=t.image.width,i=t.image.height,s=ve.convert(A.format),o=ve.convert(A.type);ie.setTexture2D(A,0),xe.pixelStorei(37440,A.flipY),xe.pixelStorei(37441,A.premultiplyAlpha),xe.pixelStorei(3317,A.unpackAlignment),t.isDataTexture?xe.texSubImage2D(3553,n,e.x,e.y,r,i,s,o,t.image.data):t.isCompressedTexture?xe.compressedTexSubImage2D(3553,n,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):xe.texSubImage2D(3553,n,e.x,e.y,s,o,t.image),0===n&&A.generateMipmaps&&xe.generateMipmap(3553),Ae.unbindTexture()},this.copyTextureToTexture3D=function(e,t,A,n,r=0){if(x.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const i=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,o=e.max.z-e.min.z+1,a=ve.convert(n.format),c=ve.convert(n.type);let l;if(n.isDataTexture3D)ie.setTexture3D(n,0),l=32879;else{if(!n.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ie.setTexture2DArray(n,0),l=35866}xe.pixelStorei(37440,n.flipY),xe.pixelStorei(37441,n.premultiplyAlpha),xe.pixelStorei(3317,n.unpackAlignment);const h=xe.getParameter(3314),u=xe.getParameter(32878),d=xe.getParameter(3316),p=xe.getParameter(3315),g=xe.getParameter(32877),f=A.isCompressedTexture?A.mipmaps[0]:A.image;xe.pixelStorei(3314,f.width),xe.pixelStorei(32878,f.height),xe.pixelStorei(3316,e.min.x),xe.pixelStorei(3315,e.min.y),xe.pixelStorei(32877,e.min.z),A.isDataTexture||A.isDataTexture3D?xe.texSubImage3D(l,r,t.x,t.y,t.z,i,s,o,a,c,f.data):A.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),xe.compressedTexSubImage3D(l,r,t.x,t.y,t.z,i,s,o,a,f.data)):xe.texSubImage3D(l,r,t.x,t.y,t.z,i,s,o,a,c,f),xe.pixelStorei(3314,h),xe.pixelStorei(32878,u),xe.pixelStorei(3316,d),xe.pixelStorei(3315,p),xe.pixelStorei(32877,g),0===r&&n.generateMipmaps&&xe.generateMipmap(l),Ae.unbindTexture()},this.initTexture=function(e){ie.setTexture2D(e,0),Ae.unbindTexture()},this.resetState=function(){_=0,E=0,U=null,Ae.reset(),ye.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class extends Tr{}).prototype.isWebGL1Renderer=!0;class Lr{constructor(e,t=25e-5){this.name="",this.color=new mt(e),this.density=t}clone(){return new Lr(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Lr.prototype.isFogExp2=!0;class Hr{constructor(e,t=1,A=1e3){this.name="",this.color=new mt(e),this.near=t,this.far=A}clone(){return new Hr(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Hr.prototype.isFog=!0;class Ir extends Ze{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}Ir.prototype.isScene=!0;class Dr{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=E,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=L()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,A){e*=this.stride,A*=t.stride;for(let n=0,r=this.stride;n<r;n++)this.array[e+n]=t.array[A+n];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=L()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),A=new this.constructor(t,this.stride);return A.setUsage(this.usage),A}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=L()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Dr.prototype.isInterleavedBuffer=!0;const Rr=new J;class Pr{constructor(e,t,A,n=!1){this.name="",this.data=e,this.itemSize=t,this.offset=A,this.normalized=!0===n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,A=this.data.count;t<A;t++)Rr.x=this.getX(t),Rr.y=this.getY(t),Rr.z=this.getZ(t),Rr.applyMatrix4(e),this.setXYZ(t,Rr.x,Rr.y,Rr.z);return this}applyNormalMatrix(e){for(let t=0,A=this.count;t<A;t++)Rr.x=this.getX(t),Rr.y=this.getY(t),Rr.z=this.getZ(t),Rr.applyNormalMatrix(e),this.setXYZ(t,Rr.x,Rr.y,Rr.z);return this}transformDirection(e){for(let t=0,A=this.count;t<A;t++)Rr.x=this.getX(t),Rr.y=this.getY(t),Rr.z=this.getZ(t),Rr.transformDirection(e),this.setXYZ(t,Rr.x,Rr.y,Rr.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,A){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=A,this}setXYZ(e,t,A,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=A,this.data.array[e+2]=n,this}setXYZW(e,t,A,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=A,this.data.array[e+2]=n,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const A=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[A+t])}return new yt(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Pr(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const A=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[A+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Pr.prototype.isInterleavedBufferAttribute=!0;class Nr extends lt{constructor(e){super(),this.type="SpriteMaterial",this.color=new mt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let Or;Nr.prototype.isSpriteMaterial=!0;const Gr=new J,Vr=new J,kr=new J,Kr=new P,zr=new P,Wr=new Ee,Xr=new J,Yr=new J,Jr=new J,jr=new P,Zr=new P,qr=new P;function $r(e,t,A,n,r,i){Kr.subVectors(e,A).addScalar(.5).multiply(n),void 0!==r?(zr.x=i*Kr.x-r*Kr.y,zr.y=r*Kr.x+i*Kr.y):zr.copy(Kr),e.copy(t),e.x+=zr.x,e.y+=zr.y,e.applyMatrix4(Wr)}(class extends Ze{constructor(e){if(super(),this.type="Sprite",void 0===Or){Or=new Lt;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Dr(e,5);Or.setIndex([0,1,2,0,2,3]),Or.setAttribute("position",new Pr(t,3,0,!1)),Or.setAttribute("uv",new Pr(t,2,3,!1))}this.geometry=Or,this.material=void 0!==e?e:new Nr,this.center=new P(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Vr.setFromMatrixScale(this.matrixWorld),Wr.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),kr.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Vr.multiplyScalar(-kr.z);const A=this.material.rotation;let n,r;0!==A&&(r=Math.cos(A),n=Math.sin(A));const i=this.center;$r(Xr.set(-.5,-.5,0),kr,i,Vr,n,r),$r(Yr.set(.5,-.5,0),kr,i,Vr,n,r),$r(Jr.set(.5,.5,0),kr,i,Vr,n,r),jr.set(0,0),Zr.set(1,0),qr.set(1,1);let s=e.ray.intersectTriangle(Xr,Yr,Jr,!1,Gr);if(null===s&&($r(Yr.set(-.5,.5,0),kr,i,Vr,n,r),Zr.set(0,1),s=e.ray.intersectTriangle(Xr,Jr,Yr,!1,Gr),null===s))return;const o=e.ray.origin.distanceTo(Gr);o<e.near||o>e.far||t.push({distance:o,point:Gr.clone(),uv:at.getUV(Gr,Xr,Yr,Jr,jr,Zr,qr,new P),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;const ei=new J,ti=new z,Ai=new z,ni=new J,ri=new Ee;class ii extends Zt{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ee,this.bindMatrixInverse=new Ee}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new z,t=this.geometry.attributes.skinWeight;for(let A=0,n=t.count;A<n;A++){e.x=t.getX(A),e.y=t.getY(A),e.z=t.getZ(A),e.w=t.getW(A);const n=1/e.manhattanLength();n!==1/0?e.multiplyScalar(n):e.set(1,0,0,0),t.setXYZW(A,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const A=this.skeleton,n=this.geometry;ti.fromBufferAttribute(n.attributes.skinIndex,e),Ai.fromBufferAttribute(n.attributes.skinWeight,e),ei.fromBufferAttribute(n.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const n=Ai.getComponent(e);if(0!==n){const r=ti.getComponent(e);ri.multiplyMatrices(A.bones[r].matrixWorld,A.boneInverses[r]),t.addScaledVector(ni.copy(ei).applyMatrix4(ri),n)}}return t.applyMatrix4(this.bindMatrixInverse)}}ii.prototype.isSkinnedMesh=!0;(class extends Ze{constructor(){super(),this.type="Bone"}}).prototype.isBone=!0;(class extends k{constructor(e=null,t=1,A=1,n,r,i,s,o,a=1003,c=1003,l,h){super(null,i,s,o,a,c,n,r,l,h),this.image={data:e,width:t,height:A},this.magFilter=a,this.minFilter=c,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}).prototype.isDataTexture=!0;const si=new Ee,oi=new Ee,ai=[],ci=new Zt;(class extends Zt{constructor(e,t,A){super(e,t),this.instanceMatrix=new yt(new Float32Array(16*A),16),this.instanceColor=null,this.count=A,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const A=this.matrixWorld,n=this.count;if(ci.geometry=this.geometry,ci.material=this.material,void 0!==ci.material)for(let r=0;r<n;r++){this.getMatrixAt(r,si),oi.multiplyMatrices(A,si),ci.matrixWorld=oi,ci.raycast(e,ai);for(let e=0,A=ai.length;e<A;e++){const A=ai[e];A.instanceId=r,A.object=this,t.push(A)}ai.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new yt(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class li extends lt{constructor(e){super(),this.type="LineBasicMaterial",this.color=new mt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this}}li.prototype.isLineBasicMaterial=!0;const hi=new J,ui=new J,di=new Ee,pi=new _e,gi=new me;class fi extends Ze{constructor(e=new Lt,t=new li){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,A=[0];for(let e=1,n=t.count;e<n;e++)hi.fromBufferAttribute(t,e-1),ui.fromBufferAttribute(t,e),A[e]=A[e-1],A[e]+=hi.distanceTo(ui);e.setAttribute("lineDistance",new bt(A,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const A=this.geometry,n=this.matrixWorld,r=e.params.Line.threshold,i=A.drawRange;if(null===A.boundingSphere&&A.computeBoundingSphere(),gi.copy(A.boundingSphere),gi.applyMatrix4(n),gi.radius+=r,!1===e.ray.intersectsSphere(gi))return;di.copy(n).invert(),pi.copy(e.ray).applyMatrix4(di);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,a=new J,c=new J,l=new J,h=new J,u=this.isLineSegments?2:1;if(A.isBufferGeometry){const n=A.index,r=A.attributes.position;if(null!==n)for(let A=Math.max(0,i.start),s=Math.min(n.count,i.start+i.count)-1;A<s;A+=u){const i=n.getX(A),s=n.getX(A+1);if(a.fromBufferAttribute(r,i),c.fromBufferAttribute(r,s),pi.distanceSqToSegment(a,c,h,l)>o)continue;h.applyMatrix4(this.matrixWorld);const u=e.ray.origin.distanceTo(h);u<e.near||u>e.far||t.push({distance:u,point:l.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}else for(let A=Math.max(0,i.start),n=Math.min(r.count,i.start+i.count)-1;A<n;A+=u){if(a.fromBufferAttribute(r,A),c.fromBufferAttribute(r,A+1),pi.distanceSqToSegment(a,c,h,l)>o)continue;h.applyMatrix4(this.matrixWorld);const n=e.ray.origin.distanceTo(h);n<e.near||n>e.far||t.push({distance:n,point:l.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}else A.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,A=Object.keys(t);if(A.length>0){const e=t[A[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,A=e.length;t<A;t++){const A=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[A]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}fi.prototype.isLine=!0;const mi=new J,Bi=new J;class wi extends fi{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,A=[];for(let e=0,n=t.count;e<n;e+=2)mi.fromBufferAttribute(t,e),Bi.fromBufferAttribute(t,e+1),A[e]=0===e?0:A[e-1],A[e+1]=A[e]+mi.distanceTo(Bi);e.setAttribute("lineDistance",new bt(A,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}wi.prototype.isLineSegments=!0;(class extends fi{constructor(e,t){super(e,t),this.type="LineLoop"}}).prototype.isLineLoop=!0;class vi extends lt{constructor(e){super(),this.type="PointsMaterial",this.color=new mt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this}}vi.prototype.isPointsMaterial=!0;const yi=new Ee,xi=new _e,Ci=new me,bi=new J;function _i(e,t,A,n,r,i,s){const o=xi.distanceSqToPoint(e);if(o<A){const A=new J;xi.closestPointToPoint(e,A),A.applyMatrix4(n);const a=r.ray.origin.distanceTo(A);if(a<r.near||a>r.far)return;i.push({distance:a,distanceToRay:Math.sqrt(o),point:A,index:t,face:null,object:s})}}(class extends Ze{constructor(e=new Lt,t=new vi){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const A=this.geometry,n=this.matrixWorld,r=e.params.Points.threshold,i=A.drawRange;if(null===A.boundingSphere&&A.computeBoundingSphere(),Ci.copy(A.boundingSphere),Ci.applyMatrix4(n),Ci.radius+=r,!1===e.ray.intersectsSphere(Ci))return;yi.copy(n).invert(),xi.copy(e.ray).applyMatrix4(yi);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s;if(A.isBufferGeometry){const r=A.index,s=A.attributes.position;if(null!==r)for(let A=Math.max(0,i.start),a=Math.min(r.count,i.start+i.count);A<a;A++){const i=r.getX(A);bi.fromBufferAttribute(s,i),_i(bi,i,o,n,e,t,this)}else for(let A=Math.max(0,i.start),r=Math.min(s.count,i.start+i.count);A<r;A++)bi.fromBufferAttribute(s,A),_i(bi,A,o,n,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,A=Object.keys(t);if(A.length>0){const e=t[A[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,A=e.length;t<A;t++){const A=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[A]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}).prototype.isPoints=!0,class extends k{constructor(e,t,A,n,r,i,o,a,c){super(e,t,A,n,r,i,o,a,c),this.format=void 0!==o?o:p,this.minFilter=void 0!==i?i:s,this.magFilter=void 0!==r?r:s,this.generateMipmaps=!1;const l=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){l.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0;(class extends k{constructor(e,t,A,n,r,i,s,o,a,c,l,h){super(null,i,s,o,a,c,n,r,l,h),this.image={width:t,height:A},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class extends k{constructor(e,t,A,n,r,i,s,o,a){super(e,t,A,n,r,i,s,o,a),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0,class extends k{constructor(e,t,A,n,r,s,o,a,l,h){if((h=void 0!==h?h:f)!==f&&h!==m)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===A&&h===f&&(A=c),void 0===A&&h===m&&(A=d),super(null,n,r,s,o,a,h,A,l),this.image={width:e,height:t},this.magFilter=void 0!==o?o:i,this.minFilter=void 0!==a?a:i,this.flipY=!1,this.generateMipmaps=!1}}.prototype.isDepthTexture=!0,new J,new J,new J,new at;class Ei{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const A=this.getUtoTmapping(e);return this.getPoint(A,t)}getPoints(e=5){const t=[];for(let A=0;A<=e;A++)t.push(this.getPoint(A/e));return t}getSpacedPoints(e=5){const t=[];for(let A=0;A<=e;A++)t.push(this.getPointAt(A/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let A,n=this.getPoint(0),r=0;t.push(0);for(let i=1;i<=e;i++)A=this.getPoint(i/e),r+=A.distanceTo(n),t.push(r),n=A;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const A=this.getLengths();let n=0;const r=A.length;let i;i=t||e*A[r-1];let s,o=0,a=r-1;for(;o<=a;)if(n=Math.floor(o+(a-o)/2),s=A[n]-i,s<0)o=n+1;else{if(!(s>0)){a=n;break}a=n-1}if(n=a,A[n]===i)return n/(r-1);const c=A[n];return(n+(i-c)/(A[n+1]-c))/(r-1)}getTangent(e,t){const A=1e-4;let n=e-A,r=e+A;n<0&&(n=0),r>1&&(r=1);const i=this.getPoint(n),s=this.getPoint(r),o=t||(i.isVector2?new P:new J);return o.copy(s).sub(i).normalize(),o}getTangentAt(e,t){const A=this.getUtoTmapping(e);return this.getTangent(A,t)}computeFrenetFrames(e,t){const A=new J,n=[],r=[],i=[],s=new J,o=new Ee;for(let t=0;t<=e;t++){const A=t/e;n[t]=this.getTangentAt(A,new J),n[t].normalize()}r[0]=new J,i[0]=new J;let a=Number.MAX_VALUE;const c=Math.abs(n[0].x),l=Math.abs(n[0].y),h=Math.abs(n[0].z);c<=a&&(a=c,A.set(1,0,0)),l<=a&&(a=l,A.set(0,1,0)),h<=a&&A.set(0,0,1),s.crossVectors(n[0],A).normalize(),r[0].crossVectors(n[0],s),i[0].crossVectors(n[0],r[0]);for(let t=1;t<=e;t++){if(r[t]=r[t-1].clone(),i[t]=i[t-1].clone(),s.crossVectors(n[t-1],n[t]),s.length()>Number.EPSILON){s.normalize();const e=Math.acos(H(n[t-1].dot(n[t]),-1,1));r[t].applyMatrix4(o.makeRotationAxis(s,e))}i[t].crossVectors(n[t],r[t])}if(!0===t){let t=Math.acos(H(r[0].dot(r[e]),-1,1));t/=e,n[0].dot(s.crossVectors(r[0],r[e]))>0&&(t=-t);for(let A=1;A<=e;A++)r[A].applyMatrix4(o.makeRotationAxis(n[A],t*A)),i[A].crossVectors(n[A],r[A])}return{tangents:n,normals:r,binormals:i}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ui extends Ei{constructor(e=0,t=0,A=1,n=1,r=0,i=2*Math.PI,s=!1,o=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=A,this.yRadius=n,this.aStartAngle=r,this.aEndAngle=i,this.aClockwise=s,this.aRotation=o}getPoint(e,t){const A=t||new P,n=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const i=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=i?0:n),!0!==this.aClockwise||i||(r===n?r=-n:r-=n);const s=this.aStartAngle+e*r;let o=this.aX+this.xRadius*Math.cos(s),a=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),A=o-this.aX,n=a-this.aY;o=A*e-n*t+this.aX,a=A*t+n*e+this.aY}return A.set(o,a)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Ui.prototype.isEllipseCurve=!0;class Fi extends Ui{constructor(e,t,A,n,r,i){super(e,t,A,A,n,r,i),this.type="ArcCurve"}}function Qi(){let e=0,t=0,A=0,n=0;function r(r,i,s,o){e=r,t=s,A=-3*r+3*i-2*s-o,n=2*r-2*i+s+o}return{initCatmullRom:function(e,t,A,n,i){r(t,A,i*(A-e),i*(n-t))},initNonuniformCatmullRom:function(e,t,A,n,i,s,o){let a=(t-e)/i-(A-e)/(i+s)+(A-t)/s,c=(A-t)/s-(n-t)/(s+o)+(n-A)/o;a*=s,c*=s,r(t,A,a,c)},calc:function(r){const i=r*r;return e+t*r+A*i+n*(i*r)}}}Fi.prototype.isArcCurve=!0;const Mi=new J,Si=new Qi,Ti=new Qi,Li=new Qi;class Hi extends Ei{constructor(e=[],t=!1,A="centripetal",n=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=A,this.tension=n}getPoint(e,t=new J){const A=t,n=this.points,r=n.length,i=(r-(this.closed?0:1))*e;let s,o,a=Math.floor(i),c=i-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/r)+1)*r:0===c&&a===r-1&&(a=r-2,c=1),this.closed||a>0?s=n[(a-1)%r]:(Mi.subVectors(n[0],n[1]).add(n[0]),s=Mi);const l=n[a%r],h=n[(a+1)%r];if(this.closed||a+2<r?o=n[(a+2)%r]:(Mi.subVectors(n[r-1],n[r-2]).add(n[r-1]),o=Mi),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(s.distanceToSquared(l),e),A=Math.pow(l.distanceToSquared(h),e),n=Math.pow(h.distanceToSquared(o),e);A<1e-4&&(A=1),t<1e-4&&(t=A),n<1e-4&&(n=A),Si.initNonuniformCatmullRom(s.x,l.x,h.x,o.x,t,A,n),Ti.initNonuniformCatmullRom(s.y,l.y,h.y,o.y,t,A,n),Li.initNonuniformCatmullRom(s.z,l.z,h.z,o.z,t,A,n)}else"catmullrom"===this.curveType&&(Si.initCatmullRom(s.x,l.x,h.x,o.x,this.tension),Ti.initCatmullRom(s.y,l.y,h.y,o.y,this.tension),Li.initCatmullRom(s.z,l.z,h.z,o.z,this.tension));return A.set(Si.calc(c),Ti.calc(c),Li.calc(c)),A}copy(e){super.copy(e),this.points=[];for(let t=0,A=e.points.length;t<A;t++){const A=e.points[t];this.points.push(A.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,A=this.points.length;t<A;t++){const A=this.points[t];e.points.push(A.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,A=e.points.length;t<A;t++){const A=e.points[t];this.points.push((new J).fromArray(A))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Ii(e,t,A,n,r){const i=.5*(n-t),s=.5*(r-A),o=e*e;return(2*A-2*n+i+s)*(e*o)+(-3*A+3*n-2*i-s)*o+i*e+A}function Di(e,t,A,n){return function(e,t){const A=1-e;return A*A*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,A)+function(e,t){return e*e*t}(e,n)}function Ri(e,t,A,n,r){return function(e,t){const A=1-e;return A*A*A*t}(e,t)+function(e,t){const A=1-e;return 3*A*A*e*t}(e,A)+function(e,t){return 3*(1-e)*e*e*t}(e,n)+function(e,t){return e*e*e*t}(e,r)}Hi.prototype.isCatmullRomCurve3=!0;class Pi extends Ei{constructor(e=new P,t=new P,A=new P,n=new P){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=A,this.v3=n}getPoint(e,t=new P){const A=t,n=this.v0,r=this.v1,i=this.v2,s=this.v3;return A.set(Ri(e,n.x,r.x,i.x,s.x),Ri(e,n.y,r.y,i.y,s.y)),A}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Pi.prototype.isCubicBezierCurve=!0;class Ni extends Ei{constructor(e=new J,t=new J,A=new J,n=new J){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=A,this.v3=n}getPoint(e,t=new J){const A=t,n=this.v0,r=this.v1,i=this.v2,s=this.v3;return A.set(Ri(e,n.x,r.x,i.x,s.x),Ri(e,n.y,r.y,i.y,s.y),Ri(e,n.z,r.z,i.z,s.z)),A}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Ni.prototype.isCubicBezierCurve3=!0;class Oi extends Ei{constructor(e=new P,t=new P){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new P){const A=t;return 1===e?A.copy(this.v2):(A.copy(this.v2).sub(this.v1),A.multiplyScalar(e).add(this.v1)),A}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const A=t||new P;return A.copy(this.v2).sub(this.v1).normalize(),A}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Oi.prototype.isLineCurve=!0;class Gi extends Ei{constructor(e=new P,t=new P,A=new P){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=A}getPoint(e,t=new P){const A=t,n=this.v0,r=this.v1,i=this.v2;return A.set(Di(e,n.x,r.x,i.x),Di(e,n.y,r.y,i.y)),A}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Gi.prototype.isQuadraticBezierCurve=!0;class Vi extends Ei{constructor(e=new J,t=new J,A=new J){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=A}getPoint(e,t=new J){const A=t,n=this.v0,r=this.v1,i=this.v2;return A.set(Di(e,n.x,r.x,i.x),Di(e,n.y,r.y,i.y),Di(e,n.z,r.z,i.z)),A}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Vi.prototype.isQuadraticBezierCurve3=!0;class ki extends Ei{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new P){const A=t,n=this.points,r=(n.length-1)*e,i=Math.floor(r),s=r-i,o=n[0===i?i:i-1],a=n[i],c=n[i>n.length-2?n.length-1:i+1],l=n[i>n.length-3?n.length-1:i+2];return A.set(Ii(s,o.x,a.x,c.x,l.x),Ii(s,o.y,a.y,c.y,l.y)),A}copy(e){super.copy(e),this.points=[];for(let t=0,A=e.points.length;t<A;t++){const A=e.points[t];this.points.push(A.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,A=this.points.length;t<A;t++){const A=this.points[t];e.points.push(A.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,A=e.points.length;t<A;t++){const A=e.points[t];this.points.push((new P).fromArray(A))}return this}}ki.prototype.isSplineCurve=!0;var Ki=Object.freeze({__proto__:null,ArcCurve:Fi,CatmullRomCurve3:Hi,CubicBezierCurve:Pi,CubicBezierCurve3:Ni,EllipseCurve:Ui,LineCurve:Oi,LineCurve3:class extends Ei{constructor(e=new J,t=new J){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new J){const A=t;return 1===e?A.copy(this.v2):(A.copy(this.v2).sub(this.v1),A.multiplyScalar(e).add(this.v1)),A}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:Gi,QuadraticBezierCurve3:Vi,SplineCurve:ki});function zi(e,t,A,n,r){let i,s;if(r===function(e,t,A,n){let r=0;for(let i=t,s=A-n;i<A;i+=n)r+=(e[s]-e[i])*(e[i+1]+e[s+1]),s=i;return r}(e,t,A,n)>0)for(i=t;i<A;i+=n)s=us(i,e[i],e[i+1],s);else for(i=A-n;i>=t;i-=n)s=us(i,e[i],e[i+1],s);return s&&ss(s,s.next)&&(ds(s),s=s.next),s}function Wi(e,t){if(!e)return e;t||(t=e);let A,n=e;do{if(A=!1,n.steiner||!ss(n,n.next)&&0!==is(n.prev,n,n.next))n=n.next;else{if(ds(n),n=t=n.prev,n===n.next)break;A=!0}}while(A||n!==t);return t}function Xi(e,t,A,n,r,i,s){if(!e)return;!s&&i&&function(e,t,A,n){let r=e;do{null===r.z&&(r.z=ts(r.x,r.y,t,A,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,A,n,r,i,s,o,a,c=1;do{for(A=e,e=null,i=null,s=0;A;){for(s++,n=A,o=0,t=0;t<c&&(o++,n=n.nextZ,n);t++);for(a=c;o>0||a>0&&n;)0!==o&&(0===a||!n||A.z<=n.z)?(r=A,A=A.nextZ,o--):(r=n,n=n.nextZ,a--),i?i.nextZ=r:e=r,r.prevZ=i,i=r;A=n}i.nextZ=null,c*=2}while(s>1)}(r)}(e,n,r,i);let o,a,c=e;for(;e.prev!==e.next;)if(o=e.prev,a=e.next,i?Ji(e,n,r,i):Yi(e))t.push(o.i/A),t.push(e.i/A),t.push(a.i/A),ds(e),e=a.next,c=a.next;else if((e=a)===c){s?1===s?Xi(e=ji(Wi(e),t,A),t,A,n,r,i,2):2===s&&Zi(e,t,A,n,r,i):Xi(Wi(e),t,A,n,r,i,1);break}}function Yi(e){const t=e.prev,A=e,n=e.next;if(is(t,A,n)>=0)return!1;let r=e.next.next;for(;r!==e.prev;){if(ns(t.x,t.y,A.x,A.y,n.x,n.y,r.x,r.y)&&is(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Ji(e,t,A,n){const r=e.prev,i=e,s=e.next;if(is(r,i,s)>=0)return!1;const o=r.x<i.x?r.x<s.x?r.x:s.x:i.x<s.x?i.x:s.x,a=r.y<i.y?r.y<s.y?r.y:s.y:i.y<s.y?i.y:s.y,c=r.x>i.x?r.x>s.x?r.x:s.x:i.x>s.x?i.x:s.x,l=r.y>i.y?r.y>s.y?r.y:s.y:i.y>s.y?i.y:s.y,h=ts(o,a,t,A,n),u=ts(c,l,t,A,n);let d=e.prevZ,p=e.nextZ;for(;d&&d.z>=h&&p&&p.z<=u;){if(d!==e.prev&&d!==e.next&&ns(r.x,r.y,i.x,i.y,s.x,s.y,d.x,d.y)&&is(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==e.prev&&p!==e.next&&ns(r.x,r.y,i.x,i.y,s.x,s.y,p.x,p.y)&&is(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==e.prev&&d!==e.next&&ns(r.x,r.y,i.x,i.y,s.x,s.y,d.x,d.y)&&is(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=u;){if(p!==e.prev&&p!==e.next&&ns(r.x,r.y,i.x,i.y,s.x,s.y,p.x,p.y)&&is(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function ji(e,t,A){let n=e;do{const r=n.prev,i=n.next.next;!ss(r,i)&&os(r,n,n.next,i)&&ls(r,i)&&ls(i,r)&&(t.push(r.i/A),t.push(n.i/A),t.push(i.i/A),ds(n),ds(n.next),n=e=i),n=n.next}while(n!==e);return Wi(n)}function Zi(e,t,A,n,r,i){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&rs(s,e)){let o=hs(s,e);return s=Wi(s,s.next),o=Wi(o,o.next),Xi(s,t,A,n,r,i),void Xi(o,t,A,n,r,i)}e=e.next}s=s.next}while(s!==e)}function qi(e,t){return e.x-t.x}function $i(e,t){if(t=function(e,t){let A=t;const n=e.x,r=e.y;let i,s=-1/0;do{if(r<=A.y&&r>=A.next.y&&A.next.y!==A.y){const e=A.x+(r-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(e<=n&&e>s){if(s=e,e===n){if(r===A.y)return A;if(r===A.next.y)return A.next}i=A.x<A.next.x?A:A.next}}A=A.next}while(A!==t);if(!i)return null;if(n===s)return i;const o=i,a=i.x,c=i.y;let l,h=1/0;A=i;do{n>=A.x&&A.x>=a&&n!==A.x&&ns(r<c?n:s,r,a,c,r<c?s:n,r,A.x,A.y)&&(l=Math.abs(r-A.y)/(n-A.x),ls(A,e)&&(l<h||l===h&&(A.x>i.x||A.x===i.x&&es(i,A)))&&(i=A,h=l)),A=A.next}while(A!==o);return i}(e,t)){const A=hs(t,e);Wi(t,t.next),Wi(A,A.next)}}function es(e,t){return is(e.prev,e,t.prev)<0&&is(t.next,e,e.next)<0}function ts(e,t,A,n,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-A)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function As(e){let t=e,A=e;do{(t.x<A.x||t.x===A.x&&t.y<A.y)&&(A=t),t=t.next}while(t!==e);return A}function ns(e,t,A,n,r,i,s,o){return(r-s)*(t-o)-(e-s)*(i-o)>=0&&(e-s)*(n-o)-(A-s)*(t-o)>=0&&(A-s)*(i-o)-(r-s)*(n-o)>=0}function rs(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let A=e;do{if(A.i!==e.i&&A.next.i!==e.i&&A.i!==t.i&&A.next.i!==t.i&&os(A,A.next,e,t))return!0;A=A.next}while(A!==e);return!1}(e,t)&&(ls(e,t)&&ls(t,e)&&function(e,t){let A=e,n=!1;const r=(e.x+t.x)/2,i=(e.y+t.y)/2;do{A.y>i!=A.next.y>i&&A.next.y!==A.y&&r<(A.next.x-A.x)*(i-A.y)/(A.next.y-A.y)+A.x&&(n=!n),A=A.next}while(A!==e);return n}(e,t)&&(is(e.prev,e,t.prev)||is(e,t.prev,t))||ss(e,t)&&is(e.prev,e,e.next)>0&&is(t.prev,t,t.next)>0)}function is(e,t,A){return(t.y-e.y)*(A.x-t.x)-(t.x-e.x)*(A.y-t.y)}function ss(e,t){return e.x===t.x&&e.y===t.y}function os(e,t,A,n){const r=cs(is(e,t,A)),i=cs(is(e,t,n)),s=cs(is(A,n,e)),o=cs(is(A,n,t));return r!==i&&s!==o||!(0!==r||!as(e,A,t))||!(0!==i||!as(e,n,t))||!(0!==s||!as(A,e,n))||!(0!==o||!as(A,t,n))}function as(e,t,A){return t.x<=Math.max(e.x,A.x)&&t.x>=Math.min(e.x,A.x)&&t.y<=Math.max(e.y,A.y)&&t.y>=Math.min(e.y,A.y)}function cs(e){return e>0?1:e<0?-1:0}function ls(e,t){return is(e.prev,e,e.next)<0?is(e,t,e.next)>=0&&is(e,e.prev,t)>=0:is(e,t,e.prev)<0||is(e,e.next,t)<0}function hs(e,t){const A=new ps(e.i,e.x,e.y),n=new ps(t.i,t.x,t.y),r=e.next,i=t.prev;return e.next=t,t.prev=e,A.next=r,r.prev=A,n.next=A,A.prev=n,i.next=n,n.prev=i,n}function us(e,t,A,n){const r=new ps(e,t,A);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function ds(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ps(e,t,A){this.i=e,this.x=t,this.y=A,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class gs{static area(e){const t=e.length;let A=0;for(let n=t-1,r=0;r<t;n=r++)A+=e[n].x*e[r].y-e[r].x*e[n].y;return.5*A}static isClockWise(e){return gs.area(e)<0}static triangulateShape(e,t){const A=[],n=[],r=[];fs(e),ms(A,e);let i=e.length;t.forEach(fs);for(let e=0;e<t.length;e++)n.push(i),i+=t[e].length,ms(A,t[e]);const s=function(e,t,A=2){const n=t&&t.length,r=n?t[0]*A:e.length;let i=zi(e,0,r,A,!0);const s=[];if(!i||i.next===i.prev)return s;let o,a,c,l,h,u,d;if(n&&(i=function(e,t,A,n){const r=[];let i,s,o,a,c;for(i=0,s=t.length;i<s;i++)o=t[i]*n,a=i<s-1?t[i+1]*n:e.length,c=zi(e,o,a,n,!1),c===c.next&&(c.steiner=!0),r.push(As(c));for(r.sort(qi),i=0;i<r.length;i++)$i(r[i],A),A=Wi(A,A.next);return A}(e,t,i,A)),e.length>80*A){o=c=e[0],a=l=e[1];for(let t=A;t<r;t+=A)h=e[t],u=e[t+1],h<o&&(o=h),u<a&&(a=u),h>c&&(c=h),u>l&&(l=u);d=Math.max(c-o,l-a),d=0!==d?1/d:0}return Xi(i,s,A,o,a,d),s}(A,n);for(let e=0;e<s.length;e+=3)r.push(s.slice(e,e+3));return r}}function fs(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function ms(e,t){for(let A=0;A<t.length;A++)e.push(t[A].x),e.push(t[A].y)}class Bs extends Lt{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const A=this,n=[],r=[];for(let t=0,A=e.length;t<A;t++)i(e[t]);function i(e){const i=[],s=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1;let a=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,l=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:l-2,u=void 0!==t.bevelOffset?t.bevelOffset:0,d=void 0!==t.bevelSegments?t.bevelSegments:3;const p=t.extrudePath,g=void 0!==t.UVGenerator?t.UVGenerator:ws;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),a=t.amount);let f,m,B,w,v,y=!1;p&&(f=p.getSpacedPoints(o),y=!0,c=!1,m=p.computeFrenetFrames(o,!1),B=new J,w=new J,v=new J),c||(d=0,l=0,h=0,u=0);const x=e.extractPoints(s);let C=x.shape;const b=x.holes;if(!gs.isClockWise(C)){C=C.reverse();for(let e=0,t=b.length;e<t;e++){const t=b[e];gs.isClockWise(t)&&(b[e]=t.reverse())}}const _=gs.triangulateShape(C,b),E=C;for(let e=0,t=b.length;e<t;e++){const t=b[e];C=C.concat(t)}function U(e,t,A){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(A).add(e)}const F=C.length,Q=_.length;function M(e,t,A){let n,r,i;const s=e.x-t.x,o=e.y-t.y,a=A.x-e.x,c=A.y-e.y,l=s*s+o*o,h=s*c-o*a;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(l),u=Math.sqrt(a*a+c*c),d=t.x-o/h,p=t.y+s/h,g=((A.x-c/u-d)*c-(A.y+a/u-p)*a)/(s*c-o*a);n=d+s*g-e.x,r=p+o*g-e.y;const f=n*n+r*r;if(f<=2)return new P(n,r);i=Math.sqrt(f/2)}else{let e=!1;s>Number.EPSILON?a>Number.EPSILON&&(e=!0):s<-Number.EPSILON?a<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(c)&&(e=!0),e?(n=-o,r=s,i=Math.sqrt(l)):(n=s,r=o,i=Math.sqrt(l/2))}return new P(n/i,r/i)}const S=[];for(let e=0,t=E.length,A=t-1,n=e+1;e<t;e++,A++,n++)A===t&&(A=0),n===t&&(n=0),S[e]=M(E[e],E[A],E[n]);const T=[];let L,H=S.concat();for(let e=0,t=b.length;e<t;e++){const t=b[e];L=[];for(let e=0,A=t.length,n=A-1,r=e+1;e<A;e++,n++,r++)n===A&&(n=0),r===A&&(r=0),L[e]=M(t[e],t[n],t[r]);T.push(L),H=H.concat(L)}for(let e=0;e<d;e++){const t=e/d,A=l*Math.cos(t*Math.PI/2),n=h*Math.sin(t*Math.PI/2)+u;for(let e=0,t=E.length;e<t;e++){const t=U(E[e],S[e],n);R(t.x,t.y,-A)}for(let e=0,t=b.length;e<t;e++){const t=b[e];L=T[e];for(let e=0,r=t.length;e<r;e++){const r=U(t[e],L[e],n);R(r.x,r.y,-A)}}}const I=h+u;for(let e=0;e<F;e++){const t=c?U(C[e],H[e],I):C[e];y?(w.copy(m.normals[0]).multiplyScalar(t.x),B.copy(m.binormals[0]).multiplyScalar(t.y),v.copy(f[0]).add(w).add(B),R(v.x,v.y,v.z)):R(t.x,t.y,0)}for(let e=1;e<=o;e++)for(let t=0;t<F;t++){const A=c?U(C[t],H[t],I):C[t];y?(w.copy(m.normals[e]).multiplyScalar(A.x),B.copy(m.binormals[e]).multiplyScalar(A.y),v.copy(f[e]).add(w).add(B),R(v.x,v.y,v.z)):R(A.x,A.y,a/o*e)}for(let e=d-1;e>=0;e--){const t=e/d,A=l*Math.cos(t*Math.PI/2),n=h*Math.sin(t*Math.PI/2)+u;for(let e=0,t=E.length;e<t;e++){const t=U(E[e],S[e],n);R(t.x,t.y,a+A)}for(let e=0,t=b.length;e<t;e++){const t=b[e];L=T[e];for(let e=0,r=t.length;e<r;e++){const r=U(t[e],L[e],n);y?R(r.x,r.y+f[o-1].y,f[o-1].x+A):R(r.x,r.y,a+A)}}}function D(e,t){let A=e.length;for(;--A>=0;){const n=A;let r=A-1;r<0&&(r=e.length-1);for(let e=0,A=o+2*d;e<A;e++){const A=F*e,i=F*(e+1);O(t+n+A,t+r+A,t+r+i,t+n+i)}}}function R(e,t,A){i.push(e),i.push(t),i.push(A)}function N(e,t,r){G(e),G(t),G(r);const i=n.length/3,s=g.generateTopUV(A,n,i-3,i-2,i-1);V(s[0]),V(s[1]),V(s[2])}function O(e,t,r,i){G(e),G(t),G(i),G(t),G(r),G(i);const s=n.length/3,o=g.generateSideWallUV(A,n,s-6,s-3,s-2,s-1);V(o[0]),V(o[1]),V(o[3]),V(o[1]),V(o[2]),V(o[3])}function G(e){n.push(i[3*e+0]),n.push(i[3*e+1]),n.push(i[3*e+2])}function V(e){r.push(e.x),r.push(e.y)}!function(){const e=n.length/3;if(c){let e=0,t=F*e;for(let e=0;e<Q;e++){const A=_[e];N(A[2]+t,A[1]+t,A[0]+t)}e=o+2*d,t=F*e;for(let e=0;e<Q;e++){const A=_[e];N(A[0]+t,A[1]+t,A[2]+t)}}else{for(let e=0;e<Q;e++){const t=_[e];N(t[2],t[1],t[0])}for(let e=0;e<Q;e++){const t=_[e];N(t[0]+F*o,t[1]+F*o,t[2]+F*o)}}A.addGroup(e,n.length/3-e,0)}(),function(){const e=n.length/3;let t=0;D(E,t),t+=E.length;for(let e=0,A=b.length;e<A;e++){const A=b[e];D(A,t),t+=A.length}A.addGroup(e,n.length/3-e,1)}()}this.setAttribute("position",new bt(n,3)),this.setAttribute("uv",new bt(r,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(e,t,A){if(A.shapes=[],Array.isArray(e))for(let t=0,n=e.length;t<n;t++){const n=e[t];A.shapes.push(n.uuid)}else A.shapes.push(e.uuid);return void 0!==t.extrudePath&&(A.options.extrudePath=t.extrudePath.toJSON()),A}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const A=[];for(let n=0,r=e.shapes.length;n<r;n++){const r=t[e.shapes[n]];A.push(r)}const n=e.options.extrudePath;return void 0!==n&&(e.options.extrudePath=(new Ki[n.type]).fromJSON(n)),new Bs(A,e.options)}}const ws={generateTopUV:function(e,t,A,n,r){const i=t[3*A],s=t[3*A+1],o=t[3*n],a=t[3*n+1],c=t[3*r],l=t[3*r+1];return[new P(i,s),new P(o,a),new P(c,l)]},generateSideWallUV:function(e,t,A,n,r,i){const s=t[3*A],o=t[3*A+1],a=t[3*A+2],c=t[3*n],l=t[3*n+1],h=t[3*n+2],u=t[3*r],d=t[3*r+1],p=t[3*r+2],g=t[3*i],f=t[3*i+1],m=t[3*i+2];return Math.abs(o-l)<Math.abs(s-c)?[new P(s,1-a),new P(c,1-h),new P(u,1-p),new P(g,1-m)]:[new P(o,1-a),new P(l,1-h),new P(d,1-p),new P(f,1-m)]}};class vs extends Lt{constructor(e,t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const A=[],n=[],r=[],i=[];let s=0,o=0;if(!1===Array.isArray(e))a(e);else for(let t=0;t<e.length;t++)a(e[t]),this.addGroup(s,o,t),s+=o,o=0;function a(e){const s=n.length/3,a=e.extractPoints(t);let c=a.shape;const l=a.holes;!1===gs.isClockWise(c)&&(c=c.reverse());for(let e=0,t=l.length;e<t;e++){const t=l[e];!0===gs.isClockWise(t)&&(l[e]=t.reverse())}const h=gs.triangulateShape(c,l);for(let e=0,t=l.length;e<t;e++){const t=l[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];n.push(t.x,t.y,0),r.push(0,0,1),i.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){const t=h[e],n=t[0]+s,r=t[1]+s,i=t[2]+s;A.push(n,r,i),o+=3}}this.setIndex(A),this.setAttribute("position",new bt(n,3)),this.setAttribute("normal",new bt(r,3)),this.setAttribute("uv",new bt(i,2))}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let A=0,n=e.length;A<n;A++){const n=e[A];t.shapes.push(n.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const A=[];for(let n=0,r=e.shapes.length;n<r;n++){const r=t[e.shapes[n]];A.push(r)}return new vs(A,e.curveSegments)}}(class extends lt{constructor(e){super(),this.type="ShadowMaterial",this.color=new mt(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}).prototype.isShadowMaterial=!0;(class extends nA{constructor(e){super(e),this.type="RawShaderMaterial"}}).prototype.isRawShaderMaterial=!0;class ys extends lt{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new mt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new P(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.vertexTangents=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this.vertexTangents=e.vertexTangents,this}}ys.prototype.isMeshStandardMaterial=!0;(class extends ys{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new P(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=H(2.5*(e-1)/(e+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new mt(1,1,1),this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new mt).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this}}).prototype.isMeshPhysicalMaterial=!0;(class extends lt{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new mt(16777215),this.specular=new mt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new P(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}).prototype.isMeshPhongMaterial=!0;(class extends lt{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new mt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new P(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}).prototype.isMeshToonMaterial=!0;(class extends lt{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new P(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}).prototype.isMeshNormalMaterial=!0;(class extends lt{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new mt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}).prototype.isMeshLambertMaterial=!0;(class extends lt{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new mt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new P(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class extends li{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}).prototype.isLineDashedMaterial=!0;const xs={arraySlice:function(e,t,A){return xs.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==A?A:e.length)):e.slice(t,A)},convertArray:function(e,t,A){return!e||!A&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,A=new Array(t);for(let e=0;e!==t;++e)A[e]=e;return A.sort((function(t,A){return e[t]-e[A]})),A},sortedArray:function(e,t,A){const n=e.length,r=new e.constructor(n);for(let i=0,s=0;s!==n;++i){const n=A[i]*t;for(let A=0;A!==t;++A)r[s++]=e[n+A]}return r},flattenJSON:function(e,t,A,n){let r=1,i=e[0];for(;void 0!==i&&void 0===i[n];)i=e[r++];if(void 0===i)return;let s=i[n];if(void 0!==s)if(Array.isArray(s))do{s=i[n],void 0!==s&&(t.push(i.time),A.push.apply(A,s)),i=e[r++]}while(void 0!==i);else if(void 0!==s.toArray)do{s=i[n],void 0!==s&&(t.push(i.time),s.toArray(A,A.length)),i=e[r++]}while(void 0!==i);else do{s=i[n],void 0!==s&&(t.push(i.time),A.push(s)),i=e[r++]}while(void 0!==i)},subclip:function(e,t,A,n,r=30){const i=e.clone();i.name=t;const s=[];for(let e=0;e<i.tracks.length;++e){const t=i.tracks[e],o=t.getValueSize(),a=[],c=[];for(let e=0;e<t.times.length;++e){const i=t.times[e]*r;if(!(i<A||i>=n)){a.push(t.times[e]);for(let A=0;A<o;++A)c.push(t.values[e*o+A])}}0!==a.length&&(t.times=xs.convertArray(a,t.times.constructor),t.values=xs.convertArray(c,t.values.constructor),s.push(t))}i.tracks=s;let o=1/0;for(let e=0;e<i.tracks.length;++e)o>i.tracks[e].times[0]&&(o=i.tracks[e].times[0]);for(let e=0;e<i.tracks.length;++e)i.tracks[e].shift(-1*o);return i.resetDuration(),i},makeClipAdditive:function(e,t=0,A=e,n=30){n<=0&&(n=30);const r=A.tracks.length,i=t/n;for(let t=0;t<r;++t){const n=A.tracks[t],r=n.ValueTypeName;if("bool"===r||"string"===r)continue;const s=e.tracks.find((function(e){return e.name===n.name&&e.ValueTypeName===r}));if(void 0===s)continue;let o=0;const a=n.getValueSize();n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=a/3);let c=0;const l=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=l/3);const h=n.times.length-1;let u;if(i<=n.times[0]){const e=o,t=a-o;u=xs.arraySlice(n.values,e,t)}else if(i>=n.times[h]){const e=h*a+o,t=e+a-o;u=xs.arraySlice(n.values,e,t)}else{const e=n.createInterpolant(),t=o,A=a-o;e.evaluate(i),u=xs.arraySlice(e.resultBuffer,t,A)}"quaternion"===r&&(new Y).fromArray(u).normalize().conjugate().toArray(u);const d=s.times.length;for(let e=0;e<d;++e){const t=e*l+c;if("quaternion"===r)Y.multiplyQuaternionsFlat(s.values,t,u,0,s.values,t);else{const e=l-2*c;for(let A=0;A<e;++A)s.values[t+A]-=u[A]}}}return e.blendMode=2501,e}};class Cs{constructor(e,t,A,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(A),this.sampleValues=t,this.valueSize=A,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let A=this._cachedIndex,n=t[A],r=t[A-1];e:{t:{let i;A:{n:if(!(e<n)){for(let i=A+2;;){if(void 0===n){if(e<r)break n;return A=t.length,this._cachedIndex=A,this.afterEnd_(A-1,e,r)}if(A===i)break;if(r=n,n=t[++A],e<n)break t}i=t.length;break A}if(e>=r)break e;{const s=t[1];e<s&&(A=2,r=s);for(let i=A-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(A===i)break;if(n=r,r=t[--A-1],e>=r)break t}i=A,A=0}}for(;A<i;){const n=A+i>>>1;e<t[n]?i=n:A=n+1}if(n=t[A],r=t[A-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(void 0===n)return A=t.length,this._cachedIndex=A,this.afterEnd_(A-1,r,e)}this._cachedIndex=A,this.intervalChanged_(A,r,n)}return this.interpolate_(A,r,e,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,A=this.sampleValues,n=this.valueSize,r=e*n;for(let e=0;e!==n;++e)t[e]=A[r+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Cs.prototype.beforeStart_=Cs.prototype.copySampleValue_,Cs.prototype.afterEnd_=Cs.prototype.copySampleValue_;class bs extends Cs{constructor(e,t,A,n){super(e,t,A,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:y,endingEnd:y}}intervalChanged_(e,t,A){const n=this.parameterPositions;let r=e-2,i=e+1,s=n[r],o=n[i];if(void 0===s)switch(this.getSettings_().endingStart){case x:r=e,s=2*t-A;break;case C:r=n.length-2,s=t+n[r]-n[r+1];break;default:r=e,s=A}if(void 0===o)switch(this.getSettings_().endingEnd){case x:i=e,o=2*A-t;break;case C:i=1,o=A+n[1]-n[0];break;default:i=e-1,o=t}const a=.5*(A-t),c=this.valueSize;this._weightPrev=a/(t-s),this._weightNext=a/(o-A),this._offsetPrev=r*c,this._offsetNext=i*c}interpolate_(e,t,A,n){const r=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=e*s,a=o-s,c=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,u=this._weightNext,d=(A-t)/(n-t),p=d*d,g=p*d,f=-h*g+2*h*p-h*d,m=(1+h)*g+(-1.5-2*h)*p+(-.5+h)*d+1,B=(-1-u)*g+(1.5+u)*p+.5*d,w=u*g-u*p;for(let e=0;e!==s;++e)r[e]=f*i[c+e]+m*i[a+e]+B*i[o+e]+w*i[l+e];return r}}class _s extends Cs{constructor(e,t,A,n){super(e,t,A,n)}interpolate_(e,t,A,n){const r=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=e*s,a=o-s,c=(A-t)/(n-t),l=1-c;for(let e=0;e!==s;++e)r[e]=i[a+e]*l+i[o+e]*c;return r}}class Es extends Cs{constructor(e,t,A,n){super(e,t,A,n)}interpolate_(e){return this.copySampleValue_(e-1)}}class Us{constructor(e,t,A,n){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=xs.convertArray(t,this.TimeBufferType),this.values=xs.convertArray(A,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let A;if(t.toJSON!==this.toJSON)A=t.toJSON(e);else{A={name:e.name,times:xs.convertArray(e.times,Array),values:xs.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(A.interpolation=t)}return A.type=e.ValueTypeName,A}InterpolantFactoryMethodDiscrete(e){return new Es(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new _s(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new bs(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case B:t=this.InterpolantFactoryMethodDiscrete;break;case w:t=this.InterpolantFactoryMethodLinear;break;case v:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return B;case this.InterpolantFactoryMethodLinear:return w;case this.InterpolantFactoryMethodSmooth:return v}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let A=0,n=t.length;A!==n;++A)t[A]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let A=0,n=t.length;A!==n;++A)t[A]*=e}return this}trim(e,t){const A=this.times,n=A.length;let r=0,i=n-1;for(;r!==n&&A[r]<e;)++r;for(;-1!==i&&A[i]>t;)--i;if(++i,0!==r||i!==n){r>=i&&(i=Math.max(i,1),r=i-1);const e=this.getValueSize();this.times=xs.arraySlice(A,r,i),this.values=xs.arraySlice(this.values,r*e,i*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const A=this.times,n=this.values,r=A.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let i=null;for(let t=0;t!==r;t++){const n=A[t];if("number"==typeof n&&isNaN(n)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,n),e=!1;break}if(null!==i&&i>n){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,n,i),e=!1;break}i=n}if(void 0!==n&&xs.isTypedArray(n))for(let t=0,A=n.length;t!==A;++t){const A=n[t];if(isNaN(A)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,A),e=!1;break}}return e}optimize(){const e=xs.arraySlice(this.times),t=xs.arraySlice(this.values),A=this.getValueSize(),n=this.getInterpolation()===v,r=e.length-1;let i=1;for(let s=1;s<r;++s){let r=!1;const o=e[s];if(o!==e[s+1]&&(1!==s||o!==e[0]))if(n)r=!0;else{const e=s*A,n=e-A,i=e+A;for(let s=0;s!==A;++s){const A=t[e+s];if(A!==t[n+s]||A!==t[i+s]){r=!0;break}}}if(r){if(s!==i){e[i]=e[s];const n=s*A,r=i*A;for(let e=0;e!==A;++e)t[r+e]=t[n+e]}++i}}if(r>0){e[i]=e[r];for(let e=r*A,n=i*A,s=0;s!==A;++s)t[n+s]=t[e+s];++i}return i!==e.length?(this.times=xs.arraySlice(e,0,i),this.values=xs.arraySlice(t,0,i*A)):(this.times=e,this.values=t),this}clone(){const e=xs.arraySlice(this.times,0),t=xs.arraySlice(this.values,0),A=new(0,this.constructor)(this.name,e,t);return A.createInterpolant=this.createInterpolant,A}}Us.prototype.TimeBufferType=Float32Array,Us.prototype.ValueBufferType=Float32Array,Us.prototype.DefaultInterpolation=w;class Fs extends Us{}Fs.prototype.ValueTypeName="bool",Fs.prototype.ValueBufferType=Array,Fs.prototype.DefaultInterpolation=B,Fs.prototype.InterpolantFactoryMethodLinear=void 0,Fs.prototype.InterpolantFactoryMethodSmooth=void 0;class Qs extends Us{}Qs.prototype.ValueTypeName="color";class Ms extends Us{}Ms.prototype.ValueTypeName="number";class Ss extends Cs{constructor(e,t,A,n){super(e,t,A,n)}interpolate_(e,t,A,n){const r=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=(A-t)/(n-t);let a=e*s;for(let e=a+s;a!==e;a+=4)Y.slerpFlat(r,0,i,a-s,i,a,o);return r}}class Ts extends Us{InterpolantFactoryMethodLinear(e){return new Ss(this.times,this.values,this.getValueSize(),e)}}Ts.prototype.ValueTypeName="quaternion",Ts.prototype.DefaultInterpolation=w,Ts.prototype.InterpolantFactoryMethodSmooth=void 0;class Ls extends Us{}Ls.prototype.ValueTypeName="string",Ls.prototype.ValueBufferType=Array,Ls.prototype.DefaultInterpolation=B,Ls.prototype.InterpolantFactoryMethodLinear=void 0,Ls.prototype.InterpolantFactoryMethodSmooth=void 0;class Hs extends Us{}Hs.prototype.ValueTypeName="vector";class Is{constructor(e,t=-1,A,n=2500){this.name=e,this.tracks=A,this.duration=t,this.blendMode=n,this.uuid=L(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],A=e.tracks,n=1/(e.fps||1);for(let e=0,r=A.length;e!==r;++e)t.push(Ds(A[e]).scale(n));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],A=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,n=A.length;e!==n;++e)t.push(Us.toJSON(A[e]));return n}static CreateFromMorphTargetSequence(e,t,A,n){const r=t.length,i=[];for(let e=0;e<r;e++){let s=[],o=[];s.push((e+r-1)%r,e,(e+1)%r),o.push(0,1,0);const a=xs.getKeyframeOrder(s);s=xs.sortedArray(s,1,a),o=xs.sortedArray(o,1,a),n||0!==s[0]||(s.push(r),o.push(o[0])),i.push(new Ms(".morphTargetInfluences["+t[e].name+"]",s,o).scale(1/A))}return new this(e,-1,i)}static findByName(e,t){let A=e;if(!Array.isArray(e)){const t=e;A=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<A.length;e++)if(A[e].name===t)return A[e];return null}static CreateClipsFromMorphTargetSequences(e,t,A){const n={},r=/^([\w-]*?)([\d]+)$/;for(let t=0,A=e.length;t<A;t++){const A=e[t],i=A.name.match(r);if(i&&i.length>1){const e=i[1];let t=n[e];t||(n[e]=t=[]),t.push(A)}}const i=[];for(const e in n)i.push(this.CreateFromMorphTargetSequence(e,n[e],t,A));return i}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const A=function(e,t,A,n,r){if(0!==A.length){const i=[],s=[];xs.flattenJSON(A,i,s,n),0!==i.length&&r.push(new e(t,i,s))}},n=[],r=e.name||"default",i=e.fps||30,s=e.blendMode;let o=e.length||-1;const a=e.hierarchy||[];for(let e=0;e<a.length;e++){const r=a[e].keys;if(r&&0!==r.length)if(r[0].morphTargets){const e={};let t;for(t=0;t<r.length;t++)if(r[t].morphTargets)for(let A=0;A<r[t].morphTargets.length;A++)e[r[t].morphTargets[A]]=-1;for(const A in e){const e=[],i=[];for(let n=0;n!==r[t].morphTargets.length;++n){const n=r[t];e.push(n.time),i.push(n.morphTarget===A?1:0)}n.push(new Ms(".morphTargetInfluence["+A+"]",e,i))}o=e.length*(i||1)}else{const i=".bones["+t[e].name+"]";A(Hs,i+".position",r,"pos",n),A(Ts,i+".quaternion",r,"rot",n),A(Hs,i+".scale",r,"scl",n)}}return 0===n.length?null:new this(r,o,n,s)}resetDuration(){let e=0;for(let t=0,A=this.tracks.length;t!==A;++t){const A=this.tracks[t];e=Math.max(e,A.times[A.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Ds(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ms;case"vector":case"vector2":case"vector3":case"vector4":return Hs;case"color":return Qs;case"quaternion":return Ts;case"bool":case"boolean":return Fs;case"string":return Ls}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],A=[];xs.flattenJSON(e.keys,t,A,"value"),e.times=t,e.values=A}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Rs={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};const Ps=new class{constructor(e,t,A){const n=this;let r,i=!1,s=0,o=0;const a=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=A,this.itemStart=function(e){o++,!1===i&&void 0!==n.onStart&&n.onStart(e,s,o),i=!0},this.itemEnd=function(e){s++,void 0!==n.onProgress&&n.onProgress(e,s,o),s===o&&(i=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(e){void 0!==n.onError&&n.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return a.push(e,t),this},this.removeHandler=function(e){const t=a.indexOf(e);return-1!==t&&a.splice(t,2),this},this.getHandler=function(e){for(let t=0,A=a.length;t<A;t+=2){const A=a[t],n=a[t+1];if(A.global&&(A.lastIndex=0),A.test(e))return n}return null}}};class Ns{constructor(e){this.manager=void 0!==e?e:Ps,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const A=this;return new Promise((function(n,r){A.load(e,n,t,r)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Os={};class Gs extends Ns{constructor(e){super(e)}load(e,t,A,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,i=Rs.get(e);if(void 0!==i)return r.manager.itemStart(e),setTimeout((function(){t&&t(i),r.manager.itemEnd(e)}),0),i;if(void 0!==Os[e])return void Os[e].push({onLoad:t,onProgress:A,onError:n});const s=e.match(/^data:(.*?)(;base64)?,(.*)$/);let o;if(s){const A=s[1],i=!!s[2];let o=s[3];o=decodeURIComponent(o),i&&(o=atob(o));try{let n;const i=(this.responseType||"").toLowerCase();switch(i){case"arraybuffer":case"blob":const e=new Uint8Array(o.length);for(let t=0;t<o.length;t++)e[t]=o.charCodeAt(t);n="blob"===i?new Blob([e.buffer],{type:A}):e.buffer;break;case"document":const t=new DOMParser;n=t.parseFromString(o,A);break;case"json":n=JSON.parse(o);break;default:n=o}setTimeout((function(){t&&t(n),r.manager.itemEnd(e)}),0)}catch(t){setTimeout((function(){n&&n(t),r.manager.itemError(e),r.manager.itemEnd(e)}),0)}}else{Os[e]=[],Os[e].push({onLoad:t,onProgress:A,onError:n}),o=new XMLHttpRequest,o.open("GET",e,!0),o.addEventListener("load",(function(t){const A=this.response,n=Os[e];if(delete Os[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Rs.add(e,A);for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onLoad&&t.onLoad(A)}r.manager.itemEnd(e)}else{for(let e=0,A=n.length;e<A;e++){const A=n[e];A.onError&&A.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}}),!1),o.addEventListener("progress",(function(t){const A=Os[e];for(let e=0,n=A.length;e<n;e++){const n=A[e];n.onProgress&&n.onProgress(t)}}),!1),o.addEventListener("error",(function(t){const A=Os[e];delete Os[e];for(let e=0,n=A.length;e<n;e++){const n=A[e];n.onError&&n.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),o.addEventListener("abort",(function(t){const A=Os[e];delete Os[e];for(let e=0,n=A.length;e<n;e++){const n=A[e];n.onError&&n.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(o.responseType=this.responseType),void 0!==this.withCredentials&&(o.withCredentials=this.withCredentials),o.overrideMimeType&&o.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const e in this.requestHeader)o.setRequestHeader(e,this.requestHeader[e]);o.send(null)}return r.manager.itemStart(e),o}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Vs extends Ns{constructor(e){super(e)}load(e,t,A,n){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,i=Rs.get(e);if(void 0!==i)return r.manager.itemStart(e),setTimeout((function(){t&&t(i),r.manager.itemEnd(e)}),0),i;const s=document.createElementNS("http://www.w3.org/1999/xhtml","img");function o(){s.removeEventListener("load",o,!1),s.removeEventListener("error",a,!1),Rs.add(e,this),t&&t(this),r.manager.itemEnd(e)}function a(t){s.removeEventListener("load",o,!1),s.removeEventListener("error",a,!1),n&&n(t),r.manager.itemError(e),r.manager.itemEnd(e)}return s.addEventListener("load",o,!1),s.addEventListener("error",a,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(e),s.src=e,s}}class ks extends Ns{constructor(e){super(e)}load(e,t,A,n){const r=new aA,i=new Vs(this.manager);i.setCrossOrigin(this.crossOrigin),i.setPath(this.path);let s=0;function o(A){i.load(e[A],(function(e){r.images[A]=e,s++,6===s&&(r.needsUpdate=!0,t&&t(r))}),void 0,n)}for(let t=0;t<e.length;++t)o(t);return r}}class Ks extends Ns{constructor(e){super(e)}load(e,t,A,n){const r=new k,i=new Vs(this.manager);return i.setCrossOrigin(this.crossOrigin),i.setPath(this.path),i.load(e,(function(A){r.image=A;const n=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);r.format=n?p:g,r.needsUpdate=!0,void 0!==t&&t(r)}),A,n),r}}class zs extends Ei{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Oi(t,e))}getPoint(e){const t=e*this.getLength(),A=this.getCurveLengths();let n=0;for(;n<A.length;){if(A[n]>=t){const e=A[n]-t,r=this.curves[n],i=r.getLength(),s=0===i?0:1-e/i;return r.getPointAt(s)}n++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let A=0,n=this.curves.length;A<n;A++)t+=this.curves[A].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let A=0;A<=e;A++)t.push(this.getPoint(A/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let A;for(let n=0,r=this.curves;n<r.length;n++){const i=r[n],s=i&&i.isEllipseCurve?2*e:i&&(i.isLineCurve||i.isLineCurve3)?1:i&&i.isSplineCurve?e*i.points.length:e,o=i.getPoints(s);for(let e=0;e<o.length;e++){const n=o[e];A&&A.equals(n)||(t.push(n),A=n)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,A=e.curves.length;t<A;t++){const A=e.curves[t];this.curves.push(A.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,A=this.curves.length;t<A;t++){const A=this.curves[t];e.curves.push(A.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,A=e.curves.length;t<A;t++){const A=e.curves[t];this.curves.push((new Ki[A.type]).fromJSON(A))}return this}}class Ws extends zs{constructor(e){super(),this.type="Path",this.currentPoint=new P,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,A=e.length;t<A;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const A=new Oi(this.currentPoint.clone(),new P(e,t));return this.curves.push(A),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,A,n){const r=new Gi(this.currentPoint.clone(),new P(e,t),new P(A,n));return this.curves.push(r),this.currentPoint.set(A,n),this}bezierCurveTo(e,t,A,n,r,i){const s=new Pi(this.currentPoint.clone(),new P(e,t),new P(A,n),new P(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),A=new ki(t);return this.curves.push(A),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,A,n,r,i){const s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,A,n,r,i),this}absarc(e,t,A,n,r,i){return this.absellipse(e,t,A,A,n,r,i),this}ellipse(e,t,A,n,r,i,s,o){const a=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+a,t+c,A,n,r,i,s,o),this}absellipse(e,t,A,n,r,i,s,o){const a=new Ui(e,t,A,n,r,i,s,o);if(this.curves.length>0){const e=a.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(a);const c=a.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Xs extends Ws{constructor(e){super(e),this.uuid=L(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let A=0,n=this.holes.length;A<n;A++)t[A]=this.holes[A].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,A=e.holes.length;t<A;t++){const A=e.holes[t];this.holes.push(A.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,A=this.holes.length;t<A;t++){const A=this.holes[t];e.holes.push(A.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,A=e.holes.length;t<A;t++){const A=e.holes[t];this.holes.push((new Ws).fromJSON(A))}return this}}class Ys extends Ze{constructor(e,t=1){super(),this.type="Light",this.color=new mt(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}Ys.prototype.isLight=!0;(class extends Ys{constructor(e,t,A){super(e,A),this.type="HemisphereLight",this.position.copy(Ze.DefaultUp),this.updateMatrix(),this.groundColor=new mt(t)}copy(e){return Ys.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}).prototype.isHemisphereLight=!0;const Js=new Ee,js=new J,Zs=new J;class qs{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new P(512,512),this.map=null,this.mapPass=null,this.matrix=new Ee,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new fA,this._frameExtents=new P(1,1),this._viewportCount=1,this._viewports=[new z(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,A=this.matrix;js.setFromMatrixPosition(e.matrixWorld),t.position.copy(js),Zs.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Zs),t.updateMatrixWorld(),Js.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Js),A.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),A.multiply(t.projectionMatrix),A.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class $s extends qs{constructor(){super(new iA(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,A=2*T*e.angle*this.focus,n=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;A===t.fov&&n===t.aspect&&r===t.far||(t.fov=A,t.aspect=n,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}$s.prototype.isSpotLightShadow=!0;(class extends Ys{constructor(e,t,A=0,n=Math.PI/3,r=0,i=1){super(e,t),this.type="SpotLight",this.position.copy(Ze.DefaultUp),this.updateMatrix(),this.target=new Ze,this.distance=A,this.angle=n,this.penumbra=r,this.decay=i,this.shadow=new $s}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isSpotLight=!0;const eo=new Ee,to=new J,Ao=new J;class no extends qs{constructor(){super(new iA(90,1,.5,500)),this._frameExtents=new P(4,2),this._viewportCount=6,this._viewports=[new z(2,1,1,1),new z(0,1,1,1),new z(3,1,1,1),new z(1,1,1,1),new z(3,0,1,1),new z(1,0,1,1)],this._cubeDirections=[new J(1,0,0),new J(-1,0,0),new J(0,0,1),new J(0,0,-1),new J(0,1,0),new J(0,-1,0)],this._cubeUps=[new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,0,1),new J(0,0,-1)]}updateMatrices(e,t=0){const A=this.camera,n=this.matrix,r=e.distance||A.far;r!==A.far&&(A.far=r,A.updateProjectionMatrix()),to.setFromMatrixPosition(e.matrixWorld),A.position.copy(to),Ao.copy(A.position),Ao.add(this._cubeDirections[t]),A.up.copy(this._cubeUps[t]),A.lookAt(Ao),A.updateMatrixWorld(),n.makeTranslation(-to.x,-to.y,-to.z),eo.multiplyMatrices(A.projectionMatrix,A.matrixWorldInverse),this._frustum.setFromProjectionMatrix(eo)}}no.prototype.isPointLightShadow=!0;class ro extends Ys{constructor(e,t,A=0,n=1){super(e,t),this.type="PointLight",this.distance=A,this.decay=n,this.shadow=new no}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}ro.prototype.isPointLight=!0;class io extends rA{constructor(e=-1,t=1,A=1,n=-1,r=.1,i=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=A,this.bottom=n,this.near=r,this.far=i,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,A,n,r,i){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=A,this.view.offsetY=n,this.view.width=r,this.view.height=i,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),A=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let r=A-e,i=A+e,s=n+t,o=n-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,i=r+e*this.view.width,s-=t*this.view.offsetY,o=s-t*this.view.height}this.projectionMatrix.makeOrthographic(r,i,s,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}io.prototype.isOrthographicCamera=!0;class so extends qs{constructor(){super(new io(-5,5,5,-5,.5,500))}}so.prototype.isDirectionalLightShadow=!0;(class extends Ys{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(Ze.DefaultUp),this.updateMatrix(),this.target=new Ze,this.shadow=new so}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isDirectionalLight=!0;(class extends Ys{constructor(e,t){super(e,t),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class extends Ys{constructor(e,t,A=10,n=10){super(e,t),this.type="RectAreaLight",this.width=A,this.height=n}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}).prototype.isRectAreaLight=!0;class oo{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new J)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const A=e.x,n=e.y,r=e.z,i=this.coefficients;return t.copy(i[0]).multiplyScalar(.282095),t.addScaledVector(i[1],.488603*n),t.addScaledVector(i[2],.488603*r),t.addScaledVector(i[3],.488603*A),t.addScaledVector(i[4],A*n*1.092548),t.addScaledVector(i[5],n*r*1.092548),t.addScaledVector(i[6],.315392*(3*r*r-1)),t.addScaledVector(i[7],A*r*1.092548),t.addScaledVector(i[8],.546274*(A*A-n*n)),t}getIrradianceAt(e,t){const A=e.x,n=e.y,r=e.z,i=this.coefficients;return t.copy(i[0]).multiplyScalar(.886227),t.addScaledVector(i[1],1.023328*n),t.addScaledVector(i[2],1.023328*r),t.addScaledVector(i[3],1.023328*A),t.addScaledVector(i[4],.858086*A*n),t.addScaledVector(i[5],.858086*n*r),t.addScaledVector(i[6],.743125*r*r-.247708),t.addScaledVector(i[7],.858086*A*r),t.addScaledVector(i[8],.429043*(A*A-n*n)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let A=0;A<9;A++)this.coefficients[A].addScaledVector(e.coefficients[A],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let A=0;A<9;A++)this.coefficients[A].lerp(e.coefficients[A],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const A=this.coefficients;for(let n=0;n<9;n++)A[n].fromArray(e,t+3*n);return this}toArray(e=[],t=0){const A=this.coefficients;for(let n=0;n<9;n++)A[n].toArray(e,t+3*n);return e}static getBasisAt(e,t){const A=e.x,n=e.y,r=e.z;t[0]=.282095,t[1]=.488603*n,t[2]=.488603*r,t[3]=.488603*A,t[4]=1.092548*A*n,t[5]=1.092548*n*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*A*r,t[8]=.546274*(A*A-n*n)}}oo.prototype.isSphericalHarmonics3=!0;class ao extends Ys{constructor(e=new oo,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}ao.prototype.isLightProbe=!0;class co{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let A=0,n=e.length;A<n;A++)t+=String.fromCharCode(e[A]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}}(class extends Lt{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}).prototype.isInstancedBufferGeometry=!0;(class extends yt{constructor(e,t,A,n=1){"number"==typeof A&&(n=A,A=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,A),this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}).prototype.isInstancedBufferAttribute=!0,class extends Ns{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,A,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,i=Rs.get(e);if(void 0!==i)return r.manager.itemStart(e),setTimeout((function(){t&&t(i),r.manager.itemEnd(e)}),0),i;const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader,fetch(e,s).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(A){Rs.add(e,A),t&&t(A),r.manager.itemEnd(e)})).catch((function(t){n&&n(t),r.manager.itemError(e),r.manager.itemEnd(e)})),r.manager.itemStart(e)}}.prototype.isImageBitmapLoader=!0;let lo;class ho extends Ns{constructor(e){super(e)}load(e,t,A,n){const r=this,i=new Gs(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(function(A){try{const e=A.slice(0);(void 0===lo&&(lo=new(window.AudioContext||window.webkitAudioContext)),lo).decodeAudioData(e,(function(e){t(e)}))}catch(t){n?n(t):console.error(t),r.manager.itemError(e)}}),A,n)}}(class extends ao{constructor(e,t,A=1){super(void 0,A);const n=(new mt).set(e),r=(new mt).set(t),i=new J(n.r,n.g,n.b),s=new J(r.r,r.g,r.b),o=Math.sqrt(Math.PI),a=o*Math.sqrt(.75);this.sh.coefficients[0].copy(i).add(s).multiplyScalar(o),this.sh.coefficients[1].copy(i).sub(s).multiplyScalar(a)}}).prototype.isHemisphereLightProbe=!0,class extends ao{constructor(e,t=1){super(void 0,t);const A=(new mt).set(e);this.sh.coefficients[0].set(A.r,A.g,A.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;function uo(){return("undefined"==typeof performance?Date:performance).now()}class po{constructor(e,t,A){let n,r,i;switch(this.binding=e,this.valueSize=A,t){case"quaternion":n=this._slerp,r=this._slerpAdditive,i=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*A),this._workIndex=5;break;case"string":case"bool":n=this._select,r=this._select,i=this._setAdditiveIdentityOther,this.buffer=new Array(5*A);break;default:n=this._lerp,r=this._lerpAdditive,i=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*A)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=r,this._setIdentity=i,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const A=this.buffer,n=this.valueSize,r=e*n+n;let i=this.cumulativeWeight;if(0===i){for(let e=0;e!==n;++e)A[r+e]=A[e];i=t}else{i+=t;const e=t/i;this._mixBufferRegion(A,r,0,e,n)}this.cumulativeWeight=i}accumulateAdditive(e){const t=this.buffer,A=this.valueSize,n=A*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,n,0,e,A),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,A=this.buffer,n=e*t+t,r=this.cumulativeWeight,i=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(A,n,e,1-r,t)}i>0&&this._mixBufferRegionAdditive(A,n,this._addIndex*t,1,t);for(let e=t,r=t+t;e!==r;++e)if(A[e]!==A[e+t]){s.setValue(A,n);break}}saveOriginalState(){const e=this.binding,t=this.buffer,A=this.valueSize,n=A*this._origIndex;e.getValue(t,n);for(let e=A,r=n;e!==r;++e)t[e]=t[n+e%A];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let A=e;A<t;A++)this.buffer[A]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let A=0;A<this.valueSize;A++)this.buffer[t+A]=this.buffer[e+A]}_select(e,t,A,n,r){if(n>=.5)for(let n=0;n!==r;++n)e[t+n]=e[A+n]}_slerp(e,t,A,n){Y.slerpFlat(e,t,e,t,e,A,n)}_slerpAdditive(e,t,A,n,r){const i=this._workIndex*r;Y.multiplyQuaternionsFlat(e,i,e,t,e,A),Y.slerpFlat(e,t,e,t,e,i,n)}_lerp(e,t,A,n,r){const i=1-n;for(let s=0;s!==r;++s){const r=t+s;e[r]=e[r]*i+e[A+s]*n}}_lerpAdditive(e,t,A,n,r){for(let i=0;i!==r;++i){const r=t+i;e[r]=e[r]+e[A+i]*n}}}const go=new RegExp("[\\[\\]\\.:\\/]","g"),fo="[^\\[\\]\\.:\\/]",mo="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Bo=/((?:WC+[\/:])*)/.source.replace("WC",fo),wo=/(WCOD+)?/.source.replace("WCOD",mo),vo=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",fo),yo=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",fo),xo=new RegExp("^"+Bo+wo+vo+yo+"$"),Co=["material","materials","bones"];class bo{constructor(e,t,A){this.path=t,this.parsedPath=A||bo.parseTrackName(t),this.node=bo.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,A){return e&&e.isAnimationObjectGroup?new bo.Composite(e,t,A):new bo(e,t,A)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(go,"")}static parseTrackName(e){const t=xo.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const A={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=A.nodeName&&A.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){const e=A.nodeName.substring(n+1);-1!==Co.indexOf(e)&&(A.nodeName=A.nodeName.substring(0,n),A.objectName=e)}if(null===A.propertyName||0===A.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return A}static findNode(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const A=e.skeleton.getBoneByName(t);if(void 0!==A)return A}if(e.children){const A=function(e){for(let n=0;n<e.length;n++){const r=e[n];if(r.name===t||r.uuid===t)return r;const i=A(r.children);if(i)return i}return null},n=A(e.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.node[this.propertyName]}_getValue_array(e,t){const A=this.resolvedProperty;for(let n=0,r=A.length;n!==r;++n)e[t++]=A[n]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const A=this.resolvedProperty;for(let n=0,r=A.length;n!==r;++n)A[n]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const A=this.resolvedProperty;for(let n=0,r=A.length;n!==r;++n)A[n]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const A=this.resolvedProperty;for(let n=0,r=A.length;n!==r;++n)A[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,A=t.objectName,n=t.propertyName;let r=t.propertyIndex;if(e||(e=bo.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(A){let n=t.objectIndex;switch(A){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===n){n=t;break}break;default:if(void 0===e[A])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[A]}if(void 0!==n){if(void 0===e[n])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[n]}}const i=e[n];if(void 0===i){const A=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+A+"."+n+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=i,this.propertyIndex=r}else void 0!==i.fromArray&&void 0!==i.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=i):Array.isArray(i)?(o=this.BindingType.EntireArray,this.resolvedProperty=i):this.propertyName=n;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}bo.Composite=class{constructor(e,t,A){const n=A||bo.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}getValue(e,t){this.bind();const A=this._targetGroup.nCachedObjects_,n=this._bindings[A];void 0!==n&&n.getValue(e,t)}setValue(e,t){const A=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=A.length;n!==r;++n)A[n].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,A=e.length;t!==A;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,A=e.length;t!==A;++t)e[t].unbind()}},bo.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},bo.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},bo.prototype.GetterByBindingType=[bo.prototype._getValue_direct,bo.prototype._getValue_array,bo.prototype._getValue_arrayElement,bo.prototype._getValue_toArray],bo.prototype.SetterByBindingTypeAndVersioning=[[bo.prototype._setValue_direct,bo.prototype._setValue_direct_setNeedsUpdate,bo.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[bo.prototype._setValue_array,bo.prototype._setValue_array_setNeedsUpdate,bo.prototype._setValue_array_setMatrixWorldNeedsUpdate],[bo.prototype._setValue_arrayElement,bo.prototype._setValue_arrayElement_setNeedsUpdate,bo.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[bo.prototype._setValue_fromArray,bo.prototype._setValue_fromArray_setNeedsUpdate,bo.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class _o{constructor(e,t,A=null,n=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=A,this.blendMode=n;const r=t.tracks,i=r.length,s=new Array(i),o={endingStart:y,endingEnd:y};for(let e=0;e!==i;++e){const t=r[e].createInterpolant(null);s[e]=t,t.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,A){if(e.fadeOut(t),this.fadeIn(t),A){const A=this._clip.duration,n=e._clip.duration,r=n/A,i=A/n;e.warp(1,r,t),this.warp(i,1,t)}return this}crossFadeTo(e,t,A){return e.crossFadeFrom(this,t,A)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,A){const n=this._mixer,r=n.time,i=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=n._lendControlInterpolant(),this._timeScaleInterpolant=s);const o=s.parameterPositions,a=s.sampleValues;return o[0]=r,o[1]=r+A,a[0]=e/i,a[1]=t/i,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,A,n){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const n=(e-r)*A;if(n<0||0===A)return;this._startTime=null,t=A*n}t*=this._updateTimeScale(e);const i=this._updateTime(t),s=this._updateWeight(e);if(s>0){const e=this._interpolants,t=this._propertyBindings;switch(this.blendMode){case 2501:for(let A=0,n=e.length;A!==n;++A)e[A].evaluate(i),t[A].accumulateAdditive(s);break;case 2500:default:for(let A=0,r=e.length;A!==r;++A)e[A].evaluate(i),t[A].accumulate(n,s)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const A=this._weightInterpolant;if(null!==A){const n=A.evaluate(e)[0];t*=n,e>A.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const A=this._timeScaleInterpolant;null!==A&&(t*=A.evaluate(e)[0],e>A.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,A=this.loop;let n=this.time+e,r=this._loopCount;const i=2202===A;if(0===e)return-1===r?n:i&&1==(1&r)?t-n:n;if(2200===A){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n>=t)n=t;else{if(!(n<0)){this.time=n;break e}n=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,i)):this._setEndings(0===this.repetitions,!0,i)),n>=t||n<0){const A=Math.floor(n/t);n-=t*A,r+=Math.abs(A);const s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,n=e>0?t:0,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){const t=e<0;this._setEndings(t,!t,i)}else this._setEndings(!1,!1,i);this._loopCount=r,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:A})}}else this.time=n;if(i&&1==(1&r))return t-n}return n}_setEndings(e,t,A){const n=this._interpolantSettings;A?(n.endingStart=x,n.endingEnd=x):(n.endingStart=e?this.zeroSlopeAtStart?x:y:C,n.endingEnd=t?this.zeroSlopeAtEnd?x:y:C)}_scheduleFading(e,t,A){const n=this._mixer,r=n.time;let i=this._weightInterpolant;null===i&&(i=n._lendControlInterpolant(),this._weightInterpolant=i);const s=i.parameterPositions,o=i.sampleValues;return s[0]=r,o[0]=t,s[1]=r+e,o[1]=A,this}}(class extends Q{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const A=e._localRoot||this._root,n=e._clip.tracks,r=n.length,i=e._propertyBindings,s=e._interpolants,o=A.uuid,a=this._bindingsByRootAndName;let c=a[o];void 0===c&&(c={},a[o]=c);for(let e=0;e!==r;++e){const r=n[e],a=r.name;let l=c[a];if(void 0!==l)i[e]=l;else{if(l=i[e],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,o,a));continue}const n=t&&t._propertyBindings[e].binding.parsedPath;l=new po(bo.create(A,a,n),r.ValueTypeName,r.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,o,a),i[e]=l}s[e].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,A=e._clip.uuid,n=this._actionsByClip[A];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,A,t)}const t=e._propertyBindings;for(let e=0,A=t.length;e!==A;++e){const A=t[e];0==A.useCount++&&(this._lendBinding(A),A.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,A=t.length;e!==A;++e){const A=t[e];0==--A.useCount&&(A.restoreOriginalState(),this._takeBackBinding(A))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,A){const n=this._actions,r=this._actionsByClip;let i=r[t];if(void 0===i)i={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=i;else{const t=i.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=n.length,n.push(e),i.actionByRoot[A]=e}_removeInactiveAction(e){const t=this._actions,A=t[t.length-1],n=e._cacheIndex;A._cacheIndex=n,t[n]=A,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,i=this._actionsByClip,s=i[r],o=s.knownActions,a=o[o.length-1],c=e._byClipCacheIndex;a._byClipCacheIndex=c,o[c]=a,o.pop(),e._byClipCacheIndex=null,delete s.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete i[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,A=t.length;e!==A;++e){const A=t[e];0==--A.referenceCount&&this._removeInactiveBinding(A)}}_lendAction(e){const t=this._actions,A=e._cacheIndex,n=this._nActiveActions++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=A,t[A]=r}_takeBackAction(e){const t=this._actions,A=e._cacheIndex,n=--this._nActiveActions,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=A,t[A]=r}_addInactiveBinding(e,t,A){const n=this._bindingsByRootAndName,r=this._bindings;let i=n[t];void 0===i&&(i={},n[t]=i),i[A]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,A=e.binding,n=A.rootNode.uuid,r=A.path,i=this._bindingsByRootAndName,s=i[n],o=t[t.length-1],a=e._cacheIndex;o._cacheIndex=a,t[a]=o,t.pop(),delete s[r],0===Object.keys(s).length&&delete i[n]}_lendBinding(e){const t=this._bindings,A=e._cacheIndex,n=this._nActiveBindings++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=A,t[A]=r}_takeBackBinding(e){const t=this._bindings,A=e._cacheIndex,n=--this._nActiveBindings,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=A,t[A]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let A=e[t];return void 0===A&&(A=new _s(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),A.__cacheIndex=t,e[t]=A),A}_takeBackControlInterpolant(e){const t=this._controlInterpolants,A=e.__cacheIndex,n=--this._nActiveControlInterpolants,r=t[n];e.__cacheIndex=n,t[n]=e,r.__cacheIndex=A,t[A]=r}clipAction(e,t,A){const n=t||this._root,r=n.uuid;let i="string"==typeof e?Is.findByName(n,e):e;const s=null!==i?i.uuid:e,o=this._actionsByClip[s];let a=null;if(void 0===A&&(A=null!==i?i.blendMode:2500),void 0!==o){const e=o.actionByRoot[r];if(void 0!==e&&e.blendMode===A)return e;a=o.knownActions[0],null===i&&(i=a._clip)}if(null===i)return null;const c=new _o(this,i,t,A);return this._bindAction(c,a),this._addInactiveAction(c,s,r),c}existingAction(e,t){const A=t||this._root,n=A.uuid,r="string"==typeof e?Is.findByName(A,e):e,i=r?r.uuid:e,s=this._actionsByClip[i];return void 0!==s&&s.actionByRoot[n]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,A=this._nActiveActions,n=this.time+=e,r=Math.sign(e),i=this._accuIndex^=1;for(let s=0;s!==A;++s)t[s]._update(n,e,r,i);const s=this._bindings,o=this._nActiveBindings;for(let e=0;e!==o;++e)s[e].apply(i);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,A=e.uuid,n=this._actionsByClip,r=n[A];if(void 0!==r){const e=r.knownActions;for(let A=0,n=e.length;A!==n;++A){const n=e[A];this._deactivateAction(n);const r=n._cacheIndex,i=t[t.length-1];n._cacheIndex=null,n._byClipCacheIndex=null,i._cacheIndex=r,t[r]=i,t.pop(),this._removeInactiveBindingsForAction(n)}delete n[A]}}uncacheRoot(e){const t=e.uuid,A=this._actionsByClip;for(const e in A){const n=A[e].actionByRoot[t];void 0!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}const n=this._bindingsByRootAndName[t];if(void 0!==n)for(const e in n){const t=n[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const A=this.existingAction(e,t);null!==A&&(this._deactivateAction(A),this._removeInactiveAction(A))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Eo{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new Eo(void 0===this.value.clone?this.value:this.value.clone())}}(class extends Dr{constructor(e,t,A=1){super(e,t),this.meshPerAttribute=A}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;class Uo{constructor(e=1,t=0,A=0){return this.radius=e,this.phi=t,this.theta=A,this}set(e,t,A){return this.radius=e,this.phi=t,this.theta=A,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,A){return this.radius=Math.sqrt(e*e+t*t+A*A),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,A),this.phi=Math.acos(H(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Fo=new P;class Qo{constructor(e=new P(1/0,1/0),t=new P(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,A=e.length;t<A;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const A=Fo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(A),this.max.copy(e).add(A),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Fo.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Qo.prototype.isBox2=!0,class extends Ze{constructor(e){super(),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}}.prototype.isImmediateRenderObject=!0;const Mo=new J,So=new Ee,To=new Ee;function Lo(e){const t=[];e&&e.isBone&&t.push(e);for(let A=0;A<e.children.length;A++)t.push.apply(t,Lo(e.children[A]));return t}const Ho=new Float32Array(1);new Int32Array(Ho.buffer),Math.pow(2,8);const Io=[.125,.215,.35,.446,.526,.582],Do=5+Io.length,Ro=new Bt({side:1,depthWrite:!1,depthTest:!1}),{_lodPlanes:Po,_sizeLods:No,_sigmas:Oo}=(new Zt(new $t,Ro),Go());function Go(){const e=[],t=[],A=[];let n=8;for(let r=0;r<Do;r++){const i=Math.pow(2,n);t.push(i);let s=1/i;r>4?s=Io[r-8+4-1]:0==r&&(s=0),A.push(s);const o=1/(i-1),a=-o/2,c=1+o/2,l=[a,a,c,a,c,c,a,a,c,c,a,c],h=6,u=6,d=3,p=2,g=1,f=new Float32Array(d*u*h),m=new Float32Array(p*u*h),B=new Float32Array(g*u*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,A=e>2?0:-1,n=[t,A,0,t+2/3,A,0,t+2/3,A+1,0,t,A,0,t+2/3,A+1,0,t,A+1,0];f.set(n,d*u*e),m.set(l,p*u*e);const r=[e,e,e,e,e,e];B.set(r,g*u*e)}const w=new Lt;w.setAttribute("position",new yt(f,d)),w.setAttribute("uv",new yt(m,p)),w.setAttribute("faceIndex",new yt(B,g)),e.push(w),n>4&&n--}return{_lodPlanes:e,_sizeLods:t,_sigmas:A}}Math.sqrt(5),Ei.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Ei.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Ws.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},class extends wi{constructor(e=10,t=10,A=4473924,n=8947848){A=new mt(A),n=new mt(n);const r=t/2,i=e/t,s=e/2,o=[],a=[];for(let e=0,c=0,l=-s;e<=t;e++,l+=i){o.push(-s,0,l,s,0,l),o.push(l,0,-s,l,0,s);const t=e===r?A:n;t.toArray(a,c),c+=3,t.toArray(a,c),c+=3,t.toArray(a,c),c+=3,t.toArray(a,c),c+=3}const c=new Lt;c.setAttribute("position",new bt(o,3)),c.setAttribute("color",new bt(a,3)),super(c,new li({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class extends wi{constructor(e){const t=Lo(e),A=new Lt,n=[],r=[],i=new mt(0,0,1),s=new mt(0,1,0);for(let e=0;e<t.length;e++){const A=t[e];A.parent&&A.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(i.r,i.g,i.b),r.push(s.r,s.g,s.b))}A.setAttribute("position",new bt(n,3)),A.setAttribute("color",new bt(r,3)),super(A,new li({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,A=this.geometry,n=A.getAttribute("position");To.copy(this.root.matrixWorld).invert();for(let e=0,A=0;e<t.length;e++){const r=t[e];r.parent&&r.parent.isBone&&(So.multiplyMatrices(To,r.matrixWorld),Mo.setFromMatrixPosition(So),n.setXYZ(A,Mo.x,Mo.y,Mo.z),So.multiplyMatrices(To,r.parent.matrixWorld),Mo.setFromMatrixPosition(So),n.setXYZ(A+1,Mo.x,Mo.y,Mo.z),A+=2)}A.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Ns.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),co.extractUrlBase(e)},Ns.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Qo.prototype.center=function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},Qo.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Qo.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Qo.prototype.size=function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},q.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},q.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},q.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},q.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},q.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},me.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},fA.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},N.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},N.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},N.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},N.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},N.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},N.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},Ee.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},Ee.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},Ee.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new J).setFromMatrixColumn(this,3)},Ee.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},Ee.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Ee.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Ee.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Ee.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Ee.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},Ee.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Ee.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Ee.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Ee.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Ee.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Ee.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Ee.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Ee.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Ee.prototype.makeFrustum=function(e,t,A,n,r,i){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,n,A,r,i)},Ee.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},dA.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Y.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Y.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},_e.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},_e.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},_e.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},at.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},at.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},at.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},at.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},at.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},at.barycoordFromPoint=function(e,t,A,n,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),at.getBarycoord(e,t,A,n,r)},at.normal=function(e,t,A,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),at.getNormal(e,t,A,n)},Xs.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},Xs.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Bs(this,e)},Xs.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new vs(this,e)},P.prototype.fromAttribute=function(e,t,A){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,A)},P.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},P.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},J.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},J.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},J.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},J.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},J.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},J.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},J.prototype.fromAttribute=function(e,t,A){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,A)},J.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},J.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},z.prototype.fromAttribute=function(e,t,A){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,A)},z.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ze.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},Ze.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Ze.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},Ze.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Ze.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(Ze.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Zt.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Zt.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),ii.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},iA.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Ys.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(yt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===U},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(U)}}}),yt.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?U:E),this},yt.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},yt.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Lt.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},Lt.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new yt(arguments[1],arguments[2])))},Lt.prototype.addDrawCall=function(e,t,A){void 0!==A&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},Lt.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Lt.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Lt.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},Lt.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(Lt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Dr.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?U:E),this},Dr.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Bs.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Bs.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Bs.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Ir.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Eo.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(lt.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new mt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(nA.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Tr.prototype.clearTarget=function(e,t,A,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,A,n)},Tr.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},Tr.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Tr.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Tr.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Tr.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Tr.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Tr.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Tr.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Tr.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Tr.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Tr.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Tr.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Tr.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Tr.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},Tr.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Tr.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Tr.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Tr.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Tr.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Tr.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Tr.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Tr.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Tr.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Tr.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Tr.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?3001:b}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(xr.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(W.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),class extends Ze{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new ho).load(e,(function(e){t.setBuffer(e)})),this},oA.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},oA.prototype.clear=function(e,t,A,n){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,A,n)},G.crossOrigin=void 0,G.loadTexture=function(e,t,A,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new Ks;r.setCrossOrigin(this.crossOrigin);const i=r.load(e,A,void 0,n);return t&&(i.mapping=t),i},G.loadTextureCube=function(e,t,A,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new ks;r.setCrossOrigin(this.crossOrigin);const i=r.load(e,A,void 0,n);return t&&(i.mapping=t),i},G.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},G.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"130"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="130");const Vo={type:"change"},ko={type:"start"},Ko={type:"end"};class zo extends Q{constructor(e,t){super(),void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new J,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return s.phi},this.getAzimuthalAngle=function(){return s.theta},this.listenToKeyEvents=function(e){e.addEventListener("keydown",K),this._domElementKeyEvents=e},this.saveState=function(){A.target0.copy(A.target),A.position0.copy(A.object.position),A.zoom0=A.object.zoom},this.reset=function(){A.target.copy(A.target0),A.object.position.copy(A.position0),A.object.zoom=A.zoom0,A.object.updateProjectionMatrix(),A.dispatchEvent(Vo),A.update(),r=n.NONE},this.update=function(){const t=new J,h=(new Y).setFromUnitVectors(e.up,new J(0,1,0)),u=h.clone().invert(),d=new J,p=new Y,g=2*Math.PI;return function(){const e=A.object.position;t.copy(e).sub(A.target),t.applyQuaternion(h),s.setFromVector3(t),A.autoRotate&&r===n.NONE&&C(2*Math.PI/60/60*A.autoRotateSpeed),A.enableDamping?(s.theta+=o.theta*A.dampingFactor,s.phi+=o.phi*A.dampingFactor):(s.theta+=o.theta,s.phi+=o.phi);let f=A.minAzimuthAngle,m=A.maxAzimuthAngle;return isFinite(f)&&isFinite(m)&&(f<-Math.PI?f+=g:f>Math.PI&&(f-=g),m<-Math.PI?m+=g:m>Math.PI&&(m-=g),s.theta=f<=m?Math.max(f,Math.min(m,s.theta)):s.theta>(f+m)/2?Math.max(f,s.theta):Math.min(m,s.theta)),s.phi=Math.max(A.minPolarAngle,Math.min(A.maxPolarAngle,s.phi)),s.makeSafe(),s.radius*=a,s.radius=Math.max(A.minDistance,Math.min(A.maxDistance,s.radius)),!0===A.enableDamping?A.target.addScaledVector(c,A.dampingFactor):A.target.add(c),t.setFromSpherical(s),t.applyQuaternion(u),e.copy(A.target).add(t),A.object.lookAt(A.target),!0===A.enableDamping?(o.theta*=1-A.dampingFactor,o.phi*=1-A.dampingFactor,c.multiplyScalar(1-A.dampingFactor)):(o.set(0,0,0),c.set(0,0,0)),a=1,!!(l||d.distanceToSquared(A.object.position)>i||8*(1-p.dot(A.object.quaternion))>i)&&(A.dispatchEvent(Vo),d.copy(A.object.position),p.copy(A.object.quaternion),l=!1,!0)}}(),this.dispose=function(){A.domElement.removeEventListener("contextmenu",z),A.domElement.removeEventListener("pointerdown",N),A.domElement.removeEventListener("pointercancel",V),A.domElement.removeEventListener("wheel",k),A.domElement.ownerDocument.removeEventListener("pointermove",O),A.domElement.ownerDocument.removeEventListener("pointerup",G),null!==A._domElementKeyEvents&&A._domElementKeyEvents.removeEventListener("keydown",K)};const A=this,n={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=n.NONE;const i=1e-6,s=new Uo,o=new Uo;let a=1;const c=new J;let l=!1;const h=new P,u=new P,d=new P,p=new P,g=new P,f=new P,m=new P,B=new P,w=new P,v=[],y={};function x(){return Math.pow(.95,A.zoomSpeed)}function C(e){o.theta-=e}function b(e){o.phi-=e}const _=function(){const e=new J;return function(t,A){e.setFromMatrixColumn(A,0),e.multiplyScalar(-t),c.add(e)}}(),E=function(){const e=new J;return function(t,n){!0===A.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(A.object.up,e)),e.multiplyScalar(t),c.add(e)}}(),U=function(){const e=new J;return function(t,n){const r=A.domElement;if(A.object.isPerspectiveCamera){const i=A.object.position;e.copy(i).sub(A.target);let s=e.length();s*=Math.tan(A.object.fov/2*Math.PI/180),_(2*t*s/r.clientHeight,A.object.matrix),E(2*n*s/r.clientHeight,A.object.matrix)}else A.object.isOrthographicCamera?(_(t*(A.object.right-A.object.left)/A.object.zoom/r.clientWidth,A.object.matrix),E(n*(A.object.top-A.object.bottom)/A.object.zoom/r.clientHeight,A.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),A.enablePan=!1)}}();function F(e){A.object.isPerspectiveCamera?a/=e:A.object.isOrthographicCamera?(A.object.zoom=Math.max(A.minZoom,Math.min(A.maxZoom,A.object.zoom*e)),A.object.updateProjectionMatrix(),l=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),A.enableZoom=!1)}function Q(e){A.object.isPerspectiveCamera?a*=e:A.object.isOrthographicCamera?(A.object.zoom=Math.max(A.minZoom,Math.min(A.maxZoom,A.object.zoom/e)),A.object.updateProjectionMatrix(),l=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),A.enableZoom=!1)}function M(e){h.set(e.clientX,e.clientY)}function S(e){p.set(e.clientX,e.clientY)}function T(){if(1===v.length)h.set(v[0].pageX,v[0].pageY);else{const e=.5*(v[0].pageX+v[1].pageX),t=.5*(v[0].pageY+v[1].pageY);h.set(e,t)}}function L(){if(1===v.length)p.set(v[0].pageX,v[0].pageY);else{const e=.5*(v[0].pageX+v[1].pageX),t=.5*(v[0].pageY+v[1].pageY);p.set(e,t)}}function H(){const e=v[0].pageX-v[1].pageX,t=v[0].pageY-v[1].pageY,A=Math.sqrt(e*e+t*t);m.set(0,A)}function I(e){if(1==v.length)u.set(e.pageX,e.pageY);else{const t=j(e),A=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);u.set(A,n)}d.subVectors(u,h).multiplyScalar(A.rotateSpeed);const t=A.domElement;C(2*Math.PI*d.x/t.clientHeight),b(2*Math.PI*d.y/t.clientHeight),h.copy(u)}function D(e){if(1===v.length)g.set(e.pageX,e.pageY);else{const t=j(e),A=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);g.set(A,n)}f.subVectors(g,p).multiplyScalar(A.panSpeed),U(f.x,f.y),p.copy(g)}function R(e){const t=j(e),n=e.pageX-t.x,r=e.pageY-t.y,i=Math.sqrt(n*n+r*r);B.set(0,i),w.set(0,Math.pow(B.y/m.y,A.zoomSpeed)),F(w.y),m.copy(B)}function N(e){!1!==A.enabled&&(0===v.length&&(A.domElement.ownerDocument.addEventListener("pointermove",O),A.domElement.ownerDocument.addEventListener("pointerup",G)),function(e){v.push(e)}(e),"touch"===e.pointerType?function(e){switch(X(e),v.length){case 1:switch(A.touches.ONE){case 0:if(!1===A.enableRotate)return;T(),r=n.TOUCH_ROTATE;break;case 1:if(!1===A.enablePan)return;L(),r=n.TOUCH_PAN;break;default:r=n.NONE}break;case 2:switch(A.touches.TWO){case 2:if(!1===A.enableZoom&&!1===A.enablePan)return;A.enableZoom&&H(),A.enablePan&&L(),r=n.TOUCH_DOLLY_PAN;break;case 3:if(!1===A.enableZoom&&!1===A.enableRotate)return;A.enableZoom&&H(),A.enableRotate&&T(),r=n.TOUCH_DOLLY_ROTATE;break;default:r=n.NONE}break;default:r=n.NONE}r!==n.NONE&&A.dispatchEvent(ko)}(e):function(e){let t;switch(e.button){case 0:t=A.mouseButtons.LEFT;break;case 1:t=A.mouseButtons.MIDDLE;break;case 2:t=A.mouseButtons.RIGHT;break;default:t=-1}switch(t){case 1:if(!1===A.enableZoom)return;!function(e){m.set(e.clientX,e.clientY)}(e),r=n.DOLLY;break;case 0:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===A.enablePan)return;S(e),r=n.PAN}else{if(!1===A.enableRotate)return;M(e),r=n.ROTATE}break;case 2:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===A.enableRotate)return;M(e),r=n.ROTATE}else{if(!1===A.enablePan)return;S(e),r=n.PAN}break;default:r=n.NONE}r!==n.NONE&&A.dispatchEvent(ko)}(e))}function O(e){!1!==A.enabled&&("touch"===e.pointerType?function(e){switch(X(e),r){case n.TOUCH_ROTATE:if(!1===A.enableRotate)return;I(e),A.update();break;case n.TOUCH_PAN:if(!1===A.enablePan)return;D(e),A.update();break;case n.TOUCH_DOLLY_PAN:if(!1===A.enableZoom&&!1===A.enablePan)return;!function(e){A.enableZoom&&R(e),A.enablePan&&D(e)}(e),A.update();break;case n.TOUCH_DOLLY_ROTATE:if(!1===A.enableZoom&&!1===A.enableRotate)return;!function(e){A.enableZoom&&R(e),A.enableRotate&&I(e)}(e),A.update();break;default:r=n.NONE}}(e):function(e){if(!1!==A.enabled)switch(r){case n.ROTATE:if(!1===A.enableRotate)return;!function(e){u.set(e.clientX,e.clientY),d.subVectors(u,h).multiplyScalar(A.rotateSpeed);const t=A.domElement;C(2*Math.PI*d.x/t.clientHeight),b(2*Math.PI*d.y/t.clientHeight),h.copy(u),A.update()}(e);break;case n.DOLLY:if(!1===A.enableZoom)return;!function(e){B.set(e.clientX,e.clientY),w.subVectors(B,m),w.y>0?F(x()):w.y<0&&Q(x()),m.copy(B),A.update()}(e);break;case n.PAN:if(!1===A.enablePan)return;!function(e){g.set(e.clientX,e.clientY),f.subVectors(g,p).multiplyScalar(A.panSpeed),U(f.x,f.y),p.copy(g),A.update()}(e)}}(e))}function G(e){!1!==A.enabled&&(e.pointerType,A.dispatchEvent(Ko),r=n.NONE,W(e),0===v.length&&(A.domElement.ownerDocument.removeEventListener("pointermove",O),A.domElement.ownerDocument.removeEventListener("pointerup",G)))}function V(e){W(e)}function k(e){!1===A.enabled||!1===A.enableZoom||r!==n.NONE&&r!==n.ROTATE||(e.preventDefault(),A.dispatchEvent(ko),function(e){e.deltaY<0?Q(x()):e.deltaY>0&&F(x()),A.update()}(e),A.dispatchEvent(Ko))}function K(e){!1!==A.enabled&&!1!==A.enablePan&&function(e){let t=!1;switch(e.code){case A.keys.UP:U(0,A.keyPanSpeed),t=!0;break;case A.keys.BOTTOM:U(0,-A.keyPanSpeed),t=!0;break;case A.keys.LEFT:U(A.keyPanSpeed,0),t=!0;break;case A.keys.RIGHT:U(-A.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),A.update())}(e)}function z(e){!1!==A.enabled&&e.preventDefault()}function W(e){delete y[e.pointerId];for(let t=0;t<v.length;t++)if(v[t].pointerId==e.pointerId)return void v.splice(t,1)}function X(e){let t=y[e.pointerId];void 0===t&&(t=new P,y[e.pointerId]=t),t.set(e.pageX,e.pageY)}function j(e){const t=e.pointerId===v[0].pointerId?v[1]:v[0];return y[t.pointerId]}A.domElement.addEventListener("contextmenu",z),A.domElement.addEventListener("pointerdown",N),A.domElement.addEventListener("pointercancel",V),A.domElement.addEventListener("wheel",k,{passive:!1}),this.update()}}class Wo{constructor(e,t=" .:-=+*#%@",A={}){const n=A.resolution?A.resolution:.15,r=A.scale?A.scale:1,i=!!A.color&&A.color,s=!!A.alpha&&A.alpha,o=!!A.block&&A.block,a=!!A.invert&&A.invert;let c,l;const h=document.createElement("div");h.style.cursor="default";const u=document.createElement("table");let d,p,g;h.appendChild(u),this.setSize=function(t,A){c=t,l=A,e.setSize(t,A),function(){d=Math.round(c*C),p=Math.round(l*C),v.width=d,v.height=p,g=e.domElement,g.style.backgroundColor&&(u.rows[0].cells[0].style.backgroundColor=g.style.backgroundColor,u.rows[0].cells[0].style.color=g.style.color),u.cellSpacing=0,u.cellPadding=0;const t=u.style;t.display="inline",t.width=Math.round(d/C*r)+"px",t.height=Math.round(p/C*r)+"px",t.whiteSpace="pre",t.margin="0px",t.padding="0px",t.letterSpacing=E+"px",t.fontFamily=B,t.fontSize=b+"px",t.lineHeight=_+"px",t.textAlign="left",t.textDecoration="none"}()},this.render=function(t,A){e.render(t,A),function(e,t){y.clearRect(0,0,d,p),y.drawImage(w,0,0,d,p);const A=y.getImageData(0,0,d,p).data;let n="";for(let e=0;e<p;e+=2){for(let t=0;t<d;t++){const r=4*(e*d+t),c=A[r],l=A[r+1],h=A[r+2],u=A[r+3];let p,g;g=(.3*c+.59*l+.11*h)/255,0==u&&(g=1),p=Math.floor((1-g)*(x.length-1)),a&&(p=x.length-p-1);let f=x[p];void 0!==f&&" "!=f||(f="&nbsp;"),n+=i?"<span style='color:rgb("+c+","+l+","+h+");"+(o?"background-color:rgb("+c+","+l+","+h+");":"")+(s?"opacity:"+u/255+";":"")+"'>"+f+"</span>":f}n+="<br/>"}t.innerHTML="<tr><td>"+n+"</td></tr>"}(0,u)},this.domElement=h;const f=" .,:;i1tfLCG08@".split(""),m=" CGO08@".split(""),B="courier new, monospace",w=e.domElement,v=document.createElement("canvas");if(!v.getContext)return;const y=v.getContext("2d");if(!y.getImageData)return;let x=i?m:f;t&&(x=t);let C=.5;C=.25,n&&(C=n);const b=2/C*r,_=2/C*r;let E=0;switch(r){case 1:E=-1;break;case 2:case 3:E=-2.1;break;case 4:E=-3.1;break;case 5:E=-4.15}}}var Xo=A(120),Yo=A.n(Xo);let Jo=!0;const jo=new class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=uo(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=uo();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};let Zo=!1;var qo=!1;let $o;const ea=new Zt,ta=new Ir;ta.background=new mt(0,0,0);const Aa=new ro(16777215,1);Aa.position.set(100,100,400),ta.add(Aa);const na=new ro(16777215,.5);na.position.set(-500,100,-400),ta.add(na);const ra=new class extends Ns{constructor(e){super(e)}load(e,t,A,n){const r=this,i=new Gs(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(function(A){try{t(r.parse(A))}catch(t){n?n(t):console.error(t),r.manager.itemError(e)}}),A,n)}parse(e){function t(e,t,A){for(let n=0,r=e.length;n<r;n++)if(e[n]!==t.getUint8(A+n,!1))return!1;return!0}const A=function(e){if("string"==typeof e){const t=new Uint8Array(e.length);for(let A=0;A<e.length;A++)t[A]=255&e.charCodeAt(A);return t.buffer||t}return e}(e);return function(e){const A=new DataView(e);if(84+50*A.getUint32(80,!0)===A.byteLength)return!0;const n=[115,111,108,105,100];for(let e=0;e<5;e++)if(t(n,A,e))return!1;return!0}(A)?function(e){const t=new DataView(e),A=t.getUint32(80,!0);let n,r,i,s,o,a,c,l,h=!1;for(let e=0;e<70;e++)1129270351==t.getUint32(e,!1)&&82==t.getUint8(e+4)&&61==t.getUint8(e+5)&&(h=!0,s=new Float32Array(3*A*3),o=t.getUint8(e+6)/255,a=t.getUint8(e+7)/255,c=t.getUint8(e+8)/255,l=t.getUint8(e+9)/255);const u=new Lt,d=new Float32Array(3*A*3),p=new Float32Array(3*A*3);for(let e=0;e<A;e++){const A=84+50*e,l=t.getFloat32(A,!0),u=t.getFloat32(A+4,!0),g=t.getFloat32(A+8,!0);if(h){const e=t.getUint16(A+48,!0);0==(32768&e)?(n=(31&e)/31,r=(e>>5&31)/31,i=(e>>10&31)/31):(n=o,r=a,i=c)}for(let o=1;o<=3;o++){const a=A+12*o,c=3*e*3+3*(o-1);d[c]=t.getFloat32(a,!0),d[c+1]=t.getFloat32(a+4,!0),d[c+2]=t.getFloat32(a+8,!0),p[c]=l,p[c+1]=u,p[c+2]=g,h&&(s[c]=n,s[c+1]=r,s[c+2]=i)}}return u.setAttribute("position",new yt(d,3)),u.setAttribute("normal",new yt(p,3)),h&&(u.setAttribute("color",new yt(s,3)),u.hasColors=!0,u.alpha=l),u}(A):function(e){const t=new Lt,A=/solid([\s\S]*?)endsolid/g,n=/facet([\s\S]*?)endfacet/g;let r=0;const i=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,s=new RegExp("vertex"+i+i+i,"g"),o=new RegExp("normal"+i+i+i,"g"),a=[],c=[],l=new J;let h,u=0,d=0,p=0;for(;null!==(h=A.exec(e));){d=p;const e=h[0];for(;null!==(h=n.exec(e));){let e=0,t=0;const A=h[0];for(;null!==(h=o.exec(A));)l.x=parseFloat(h[1]),l.y=parseFloat(h[2]),l.z=parseFloat(h[3]),t++;for(;null!==(h=s.exec(A));)a.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),c.push(l.x,l.y,l.z),e++,p++;1!==t&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+r),3!==e&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+r),r++}const A=d,i=p-d;t.addGroup(A,i,u),u++}return t.setAttribute("position",new bt(a,3)),t.setAttribute("normal",new bt(c,3)),t}("string"!=typeof(n=e)?co.decodeText(new Uint8Array(n)):n);var n}},ia=new ys;ia.flatShading=!0,ia.side=2;const sa={width:window.innerWidth,height:window.innerHeight},oa=new iA(45,sa.width/sa.height,.1,2e3),aa=new Tr;let ca,la=" .:-+*=%@#";let ha="black",ua="white";function da(){ca=new Wo(aa,la,{invert:!0,resolution:.205}),ca.setSize(sa.width,sa.height),ca.domElement.style.color=ua,ca.domElement.style.backgroundColor=ha}function pa(){oa.aspect=window.innerWidth/window.innerHeight,oa.updateProjectionMatrix(),aa.setSize(window.innerWidth,window.innerHeight),ca.setSize(window.innerWidth,window.innerHeight)}da(),document.body.appendChild(ca.domElement),ra.load("./models/test2.stl",(function(e){ea.material=ia,ea.geometry=e;var t=new Zt(e,ia);ea.position.copy=t.position,e.computeVertexNormals(),ea.geometry.center(),ea.rotation.x=-90*Math.PI/180,ea.geometry.computeBoundingBox();var A=ea.geometry.boundingBox;function n(){ca.render(ta,oa)}ea.position.y=(A.max.z-A.min.z)/5,oa.position.x=4*A.max.x,oa.position.y=A.max.y,oa.position.z=3*A.max.z,ta.add(ea),$o=new zo(oa,ca.domElement),function e(){if(1==Zo){const t=jo.getElapsedTime();ea.rotation.z=t/3,n(),window.requestAnimationFrame(e)}else n(),window.requestAnimationFrame(e)}(),document.getElementById("file-selector").addEventListener("change",(function(e){const A=e.target.files[0],n=new FileReader;n.readAsArrayBuffer(A),n.onload=function(){0==qo&&(qo=!0);const e=ra.parse(this.result);t=e,ea.geometry=e,ea.geometry.center(),ea.rotation.x=-90*Math.PI/180,ea.geometry.computeBoundingBox();var A=ea.geometry.boundingBox;ea.position.y=(A.max.z-A.min.z)/6,ta.add(ea)}}),!1)})),document.getElementById("screenshotButton").addEventListener("click",(function(){var e=document.body;Yo()(e).then((function(e){var t=document.createElement("a");document.body.appendChild(t),t.download="ASCII.jpg",t.href=e.toDataURL("image/jpg"),console.log(t.href),t.click()}))})),document.getElementById("rotateButton").addEventListener("click",(function(){Zo=!Zo})),document.getElementById("updateASCII").addEventListener("click",(function(){document.body.removeChild(ca.domElement),la=" ."+document.getElementById("newASCII").value,da(),pa(),document.body.appendChild(ca.domElement),$o=new zo(oa,ca.domElement)})),document.getElementById("resetASCII").addEventListener("click",(function(){document.body.removeChild(ca.domElement),la=" .:-+*=%@#",da(),pa(),document.body.appendChild(ca.domElement),$o=new zo(oa,ca.domElement)})),document.getElementById("lightDark").addEventListener("click",(function(){Jo=!Jo,!0===Jo?(document.getElementById("kofi").style.color="white",document.body.style.backgroundColor="black",ha="black",ua="white",ca.domElement.style.color=ua,ca.domElement.style.backgroundColor=ha):(document.getElementById("kofi").style.color="black",document.body.style.backgroundColor="white",ha="white",ua="black",ca.domElement.style.color=ua,ca.domElement.style.backgroundColor=ha)})),window.addEventListener("resize",pa)})()})();
//# sourceMappingURL=bundle.c6e5e77c51636547c365.js.map